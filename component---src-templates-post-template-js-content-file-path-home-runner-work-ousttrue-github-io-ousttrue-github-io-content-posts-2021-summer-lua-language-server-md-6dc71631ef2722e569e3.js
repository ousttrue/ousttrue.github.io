"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6617],{6072:function(e,n,t){t.r(n),t.d(n,{default:function(){return o}});var l=t(1151),a=t(7294);function r(e){const n=Object.assign({p:"p",a:"a",code:"code",h1:"h1",pre:"pre",h2:"h2",ul:"ul",li:"li"},(0,l.ah)(),e.components);return a.createElement(a.Fragment,null,a.createElement(n.p,null,a.createElement(n.a,{href:"https://github.com/sumneko/lua-language-server"},"lua-language-server")," が luajit ffi のインテリセンスを出せるように emmylua annotation を生成するより、\n",a.createElement(n.code,null,"ffi.cdef")," を読めるようにすればよいのでは。\nということで、lua-language-server を探ってみる。"),"\n",a.createElement(n.h1,null,"構成"),"\n",a.createElement(n.p,null,"https://github.com/sumneko/lua-language-server/wiki/Command-line"),"\n",a.createElement(n.p,null,a.createElement(n.code,null,'BINRARY/lua-language-server LUA_LANGUAGE_SERVER/main.lua --logpath=D:/log --metapath=D:/meta --locale=en-us --configpath="config.json"')),"\n",a.createElement(n.pre,null,a.createElement(n.code,null,"> .\\bin\\Windows\\lua-language-server.exe --help\nlua-language-server.exe:unrecognized option '--help'usage: C:\\Users\\oustt\\ghq\\github.com\\sumneko\\lua-language-server\\bin\\Windows\\lua-language-server.exe [options] [script [args]]\nAvailable options are:\n  -e stat  execute string 'stat'\n  -i       enter interactive mode after executing 'script'\n  -l name  require library 'name' into global 'name'\n  -v       show version information\n  -E       ignore environment variables\n  -W       turn warnings on\n  --       stop handling options\n  -        stop handling options and execute stdin\n> .\\bin\\Windows\\lua-language-server.exe -v    \nLua 5.4.4  Copyright (C) 1994-2021 Lua.org, PUC-Rio  \n")),"\n",a.createElement(n.p,null,"native モジュールを埋め込んだインタープリター ",a.createElement(n.code,null,"lua-language-server.exe")," で ",a.createElement(n.code,null,"main.lua")," を実行する。"),"\n",a.createElement(n.h2,null,"setting"),"\n",a.createElement(n.p,null,a.createElement(n.code,null,".vscode/settings.json")),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-json"},'     "Lua.runtime.version": "LuaJIT",\n     "Lua.workspace.preloadFileSize": 10000\n')),"\n",a.createElement(n.h1,null,"LSP"),"\n",a.createElement(n.p,null,"https://microsoft.github.io/language-server-protocol/"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,a.createElement(n.a,{href:"https://microsoft.github.io/language-server-protocol/specifications/specification-current/#textDocument_signatureHelp"},"signatureHelp")),"\n"),"\n",a.createElement(n.h1,null,"main.lua"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"main.lua","\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"script/service/service.lua"),"\n"),"\n"),"\n"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-lua"},"function m.start()\n    util.enableCloseFunction()\n    await.setErrorHandle(log.error)\n    pub.recruitBraves(4)\n\n    -- transport\n    proto.listen()\n\n    m.report()\n    m.pulse()\n    m.reportStatus()\n    m.testVersion()\n\n    require 'provider'\n\n    m.startTimer()\nend\n")),"\n",a.createElement(n.h1,null,"script/parser"),"\n",a.createElement(n.p,null,"lua のコード解析"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"script/parser/parse.lua"),"\n"),"\n",a.createElement(n.p,null,a.createElement(n.code,null,"ast.init(state)")),"\n",a.createElement(n.h2,null,"LPeg"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"\n",a.createElement(n.p,null,"script/parser/grammar.lua"),"\n"),"\n",a.createElement(n.li,null,"\n",a.createElement(n.p,null,a.createElement(n.a,{href:"http://www.inf.puc-rio.br/~roberto/lpeg/"},"LPeg")),"\n"),"\n",a.createElement(n.li,null,"\n",a.createElement(n.p,null,a.createElement(n.a,{href:"https://gist.github.com/tacigar/93b30931c879cd8a9b12380724b956aa"},"Lua製PEG「LPeg」を触ってみた")),"\n"),"\n",a.createElement(n.li,null,"\n",a.createElement(n.p,null,a.createElement(n.a,{href:"https://nymphium.github.io/2015/07/23/lpeg2.html"},"LPegの使い方 patternその2")),"\n"),"\n",a.createElement(n.li,null,"\n",a.createElement(n.p,null,a.createElement(n.a,{href:"https://sceneryandfish.withnotes.net/blog/2014/07/22-lua-lpeg-how-to-use/"},"LPeg – Parsing Expression Grammars For Luaの使い方")),"\n"),"\n"))}var u=function(e){void 0===e&&(e={});const{wrapper:n}=Object.assign({},(0,l.ah)(),e.components);return n?a.createElement(n,e,a.createElement(r,e)):r(e)};t(8678);function c(e){let{data:n,children:t}=e;return a.createElement(a.Fragment,null,a.createElement("h1",null,n.mdx.frontmatter.title),a.createElement(l.Zo,null,t))}function o(e){return a.createElement(c,e,a.createElement(u,e))}},8678:function(e,n,t){t(7294)},1151:function(e,n,t){t.d(n,{Zo:function(){return c},ah:function(){return r}});var l=t(7294);const a=l.createContext({});function r(e){const n=l.useContext(a);return l.useMemo((()=>"function"==typeof e?e(n):{...n,...e}),[n,e])}const u={};function c({components:e,children:n,disableParentContext:t}){let c;return c=t?"function"==typeof e?e({}):e||u:r(e),l.createElement(a.Provider,{value:c},n)}}}]);
//# sourceMappingURL=component---src-templates-post-template-js-content-file-path-home-runner-work-ousttrue-github-io-ousttrue-github-io-content-posts-2021-summer-lua-language-server-md-6dc71631ef2722e569e3.js.map