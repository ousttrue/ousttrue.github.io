"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4072],{58:function(e,n,t){t.r(n),t.d(n,{default:function(){return u}});var l=t(1151),r=t(7294);function a(e){const n=Object.assign({h1:"h1",p:"p",code:"code",h2:"h2",a:"a",ul:"ul",li:"li",pre:"pre"},(0,l.ah)(),e.components);return r.createElement(r.Fragment,null,r.createElement(n.h1,null,"Gentoo 構築"),"\n",r.createElement(n.p,null,"久しぶりに gentoo の機運が高まったので入れてみた。\n先に ",r.createElement(n.code,null,"Ubuntu-20.04")," を入れておいて、後ろのパーティションに gentoo をインストールする作戦。\nUbuntu と同じ ",r.createElement(n.code,null,"/home")," をマウントしてみたら ",r.createElement(n.code,null,"dotfiles")," に互換性が無かったのでやめた。\nわりと順調にインストールできた。\nゆくゆくは wsl も gentoo に換装したいところじゃ。"),"\n",r.createElement(n.h2,null,"2022-05-05"),"\n",r.createElement(n.p,null,"システムを壊してしもた。\n作りなおし。ついでに ",r.createElement(n.a,{href:"https://wiki.gentoo.org/wiki/Btrfs"},"btffs")," やってみる。"),"\n",r.createElement(n.ul,null,"\n",r.createElement(n.li,null,"https://wiki.gentoo.org/wiki/Handbook:AMD64/Installation/Stage#Downloading_the_stage_tarball"),"\n"),"\n",r.createElement(n.p,null,"Stage3: ",r.createElement(n.code,null,"openrc | desktop profile")),"\n",r.createElement(n.h2,null,"btrfs"),"\n",r.createElement(n.p,null,r.createElement(n.code,null,"/etc/fstab")),"\n",r.createElement(n.pre,null,r.createElement(n.code,null,"/dev/sdb                /srv            btrfs           compress=zstd:9,relatime,rw     0 0\n")),"\n",r.createElement(n.h2,null,"python-3.10"),"\n",r.createElement(n.p,null,r.createElement(n.code,null,"PYTHON_SINGLE_TARGET")),"\n",r.createElement(n.p,null,"6月くらいにデフォルトになる予定みたいだ。先にやってみた。"),"\n",r.createElement(n.p,null,"間違い。去年の6月に、 ",r.createElement(n.code,null,"Python-3.9")," がデフォルトになった。\n",r.createElement(n.code,null,"Python-3.10")," は今のところ予定に無い。\nいろいろインストールできなくなったので、元に戻した。"),"\n",r.createElement(n.h2,null,"make.conf"),"\n",r.createElement(n.p,null,"ここに貼っておこう。\nこいつを育てているようなものだし。"),"\n",r.createElement(n.pre,null,r.createElement(n.code,null,'# These settings were set by the catalyst build script that automatically\n# built this stage.\n# Please consult /usr/share/portage/config/make.conf.example for a more\n# detailed example.\nCOMMON_FLAGS="-march=native -O2 -pipe"\nCFLAGS="${COMMON_FLAGS}"\nCXXFLAGS="${COMMON_FLAGS}"\nFCFLAGS="${COMMON_FLAGS}"\nFFLAGS="${COMMON_FLAGS}"\n\n# NOTE: This stage was built with the bindist Use flag enabled\nPORTDIR="/var/db/repos/gentoo"\nDISTDIR="/var/cache/distfiles"\nPKGDIR="/var/cache/binpkgs"\n\nUSE="X sixel truetype vim-syntax jpeg png python fontforge cjk alsa \\\n     pulseaudio mp3 dbus opengl ffmpeg mad mpd elogind gtk"\nINPUT_DEVICES="evdev libinput synaptics"\n#VIDEO_CARDS="nouveau"\nVIDEO_CARDS="nvidia"\nABI_X86="64"\n\n# This sets the language of build output to English.\n# Please keep this setting intact when reporting bugs.\nLC_MESSAGES="C"\n\nMAKEOPTS="-j6"\n')),"\n",r.createElement(n.h2,null,"passwd"),"\n",r.createElement(n.p,null,r.createElement(n.code,null,"/etc/security/passwdqc.conf")),"\n",r.createElement(n.h2,null,"boot"),"\n",r.createElement(n.p,null,r.createElement(n.code,null,"refind")," を試してみた。\n先に、Ubuntu の方でインストールして ",r.createElement(n.code,null,"gentoo")," でエントリーだけ増やした。\n",r.createElement(n.code,null,"grub2")," より設定が簡単だと思った。\n情報は少なめ。"),"\n",r.createElement(n.p,null,r.createElement(n.code,null,"/boot/efi/EFI/refind/refind.conf")),"\n",r.createElement(n.pre,null,r.createElement(n.code,null,'# rootの指定が必要 \nmenuentry Gentoo {\n    icon EFI/refind/icons/os_gentoo.png\n    loader /EFI/gentoo/vmlinuz-5.15.32-gentoo-r1-x86_64\n    initrd /EFI/gentoo/initramfs-5.15.32-gentoo-r1-x86_64.img\n    options "root=/dev/sda4"\n}\n')),"\n",r.createElement(n.p,null,"起動時に自動検索と設定に記述したエントリが出てくるので、",r.createElement(n.code,null,"-")," キーで隠すと見ためがすっきりする。"),"\n",r.createElement(n.h2,null,"xorg"),"\n",r.createElement(n.p,null,"なんとなくできた。"),"\n",r.createElement(n.pre,null,r.createElement(n.code,null,"$ startx -- vt1\n")),"\n",r.createElement(n.p,null,"としないとエラーになる。\n",r.createElement(n.code,null,"/etc/X11")," は作らなくても動いた。"),"\n",r.createElement(n.p,null,"いつもどおりに ",r.createElement(n.code,null,"openbox"),", ",r.createElement(n.code,null,"tint2"),", ",r.createElement(n.code,null,"PCManFM"),", ",r.createElement(n.code,null,"conky")," という感じだが、今回は新型の ",r.createElement(n.code,null,"wezterm")," がある。"),"\n",r.createElement(n.h2,null,"yaft"),"\n",r.createElement(n.p,null,"nerdfonts 入りの bdffont を作りたいのだが未だ。\nmlterm-fb や kmscon も試してみたのだがうまく動かなかった。"),"\n",r.createElement(n.h2,null,"wayland"),"\n",r.createElement(n.p,null,"TODO:"))}var c=function(e){void 0===e&&(e={});const{wrapper:n}=Object.assign({},(0,l.ah)(),e.components);return n?r.createElement(n,e,r.createElement(a,e)):a(e)};t(8678);function o(e){let{data:n,children:t}=e;return r.createElement(r.Fragment,null,r.createElement("h1",null,n.mdx.frontmatter.title),r.createElement(l.Zo,null,t))}function u(e){return r.createElement(o,e,r.createElement(c,e))}},8678:function(e,n,t){t(7294)},1151:function(e,n,t){t.d(n,{Zo:function(){return o},ah:function(){return a}});var l=t(7294);const r=l.createContext({});function a(e){const n=l.useContext(r);return l.useMemo((()=>"function"==typeof e?e(n):{...n,...e}),[n,e])}const c={};function o({components:e,children:n,disableParentContext:t}){let o;return o=t?"function"==typeof e?e({}):e||c:a(e),l.createElement(r.Provider,{value:o},n)}}}]);
//# sourceMappingURL=component---src-templates-post-template-js-content-file-path-home-runner-work-ousttrue-github-io-ousttrue-github-io-content-posts-2022-0419-gentoo-md-7dda5e9f23e4ed1c762f.js.map