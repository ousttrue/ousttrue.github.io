"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6158],{4180:function(n,t,e){e.r(t),e.d(t,{default:function(){return p}});var o=e(1151),l=e(7294);function a(n){const t=Object.assign({p:"p",pre:"pre",code:"code"},(0,o.ah)(),n.components);return l.createElement(l.Fragment,null,l.createElement(t.p,null,"また生成システムを変えてみる。"),"\n",l.createElement(t.p,null,"https://getnikola.com/"),"\n",l.createElement(t.pre,null,l.createElement(t.code,null,'\n# init\n\n\n> pip install "Nikola[extras]"\n> nikola init .\n\n\nhttps://github.com/github/gitignore/blob/master/community/Python/Nikola.gitignore\n.gitignore\n# nikola\n.doit.db*\n*.pyc\n/cache/\n/output/\n\n\n`conf.py`\npy\n# とりあえず\nPOSTS = (\n    ("content/*.rst", "posts", "post.tmpl"),\n    ("content/*.md", "posts", "post.tmpl"),\n    ("content/*.txt", "posts", "post.tmpl"),\n    ("content/*.html", "posts", "post.tmpl"),\n)\n\n\n\n> nikola auto --browser\n\n\nなんとなくプレビューできた。\nええやん。\n\n# zola から記事移植\n\n`POSTS` のパス調整でもうできているのだけど、 `frontmatter` の非互換がある。\nそれを調べる。\n\nhttps://getnikola.com/handbook.html#metadata-fields\n\n* `taxonomies.tags` を `tags` に書き換える\n\n小文字強制\npy\nMETADATA_VALUE_MAPPING = {\n    "toml": {\n        "tags": lambda ls: [x.lower() for x in ls]\n     }\n}\n\n# github action で gh-pages\n\n`.github/workflows/nikola.yml`\n\nこんなもんかな。\n\nyml\nname: Nikola\n\non:\n  push:\n    branches:\n      - nikola\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n    env:\n      ACTIONS_ALLOW_UNSECURE_COMMANDS: true\n    steps:\n      - uses: actions/checkout@v1\n      - run: pip install "Nikola[extras]"\n      - name: build\n        run: nikola build\n      - name: Deploy\n        uses: peaceiris/actions-gh-pages@v3\n        with:\n          github_token: ${{ secrets.GITHUB_TOKEN }}\n          publish_dir: ./output\n\n\n\n## 動作\n\nhttps://getnikola.com/internals.html\n\n## yapsy\n\nhttps://getnikola.com/extending.html\n\n`nikola/plugin_categories.py`\n\nhttp://yapsy.sourceforge.net/\n\n## build\n\n[DoIt](https://pydoit.org/) で駆動されるらしい。\n\nnikola は DoIt の task を生成する。\n\n* https://schettino72.wordpress.com/2008/04/14/doit-a-build-tool-tale/\n* [タスクランナー Doit を使ってみよう](https://qiita.com/iisaka51/items/052ffbd9ab3b12504228)\n\n## Theme\n\n* https://getnikola.com/creating-a-theme.html\n* https://getnikola.com/theming.html\n* [Nikola を windows でやるぞ 2](https://iuk.hateblo.jp/entry/2016/10/28/040908)\n\n\n* `themes/custom` フォルダを作る\n* `conf.py` の `THEME = "custom"`\n\n最低限\n\n| path                   | url | 必須   |                                                             |\n|------------------------|-----|--------|-------------------------------------------------------------|\n| bundles                |     | 必須   | 空ファイルでもOk。copy from nikola/data/themes/base/bundles |\n| assets                 |     | option | copy from nikola/data/themes/base/assets                    |\n| templates/index.tmpl   | /   | 必須   | top page                                                    |\n| templates/post.tmpl    |     | 必須   | 各記事                                                      |\n| templates/page.tmpl    |     | 必須   | 各記事                                                      |\n| templates/list.tmpl    |     | 必須   | archive.html                                                |\n| templates/archive.tmpl |     | 必須   | {YEARE}/ archive.html から 年別 リンクをたどったところ      |\n| templates/tags.tmpl    |     | 必須   | categories/index.html                                       |\n| templates/tag.tmpl     |     | 必須   | categories/{TAG_NAME}/index.html                            |\n| templates/gallery.tmpl |     | 必須   |                                                             |\n| templates/listing.tmpl |     | 必須   |                                                             |\n| THEME_NAME.theme       |     | option | Theme meta files                                            |\n| templates/base.tmpl    |     | option | すべての tmpl が継承することで一貫した見た目にする          |\n\n### bundles and assets\n\n`lib/python3.9/site-packages/nikola/data/themes/base` からコピーするとよさそう。\n\n### base.tmpl\n\nhtml\n<html>\n\n<body>\n    <h1 id="brand">\n        <a href="{{ _link(\'root\', None, lang) }}" title="{{ blog_title|e }}" rel="home">\n            <span id="blog-title">{{ blog_title|e }}</span>\n        </a>\n    </h1>\n    <hr>\n    <main id="content">\n        {% block content %}{% endblock %}\n    </main>\n</body>\n\n</html>\n\n\n### index.tmpl\n\nhtml\n{% extends \'base.tmpl\' %}\n\n{% block content %}\n{% if prevlink %}\n<a href="{{ prevlink }}" rel="prev">prev</a>\n{% endif %}\n\n{% for post in posts %}\n<h1 class="p-name entry-title">\n    <a href="{{ post.permalink() }}" class="u-url">{{ post.title()|e }}</a>\n</h1>\n{% endfor %}\n\n{% if nextlink %}\n<a href="{{ nextlink }}" rel="next">next</a>\n{% endif %}\n{% endblock %}\n\n\n### post.tmpl\n\nhtml\n{% extends \'base.tmpl\' %}\n\n{% block content %}\n<h1 class="p-name entry-title" itemprop="headline name">\n    <a href="{{ post.permalink() }}" class="u-url">{{ post.title()|e}}</a>\n</h1>\n{{ post.text() }}\n{% endblock %}\n\n\n### THEME_NAME.theme\n\n\n[Theme]\nengine = jinja\n\n\n## vscode\n\n`settings.json`\n\njson\n    "files.associations": {\n        "*.tmpl": "html",\n    },\n\n\n## ToDo\n\n* Theme 調整\n* TOC\n* syntax highlight\n')))}var s=function(n){void 0===n&&(n={});const{wrapper:t}=Object.assign({},(0,o.ah)(),n.components);return t?l.createElement(t,n,l.createElement(a,n)):a(n)};e(8678);function i(n){let{data:t,children:e}=n;return l.createElement(l.Fragment,null,l.createElement("h1",null,t.mdx.frontmatter.title),l.createElement(o.Zo,null,e))}function p(n){return l.createElement(i,n,l.createElement(s,n))}},8678:function(n,t,e){e(7294)},1151:function(n,t,e){e.d(t,{Zo:function(){return i},ah:function(){return a}});var o=e(7294);const l=o.createContext({});function a(n){const t=o.useContext(l);return o.useMemo((()=>"function"==typeof n?n(t):{...t,...n}),[t,n])}const s={};function i({components:n,children:t,disableParentContext:e}){let i;return i=e?"function"==typeof n?n({}):n||s:a(n),o.createElement(l.Provider,{value:i},t)}}}]);
//# sourceMappingURL=component---src-templates-post-template-js-content-file-path-home-runner-work-ousttrue-github-io-ousttrue-github-io-content-posts-2021-fall-nikola-md-f5f5c65ee1ed6d702aa9.js.map