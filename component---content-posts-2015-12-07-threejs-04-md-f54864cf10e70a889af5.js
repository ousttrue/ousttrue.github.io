"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5257],{637:function(n,e,r){r.r(e);var t=r(1151),o=r(7294);function a(n){const e=Object.assign({pre:"pre",code:"code",p:"p"},(0,t.ah)(),n.components);return o.createElement(o.Fragment,null,o.createElement(e.pre,null,o.createElement(e.code,null,'source\n外部のJSONに記述されたモデルを読み込む機能がある。\nExternal models in Three.js\nを見てやってみた。\nOnLoad(geometry: THREE.Geometry, materials: THREE.Material[]) {\n    // create a mesh with models geometry and material\n    var material = new THREE.MeshPhongMaterial(materials[0]);\n    var mesh = new THREE.Mesh(\n        geometry,\n        material\n    );\n\n    mesh.rotation.y = -Math.PI / 5;\n\n    this.scene.add(mesh);\n    this.Render();\n}\n\nOnProgress(event: any) {\n    console.log(\'OnProgress: \', event);\n}\n\nOnError(event: any) {\n    console.log(\'OnError: \', event);\n}\n\nAddModelFromJson(path: string) {\n    var loader = new THREE.JSONLoader(); // init the loader util\n\n    // init loading\n    loader.load(path, this.OnLoad.bind(this)\n        , this.OnProgress.bind(this)\n        , this.OnError.bind(this));\n}\n\nJSONLoaderクラスを初期化してloadをコール、loadは非同期に完了してOnLoadコールバックでMeshを組み立ててシーンに追加するという流れ。\nOnLoadにMeshが返ってくればいいと思うのだが・・・\nモデルはサンプルファイルを探したのだが見つからなかったので、\nThree.js の JSONLoader のメモ\nを見てBlenderのThree.js exporterでお猿さんを作ってみました。\n一応、茶色いマテリアルをつけたのだけどうまくいかず。\nフォーマットはどうなっているのか？\ncubeもエクスポートしてみた。\ncube.json\n{\n    "faces": [35,2,0,1,3,0,0,1,2,3,35,3,7,6,2,0,3,4,5,0,35,7,5,4,6,0,4,6,7,5,35,0,4,5,1,0,1,7,6,2,35,0,2,6,4,0,1,0,5,7,35,5,7,3,1,0,6,4,3,2],\n    "name": "CubeGeometry.1",\n    "metadata": {\n        "generator": "io_three",\n        "vertices": 8,\n        "type": "Geometry",\n        "uvs": 0,\n        "version": 3,\n        "faces": 6,\n        "materials": 1,\n        "normals": 8\n    },\n    "vertices": [-1,-1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,-1,1,1,1,1,1,-1,-1,1,1,-1],\n    "materials": [{\n        "depthWrite": true,\n        "colorDiffuse": [0,0.64,0.040691],\n        "depthTest": true,\n        "specularCoef": 50,\n        "blending": "NormalBlending",\n        "shading": "phong",\n        "colorEmissive": [0,0,0],\n        "opacity": 1,\n        "transparent": false,\n        "DbgIndex": 0,\n        "visible": true,\n        "wireframe": false,\n        "colorSpecular": [0.5,0.5,0.5],\n        "colorAmbient": [0,0.64,0.040691],\n        "DbgName": "Material",\n        "DbgColor": 15658734\n    }],\n    "uvs": [],\n    "normals": [-0.577349,-0.577349,-0.577349,-0.577349,-0.577349,0.577349,-0.577349,0.577349,0.577349,-0.577349,0.577349,-0.577349,0.577349,0.577349,-0.577349,0.577349,-0.577349,-0.577349,0.577349,0.577349,0.577349,0.577349,-0.577349,0.577349]\n}\n')),"\n",o.createElement(e.p,null,"JSON Model format 3 (Soon to be deprecated)\nこれっぽいですな。\nなるほど。なるほど。"))}e.default=function(n){void 0===n&&(n={});const{wrapper:e}=Object.assign({},(0,t.ah)(),n.components);return e?o.createElement(e,n,o.createElement(a,n)):a(n)}},1151:function(n,e,r){r.d(e,{ah:function(){return a}});var t=r(7294);const o=t.createContext({});function a(n){const e=t.useContext(o);return t.useMemo((()=>"function"==typeof n?n(e):{...e,...n}),[e,n])}}}]);
//# sourceMappingURL=component---content-posts-2015-12-07-threejs-04-md-f54864cf10e70a889af5.js.map