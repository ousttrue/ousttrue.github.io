"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6705],{3684:function(e,n,o){o.r(n);var t=o(1151),l=o(7294);function i(e){const n=Object.assign({p:"p",blockquote:"blockquote"},(0,t.ah)(),e.components);return l.createElement(l.Fragment,null,l.createElement(n.p,null,"bat作るときにたまに使う\ncmake.exeとmsbuild.exeの在りかについて"),"\n",l.createElement(n.p,null,'VisualStudio2017内のcmake.exe\nVisualStudio2017に同梱されるようになったcmakeのパスについて。\n以下のパスに存在する。\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\Common7\\IDE\\CommonExtensions\\Microsoft\\CMake\\CMake\\bin\\cmake.exe\nversion確認\nPS> &"C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\Common7\\IDE\\CommonExtensions\\Microsoft\\CMake\\CMake\\bin\\cmake.exe" --version\ncmake version 3.6.20160606-g0391f-MSVC'),"\n",l.createElement(n.p,null,"CMake suite maintained and supported by Kitware (kitware.com/cmake)."),"\n",l.createElement(n.p,null,"レジストリからパスを得る\nシステムドライブの容量節約のためVSのインストールパスを変更している場合に必要だった。\nregコマンドでコマンドラインで値を得る。"),"\n",l.createElement(n.blockquote,null,"\n",l.createElement(n.p,null,'reg query "HKEY_LOCAL_MACHINE\\SOFTWARE\\Wow6432Node\\Microsoft\\VisualStudio\\SxS\\VS7" /v "15.0"'),"\n"),"\n",l.createElement(n.p,null,"HKEY_LOCAL_MACHINE\\SOFTWARE\\Wow6432Node\\Microsoft\\VisualStudio\\SxS\\VS7\n15.0    REG_SZ    C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\"),"\n",l.createElement(n.p,null,'cmake呼び出しbat\ncmake_vs2017.bat\n@echo off\nFOR /F "TOKENS=1,2,*" %%A IN (\'reg query "HKEY_LOCAL_MACHINE\\SOFTWARE\\Wow6432Node\\Microsoft\\VisualStudio\\SxS\\VS7" /v "15.0"\') DO IF "%%A"=="15.0" SET VSPATH=%%C\n@echo on'),"\n",l.createElement(n.p,null,'set CMAKE="%VSPATH%\\Common7\\IDE\\CommonExtensions\\Microsoft\\CMake\\CMake\\bin\\cmake.exe"\nset BUILD_DIR="build_vs2017"'),"\n",l.createElement(n.p,null,'if not exist %BUILD_DIR% mkdir %BUILD_DIR%\npushd %BUILD_DIR%\n%CMAKE% -D CMAKE_INSTALL_PREFIX=%VCPKG_DIR%/installed/x64-windows -D OpenCVDir=%VCPKG_DIR%/installed/x64-windows/share/opencv .. -G "Visual Studio 15 2017 Win64"\npopd'),"\n",l.createElement(n.p,null,"使用例"),"\n",l.createElement(n.p,null,"https://github.com/ousttrue/msgpackpp/blob/master/cmake_vs2017.bat"),"\n",l.createElement(n.p,null,"VisualStudio2017内のmsbuild\nC:/Program Files (x86)/Microsoft Visual Studio/2017/Community/MSBuild/15.0/Bin/msbuild.exe\nなので"),"\n",l.createElement(n.blockquote,null,"\n",l.createElement(n.p,null,'reg query "HKEY_LOCAL_MACHINE\\SOFTWARE\\Wow6432Node\\Microsoft\\VisualStudio\\SxS\\VS7" /v "15.0"'),"\n"),"\n",l.createElement(n.p,null,"HKEY_LOCAL_MACHINE\\SOFTWARE\\Wow6432Node\\Microsoft\\VisualStudio\\SxS\\VS7\n15.0    REG_SZ    C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\"),"\n",l.createElement(n.p,null,'と組み合わせると得られる。\n@echo off\nFOR /F "TOKENS=1,2,*" %%A IN (\'reg query "HKEY_LOCAL_MACHINE\\SOFTWARE\\Wow6432Node\\Microsoft\\VisualStudio\\SxS\\VS7" /v "15.0"\') DO IF "%%A"=="15.0" SET VSPATH=%%C\n@echo on'),"\n",l.createElement(n.p,null,'set MSBUILD="%VSPATH%\\MSBuild\\15.0\\Bin\\msbuild.exe"'),"\n",l.createElement(n.p,null,"VisualStudio2015内のmsbuild"),"\n",l.createElement(n.p,null,"https://github.com/Microsoft/HoloToolkit-Unity/blob/master/Assets/HoloToolkit/Build/Editor/BuildDeployTools.cs#L72"),"\n",l.createElement(n.p,null,'レジストリ\nHKLM\\Software\\Microsoft\\MSBuild\\ToolsVersions\\14.0\nから得ることができる。\n@echo off\nFOR /F "TOKENS=1,2,*" %%A IN (\'reg query "HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\MSBuild\\ToolsVersions" /v "14.0"\') DO IF "%%A"=="14.0" SET MSBUILDPATH=%%C\n@echo on'),"\n",l.createElement(n.p,null,'set MSBUILD="%MSBUILDPATH%\\msbuild.exe"'))}n.default=function(e){void 0===e&&(e={});const{wrapper:n}=Object.assign({},(0,t.ah)(),e.components);return n?l.createElement(n,e,l.createElement(i,e)):i(e)}},1151:function(e,n,o){o.d(n,{ah:function(){return i}});var t=o(7294);const l=t.createContext({});function i(e){const n=t.useContext(l);return t.useMemo((()=>"function"==typeof e?e(n):{...n,...e}),[n,e])}}}]);
//# sourceMappingURL=component---content-posts-2017-05-cmake-exe-md-17026a83d0fe4cbe44f1.js.map