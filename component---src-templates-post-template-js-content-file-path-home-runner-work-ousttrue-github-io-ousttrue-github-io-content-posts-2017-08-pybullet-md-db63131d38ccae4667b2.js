"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1110],{6828:function(n,a,s){s.r(a),s.d(a,{default:function(){return r}});var t=s(1151),p=s(7294);function e(n){const a=Object.assign({p:"p",span:"span"},(0,t.ah)(),n.components);return p.createElement(p.Fragment,null,p.createElement(a.p,null,"BulletPhysics の公式 Python バインディングが出てたので使ってみる。"),"\n",p.createElement(a.p,null,"Windows10(64bit) + Python3.6"),"\n",p.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">pip\n> C:\\Python36\\Scripts\\pip.exe install pybullet</code></pre></div>'}}),"\n",p.createElement(a.p,null,"cl.exe not found 的な\nmsvc-14.0 なコンパイラがインストールされているにも関わらず出るなら\nこれ\nかもしれない\nC:\\Python36\\Lib\\distutils_msvccompiler.py を修正すればいけるかも。"),"\n",p.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python">    <span class="token keyword">try</span><span class="token punctuation">:</span>\n        out <span class="token operator">=</span> subprocess<span class="token punctuation">.</span>check_output<span class="token punctuation">(</span>\n            <span class="token string">\'cmd /u /c "{}" {} &amp;&amp; set\'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>vcvarsall<span class="token punctuation">,</span> plat_spec<span class="token punctuation">)</span><span class="token punctuation">,</span>\n            stderr<span class="token operator">=</span>subprocess<span class="token punctuation">.</span>STDOUT<span class="token punctuation">,</span>\n        <span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">\'utf-16le\'</span><span class="token punctuation">,</span> errors<span class="token operator">=</span><span class="token string">\'replace\'</span><span class="token punctuation">)</span>\n        <span class="token comment">#######################################################################</span>\n        <span class="token keyword">if</span> out<span class="token punctuation">.</span>startswith<span class="token punctuation">(</span><span class="token string">"Error in script usage"</span><span class="token punctuation">)</span><span class="token punctuation">:</span>\n            out <span class="token operator">=</span> subprocess<span class="token punctuation">.</span>check_output<span class="token punctuation">(</span>\n                <span class="token string">\'cmd /u /c "{}" {} &amp;&amp; set\'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span><span class="token string">"C:\\\\Program Files (x86)\\\\Microsoft Visual C++ Build Tools\\\\vcbuildtools.bat"</span><span class="token punctuation">,</span> plat_spec<span class="token punctuation">)</span><span class="token punctuation">,</span>\n                stderr<span class="token operator">=</span>subprocess<span class="token punctuation">.</span>STDOUT<span class="token punctuation">,</span>\n            <span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">\'utf-16le\'</span><span class="token punctuation">,</span> errors<span class="token operator">=</span><span class="token string">\'replace\'</span><span class="token punctuation">)</span>\n        <span class="token comment">#######################################################################</span>\n    <span class="token keyword">except</span> subprocess<span class="token punctuation">.</span>CalledProcessError <span class="token keyword">as</span> exc<span class="token punctuation">:</span>\n        log<span class="token punctuation">.</span>error<span class="token punctuation">(</span>exc<span class="token punctuation">.</span>output<span class="token punctuation">)</span>\n        <span class="token keyword">raise</span> DistutilsPlatformError<span class="token punctuation">(</span><span class="token string">"Error executing {}"</span>\n                <span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>exc<span class="token punctuation">.</span>cmd<span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre></div>'}}),"\n",p.createElement(a.p,null,"utf-8 がどうこう的な\nいい加減 Windows は CP932 を使うのやめて欲しいのだけど。"),"\n",p.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">chcp65001</code></pre></div>'}}),"\n",p.createElement(a.p,null,"インストールできた。\n使ってみる"),"\n",p.createElement(a.p,null,"pybullet quickstart guide"),"\n",p.createElement(a.p,null,"日付が 2017 で思ったより新しい。むしろ、記述中くらいか。"),"\n",p.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">hello pybullet\nimport pybullet as p\nphysicsClient = p.connect(p.GUI)#or p.DIRECT for non-graphical version\np.setGravity(0,0,-10)\nplaneId = p.loadURDF("plane.urdf")\ncubeStartPos = [0,0,1]\ncubeStartOrientation = p.getQuaternionFromEuler([0,0,0])\nboxId = p.loadURDF("r2d2.urdf",cubeStartPos, cubeStartOrientation)\np.stepSimulation()\ncubePos, cubeOrn = p.getBasePositionAndOrientation(boxId)\nprint(cubePos,cubeOrn)\np.disconnect()</code></pre></div>'}}),"\n",p.createElement(a.p,null,"plane.urdf はどこにあるのか。\nbullet3 のソースの中にあった。bullet3/build/data/plane.urdf"),"\n",p.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="xml"><pre class="language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="0.0" ?></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>robot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>plane<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>planeLink<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>contact</span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>lateral_friction</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>contact</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>inertial</span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>origin</span> <span class="token attr-name">rpy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0 0 0<span class="token punctuation">"</span></span> <span class="token attr-name">xyz</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0 0 0<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>\n       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mass</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>.0<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>\n       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>inertia</span> <span class="token attr-name">ixx</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">ixy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">ixz</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">iyy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">iyz</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">izz</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>inertial</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>visual</span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>origin</span> <span class="token attr-name">rpy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0 0 0<span class="token punctuation">"</span></span> <span class="token attr-name">xyz</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0 0 0<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>geometry</span><span class="token punctuation">></span></span>\n                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mesh</span> <span class="token attr-name">filename</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>plane.obj<span class="token punctuation">"</span></span> <span class="token attr-name">scale</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1 1 1<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>geometry</span><span class="token punctuation">></span></span>\n       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>material</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>white<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>color</span> <span class="token attr-name">rgba</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1 1 1 1<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>material</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>visual</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>collision</span><span class="token punctuation">></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>origin</span> <span class="token attr-name">rpy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0 0 0<span class="token punctuation">"</span></span> <span class="token attr-name">xyz</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0 0 -5<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>geometry</span><span class="token punctuation">></span></span>\n        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>box</span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>30 30 10<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>geometry</span><span class="token punctuation">></span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>collision</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>link</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>robot</span><span class="token punctuation">></span></span></code></pre></div>'}}),"\n",p.createElement(a.p,null,"なるほどー。\nちょっと hello を改造"),"\n",p.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">import</span> os\nos<span class="token punctuation">.</span>chdir<span class="token punctuation">(</span><span class="token string">\'D:/dev/_python/bullet3/build/data\'</span><span class="token punctuation">)</span> <span class="token comment"># urdfのあるところに移動</span>\n\n<span class="token keyword">import</span> pybullet <span class="token keyword">as</span> p\nphysicsClient <span class="token operator">=</span> p<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>p<span class="token punctuation">.</span>GUI<span class="token punctuation">)</span><span class="token comment">#or p.DIRECT for non-graphical version</span>\np<span class="token punctuation">.</span>setGravity<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">)</span>\nplaneId <span class="token operator">=</span> p<span class="token punctuation">.</span>loadURDF<span class="token punctuation">(</span><span class="token string">"plane.urdf"</span><span class="token punctuation">)</span>\ncubeStartPos <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span>\ncubeStartOrientation <span class="token operator">=</span> p<span class="token punctuation">.</span>getQuaternionFromEuler<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>\nboxId <span class="token operator">=</span> p<span class="token punctuation">.</span>loadURDF<span class="token punctuation">(</span><span class="token string">"r2d2.urdf"</span><span class="token punctuation">,</span>cubeStartPos<span class="token punctuation">,</span> cubeStartOrientation<span class="token punctuation">)</span>\n\n<span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span> <span class="token comment"># とりあえずpythonを抜けないように</span>\n    p<span class="token punctuation">.</span>stepSimulation<span class="token punctuation">(</span><span class="token punctuation">)</span>\n    cubePos<span class="token punctuation">,</span> cubeOrn <span class="token operator">=</span> p<span class="token punctuation">.</span>getBasePositionAndOrientation<span class="token punctuation">(</span>boxId<span class="token punctuation">)</span>\n    <span class="token keyword">print</span><span class="token punctuation">(</span>cubePos<span class="token punctuation">,</span>cubeOrn<span class="token punctuation">)</span>\n\np<span class="token punctuation">.</span>disconnect<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre></div>'}}),"\n",p.createElement(a.p,null,"面白そう。"))}var o=function(n){void 0===n&&(n={});const{wrapper:a}=Object.assign({},(0,t.ah)(),n.components);return a?p.createElement(a,n,p.createElement(e,n)):e(n)},c=s(8678),l=s(1883),u=s(8838);const k={code:n=>{let{children:a,className:s}=n;return s?p.createElement(u.Z,{className:s},a):p.createElement("code",null,a)}};function i(n){let{data:a,children:s}=n;const e=a.mdx.frontmatter;return p.createElement(c.Z,null,p.createElement("h1",null,e.title),p.createElement("div",{className:"tags-index"},e.tags&&e.tags.length>0&&e.tags.map((n=>p.createElement(l.rU,{to:"/tags/"+n+"/",itemProp:"url"},p.createElement("button",null,n))))),p.createElement(t.Zo,{components:k},s))}function r(n){return p.createElement(i,n,p.createElement(o,n))}}}]);
//# sourceMappingURL=component---src-templates-post-template-js-content-file-path-home-runner-work-ousttrue-github-io-ousttrue-github-io-content-posts-2017-08-pybullet-md-db63131d38ccae4667b2.js.map