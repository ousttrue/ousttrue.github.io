<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <title>三次元日誌</title>

    

  <script src="https://ousttrue.github.io/plugins/elasticlunr.min.js" defer></script>
  <script src="https://ousttrue.github.io/search_index.en.js" defer></script>
  <script src="https://ousttrue.github.io/js/search.js" defer></script>

    

     
    <link rel="stylesheet" href="https://ousttrue.github.io/main.css">
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css"
      />
    
  </head>

  <body class="container">
    <a class="site_title" href="https:&#x2F;&#x2F;ousttrue.github.io&#x2F;">
      <div>三次元日誌</div>
    </a>

    <nav class="nav">
      <a class="item" href="/tags/">tags</a>
      <a class="item" href="https://github.com/ousttrue" aria-label="github">
        <i class="fab fa-github fa-lg"></i>
      </a>
      

        
            <form class="navbar-form">
                <input id="userinput" class="form-control is-search" type="search" placeholder="Search docs..."
                    aria-label="Search docs..." autocomplete="off">
                <div id="suggestions" class="shadow bg-white rounded"></div>
            </form>
        
    </nav>

    <main class="main">
<div class="page">
<div class="content">
  <div class="headline">
  
  

  
  <a class="headline_title" href="https:&#x2F;&#x2F;ousttrue.github.io&#x2F;wyam&#x2F;wyam-start&#x2F;"> wyam ことはじめ 
  

  
  </a>

  

  <div>
    <ul class="tags">
      <li class="headline_date">
        <div class="year">2019</div>
        <div class="md">0817</div>
      </li>
      
      


    <li class="tag"><a href="https:&#x2F;&#x2F;ousttrue.github.io&#x2F;tags&#x2F;wyam&#x2F;">wyam</a></li>

    <li class="tag"><a href="https:&#x2F;&#x2F;ousttrue.github.io&#x2F;tags&#x2F;ssg&#x2F;">ssg</a></li>




    </ul>
  </div>
</div>
 <p>ソースの方のリポジトリがハードディスククラッシュで失われて
更新できなくなっていたので、サイトを作りなおし。
<a href="https://wyam.io/">wyam</a>を使ってみる。</p>
<h2 id="insutoru">インストール</h2>
<pre style="background-color:#2b303b;">
<code><span style="color:#c0c5ce;">$ dotnet tool install -g Wyam.Tool
</span></code></pre><h2 id="chu-qi-hua-suru">初期化する</h2>
<pre style="background-color:#2b303b;">
<code><span style="color:#c0c5ce;">$ mkdir site
$ cd site
$ wyam new --recipe blog
</span></code></pre>
<ul>
<li>config.wyam(siteの設定)</li>
<li>input(記事置き場)
<ul>
<li>about.md</li>
<li>posts
<ul>
<li>first-post.md</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="she-ding-huairu">設定ファイル</h3>
<p>config.wyam がそれで、C# を Roslyn で処理するらしい。
おもしろい。</p>
<pre style="background-color:#2b303b;">
<code><span style="color:#c0c5ce;">// config.wyam
#recipe Blog
#theme Phantom

// Customize your settings and add new ones here
Settings[Keys.Host] = &quot;ousttrue.github.io&quot;;
Settings[BlogKeys.Title] = &quot;三次元日誌&quot;;
Settings[BlogKeys.Description] = &quot;programming とか&quot;;

// Add any pipeline customizations here
</span></code></pre>
<p><code>#recipe Blog</code> がパイプライン設定で、 input フォルダの構成と処理を設定している。
設定ファイルに展開したものを記述することもできるみたい。</p>
<h3 id="gitignore">gitignore</h3>
<p>https://wyam.io/docs/advanced/what_to_exclude_from_source_control</p>
<pre style="background-color:#2b303b;">
<code><span style="color:#c0c5ce;">#.gitignore
.vs/
output/
config.wyam.hash
config.wyam.dll
config.wyam.packages.xml
</span></code></pre><h2 id="sheng-cheng-suru">生成する</h2>
<pre style="background-color:#2b303b;">
<code><span style="color:#c0c5ce;">$ wyam
</span></code></pre>
<ul>
<li>output
<ul>
<li>index.html</li>
</ul>
</li>
</ul>
<p><code>$ wyam --watch --preview</code> で更新を監視して livereload できる。</p>
<h3 id="dong-zuo">動作</h3>
<ul>
<li>input/posts/ 配下の markdown が /posts/ 下にhtml化される</li>
<li>input/posts/**/hoge.md が /posts/hoge.html のように階層は無くなる</li>
</ul>
<h2 id="temawobian-etemiru">テーマを変えてみる</h2>
<ul>
<li>https://wyam.io/recipes/blog/themes/</li>
</ul>
<p>コマンドラインに、 <code>--theme THEME_NAME</code> とするか config.wyam に</p>
<pre style="background-color:#2b303b;">
<code><span style="color:#c0c5ce;">// config.wyam
#theme THEME_NAME
</span></code></pre>
<p>とすれば OK。</p>
<h2 id="appveyor-de-github-pages-nizhan-kai">appveyor で GitHub-Pages に展開</h2>
<p>https://wyam.io/docs/deployment/appveyor</p>
<p>CIよくわかってないので難航したが動くようになった。</p>
<p>GitHub-pages のユーザー頁を使ったので、
ソースのリポジトリと、html置き場のリポジトリを分けた。</p>
<p>ソースのリポジトリに AppVeyor を仕掛けて、
push したときにビルドして、html置き場に push する。</p>
<pre style="background-color:#2b303b;">
<code class="language-yaml" data-lang="yaml"><span style="color:#bf616a;">branches</span><span style="color:#c0c5ce;">:
  </span><span style="color:#bf616a;">only</span><span style="color:#c0c5ce;">:
    - </span><span style="color:#bf616a;">master
    
environment</span><span style="color:#c0c5ce;">:
  </span><span style="color:#bf616a;">access_token</span><span style="color:#c0c5ce;">:
    </span><span style="color:#65737e;"># EDIT the encrypted version of your GitHub access token
    # https://www.appveyor.com/docs/deployment/github/
    </span><span style="color:#bf616a;">secure</span><span style="color:#c0c5ce;">: </span><span style="color:#bf616a;">E+wmFkBHvRVLnVcg9mIBXP7iTXKIqJyi/DewA+0SEtkpWmtiNFKKhYzD4bs0nw2L

install</span><span style="color:#c0c5ce;">:
  - </span><span style="color:#a3be8c;">mkdir ..\Wyam
  </span><span style="color:#c0c5ce;">- </span><span style="color:#a3be8c;">mkdir ..\output
  </span><span style="color:#65737e;"># Fetch the latest version of Wyam 
  </span><span style="color:#c0c5ce;">- &quot;</span><span style="color:#a3be8c;">curl -s https://raw.githubusercontent.com/Wyamio/Wyam/master/RELEASE -o ..</span><span style="color:#96b5b4;">\\</span><span style="color:#a3be8c;">Wyam</span><span style="color:#96b5b4;">\\</span><span style="color:#a3be8c;">wyamversion.txt</span><span style="color:#c0c5ce;">&quot;
  - </span><span style="color:#a3be8c;">set /P WYAMVERSION=&lt; ..\Wyam\wyamversion.txt
  </span><span style="color:#c0c5ce;">- </span><span style="color:#a3be8c;">echo %WYAMVERSION%
  </span><span style="color:#65737e;"># Get and unzip the latest version of Wyam
  </span><span style="color:#c0c5ce;">- </span><span style="color:#bf616a;">ps</span><span style="color:#c0c5ce;">: </span><span style="color:#bf616a;">Start-FileDownload &quot;https://github.com/Wyamio/Wyam/releases/download/$env:WYAMVERSION/Wyam-$env:WYAMVERSION.zip&quot; -FileName &quot;..\Wyam\Wyam.zip&quot;
  </span><span style="color:#c0c5ce;">- </span><span style="color:#bf616a;">7z x ..\Wyam\Wyam.zip -o..\Wyam -r

build_script</span><span style="color:#c0c5ce;">:
  - </span><span style="color:#bf616a;">dotnet ..\Wyam\Wyam.dll --output ..\output

on_success</span><span style="color:#c0c5ce;">:
  </span><span style="color:#65737e;"># Switch branches to gh-pages, clean the folder, copy everything in from the Wyam output, and commit/push
  # See http://www.appveyor.com/docs/how-to/git-push for more info
  </span><span style="color:#c0c5ce;">- </span><span style="color:#a3be8c;">git config --global credential.helper store
  </span><span style="color:#65737e;"># EDIT your Git email and name
  </span><span style="color:#c0c5ce;">- </span><span style="color:#bf616a;">git config --global user.email ousttrue@gmail.com
  </span><span style="color:#c0c5ce;">- </span><span style="color:#bf616a;">git config --global user.name ousttrue
  </span><span style="color:#c0c5ce;">- </span><span style="color:#bf616a;">ps</span><span style="color:#c0c5ce;">: </span><span style="color:#a3be8c;">Add-Content &quot;$env:USERPROFILE\.git-credentials&quot; &quot;https://$($env:access_token):x-oauth-basic@github.com`n&quot;
  </span><span style="color:#c0c5ce;">- </span><span style="color:#a3be8c;">git checkout gh-pages
  </span><span style="color:#c0c5ce;">- </span><span style="color:#a3be8c;">git rm -rf .
  </span><span style="color:#c0c5ce;">- </span><span style="color:#a3be8c;">xcopy ..\output . /E
  </span><span style="color:#65737e;"># EDIT your domain name or remove if not using a custom domain
  # - echo wyam.io &gt; CNAME
  # EDIT the origin of your repository - have to reset it here because AppVeyor pulls from SSH, but GitHub won&#39;t accept SSH pushes

  # 送り先(push できるように environment access token をセットしている)
  </span><span style="color:#c0c5ce;">- </span><span style="color:#a3be8c;">git remote set-url origin https://github.com/ousttrue/ousttrue.github.io.git
  </span><span style="color:#65737e;"># 空の gh-pages ブランチに変更を追加
  </span><span style="color:#c0c5ce;">- </span><span style="color:#a3be8c;">git add -A
  </span><span style="color:#c0c5ce;">- </span><span style="color:#a3be8c;">git commit -a -m &quot;Commit from AppVeyor&quot;
  </span><span style="color:#65737e;"># gh-pages ブランチから origin の master に送る(use の GitHubPages を使っているので master ブランチ運用)
  </span><span style="color:#c0c5ce;">- </span><span style="color:#a3be8c;">git push -f origin gh-pages:master
</span></code></pre><h2 id="vscode-debian-ji-suru">vscode で編集する</h2>
<p>watch タスクを作成してバックグランドで <code>input</code> の変更を監視。</p>
<pre style="background-color:#2b303b;">
<code class="language-tasks.json" data-lang="tasks.json"><span style="color:#c0c5ce;">{
    // See https://go.microsoft.com/fwlink/?LinkId=733558
    // for the documentation about the tasks.json format
    &quot;version&quot;: &quot;2.0.0&quot;,
    &quot;tasks&quot;: [
        {
            &quot;label&quot;: &quot;watch&quot;,
            &quot;type&quot;: &quot;shell&quot;,
            &quot;command&quot;: &quot;wyam&quot;,
            &quot;args&quot;: [
                &quot;--watch&quot;, &quot;--preview&quot;,
            ],
            &quot;problemMatcher&quot;: [
            ],
            &quot;isBackground&quot;: true
        },
    ]
}
</span></code></pre>
<p>launch.json を作成して F5 でブラウザを開く。</p>
<pre style="background-color:#2b303b;">
<code class="language-launch.json" data-lang="launch.json"><span style="color:#c0c5ce;">{
    // IntelliSense を使用して利用可能な属性を学べます。
    // 既存の属性の説明をホバーして表示します。
    // 詳細情報は次を確認してください: https://go.microsoft.com/fwlink/?linkid=830387
    &quot;version&quot;: &quot;0.2.0&quot;,
    &quot;configurations&quot;: [
        {
            &quot;type&quot;: &quot;chrome&quot;,
            &quot;request&quot;: &quot;launch&quot;,
            &quot;name&quot;: &quot;Launch Chrome against localhost&quot;,
            &quot;url&quot;: &quot;http://localhost:5080&quot;,
            &quot;webRoot&quot;: &quot;${workspaceFolder}&quot;
        }
    ]
}
</span></code></pre>
<p>自動でリロードがかかるので快適。</p>
<h2 id="can-kao">参考</h2>
<ul>
<li>
<p>https://www.staticgen.com/wyam</p>
<ul>
<li>https://wyam.io/docs/resources/built-with-wyam</li>
</ul>
</li>
<li>
<p><a href="https://qiita.com/MeilCli/items/425a5436aced08ba7062">静的サイトジェネレーターでC#を使いたかったからWyamを試したら最高だった</a></p>
</li>
</ul>
<p>日本語で wyam に言及しているサイトはこれしかなかった。
マイナーでござる。</p>

</div>

<nav class="toc">

<div class="toc_fix">
<ul>
    
        <li>
            <a href="https://ousttrue.github.io/wyam/wyam-start/#insutoru">インストール</a>
            
        </li>
    
        <li>
            <a href="https://ousttrue.github.io/wyam/wyam-start/#chu-qi-hua-suru">初期化する</a>
            
                <ul>
                    
                        <li>
                            <a href="https://ousttrue.github.io/wyam/wyam-start/#she-ding-huairu">設定ファイル</a>
                        </li>
                    
                        <li>
                            <a href="https://ousttrue.github.io/wyam/wyam-start/#gitignore">gitignore</a>
                        </li>
                    
                </ul>
            
        </li>
    
        <li>
            <a href="https://ousttrue.github.io/wyam/wyam-start/#sheng-cheng-suru">生成する</a>
            
                <ul>
                    
                        <li>
                            <a href="https://ousttrue.github.io/wyam/wyam-start/#dong-zuo">動作</a>
                        </li>
                    
                </ul>
            
        </li>
    
        <li>
            <a href="https://ousttrue.github.io/wyam/wyam-start/#temawobian-etemiru">テーマを変えてみる</a>
            
        </li>
    
        <li>
            <a href="https://ousttrue.github.io/wyam/wyam-start/#appveyor-de-github-pages-nizhan-kai">appveyor で GitHub-Pages に展開</a>
            
        </li>
    
        <li>
            <a href="https://ousttrue.github.io/wyam/wyam-start/#vscode-debian-ji-suru">vscode で編集する</a>
            
        </li>
    
        <li>
            <a href="https://ousttrue.github.io/wyam/wyam-start/#can-kao">参考</a>
            
        </li>
    
</ul>
</div>


</nav>
</div>
</main>

    <footer class="footer">Powered by <a href="https://www.getzola.org/">Zola</a> <a href="https://github.com/ousttrue/zola/tree/custom">custom</a></footer>

  </body>
</html>
