"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4660],{8966:function(e,n,l){l.r(n);var t=l(1151),c=l(7294);function r(e){const n=Object.assign({p:"p",code:"code",h1:"h1",ul:"ul",li:"li",a:"a",h2:"h2",pre:"pre",h3:"h3"},(0,t.ah)(),e.components);return c.createElement(c.Fragment,null,c.createElement(n.p,null,"PCを新調したので ",c.createElement(n.code,null,"Windows11")," にアップグレードして wslg を試してみた。"),"\n",c.createElement(n.h1,null,"その前に"),"\n",c.createElement(n.ul,null,"\n",c.createElement(n.li,null,c.createElement(n.a,{href:"https://news.mynavi.jp/article/win11tips-6/"},"Windows 10と同じコンテキストメニューを使う")),"\n"),"\n",c.createElement(n.h1,null,"WSLg"),"\n",c.createElement(n.h2,null,"WSLg とは"),"\n",c.createElement(n.ul,null,"\n",c.createElement(n.li,null,"https://github.com/microsoft/wslg"),"\n",c.createElement(n.li,null,"https://docs.microsoft.com/en-us/windows/wsl/tutorials/gui-apps"),"\n",c.createElement(n.li,null,"(2021.10) https://devblogs.microsoft.com/commandline/a-preview-of-wsl-in-the-microsoft-store-is-now-available/"),"\n",c.createElement(n.li,null,"(2021.04) https://devblogs.microsoft.com/commandline/the-initial-preview-of-gui-app-support-is-now-available-for-the-windows-subsystem-for-linux-2/"),"\n",c.createElement(n.li,null,"(2020) ",c.createElement(n.a,{href:"https://www.phoronix.com/scan.php?page=news_item&px=Microsoft-Writing-Wayland-Comp"},"Microsoft Is Writing Its Own Wayland Compositor As Part Of WSL2 GUI Efforts")),"\n"),"\n",c.createElement(n.p,null,"ビジュアルは ",c.createElement(n.code,null,"Wayland")," 、音声は ",c.createElement(n.code,null,"PulseAudio")," で WSLg 仮想マシンに転送することで、\nLinux の GUI アプリを使えるようにする仕組み。"),"\n",c.createElement(n.h2,null,"Windows11 で試す"),"\n",c.createElement(n.p,null,"Windows11 では、 ",c.createElement(n.code,null,"Windows Insider Program")," にせずとも使える。"),"\n",c.createElement(n.p,null,"~~",c.createElement(n.code,null,"Ubuntu-CommPrev")," をインストールすると ",c.createElement(n.code,null,"wslg")," できる。~~\nWSLで ",c.createElement(n.code,null,"/mnt/wslg")," が存在していれば動作する状態になっている。\nDistribution による特別な設定は不要？"),"\n",c.createElement(n.p,null,c.createElement(n.code,null,"Ubuntu-CommPrev")," の方が ",c.createElement(n.code,null,"GPU driver")," が新しいなど違いあり。"),"\n",c.createElement(n.ul,null,"\n",c.createElement(n.li,null,"\n",c.createElement(n.p,null,"(2021)",c.createElement(n.a,{href:"https://kledgeb.blogspot.com/2021/04/wsl-222-linux-guiwslg.html"},"WSL その222 - Linux GUIアプリを動かすWSLgのアーキテクチャーと仕組み")),"\n"),"\n",c.createElement(n.li,null,"\n",c.createElement(n.p,null,"https://github.com/microsoft/wslg/discussions/78"),"\n"),"\n"),"\n",c.createElement(n.p,null,c.createElement(n.code,null,"glxinfo -B")),"\n",c.createElement(n.h1,null,"X"),"\n",c.createElement(n.p,null,"特に何も設定しなくても ",c.createElement(n.code,null,"xterm")," とか ",c.createElement(n.code,null,"gvim")," などの X11 のアプリは動作する。"),"\n",c.createElement(n.h2,null,"101キーボード"),"\n",c.createElement(n.ul,null,"\n",c.createElement(n.li,null,c.createElement(n.a,{href:"https://www.eisbahn.jp/yoichiro/2021/06/wslg.html"},"Windows 10 HomeでWSLgをさっそく試してみた")),"\n"),"\n",c.createElement(n.p,null,c.createElement(n.code,null,"setxkbmap -layout us")," でなおった。\nなおらないアプリもある。"),"\n",c.createElement(n.h1,null,"PluseAudio"),"\n",c.createElement(n.h2,null,"mpd から pluse audio に出力してみる"),"\n",c.createElement(n.ul,null,"\n",c.createElement(n.li,null,"https://mpcbridge.fourthgate.jp/other/mpd_on_ubuntu"),"\n",c.createElement(n.li,null,"https://github.com/microsoft/wslg/issues/306"),"\n"),"\n",c.createElement(n.pre,null,c.createElement(n.code,null,"echo $PULSE_SERVER\n/mnt/wslg/PulseServer\n")),"\n",c.createElement(n.p,null,"環境変数 ",c.createElement(n.code,null,"$PULSE_SERVER")," にファイルパスが入っているときは ",c.createElement(n.code,null,"unix socket")," を使うという意味。"),"\n",c.createElement(n.p,null,c.createElement(n.code,null,"/etc/mpd.conf")),"\n",c.createElement(n.pre,null,c.createElement(n.code,null,'audio_output {\n       type     "pulse"\n       name     "My PULSE Device"\n       server   "/mnt/wslg/PulseServer" # $PULSE_SERVER\n}\n')),"\n",c.createElement(n.p,null,"という設定になる。",c.createElement(n.code,null,"TCP")," 経由ではなく ",c.createElement(n.code,null,"UNIX SOCKET")," 経由なのに注意。"),"\n",c.createElement(n.pre,null,c.createElement(n.code,null,"load-module module-native-protocol-tcp auth-ip-acl=127.0.0.1\n")),"\n",c.createElement(n.p,null,"は使われない。"),"\n",c.createElement(n.h3,null,"mpd client"),"\n",c.createElement(n.ul,null,"\n",c.createElement(n.li,null,"https://www.microsoft.com/ja-jp/p/mpdctrl/9nv2bbj82brx"),"\n"))}n.default=function(e){void 0===e&&(e={});const{wrapper:n}=Object.assign({},(0,t.ah)(),e.components);return n?c.createElement(n,e,c.createElement(r,e)):r(e)}},1151:function(e,n,l){l.d(n,{ah:function(){return r}});var t=l(7294);const c=t.createContext({});function r(e){const n=t.useContext(c);return t.useMemo((()=>"function"==typeof e?e(n):{...n,...e}),[n,e])}}}]);
//# sourceMappingURL=component---content-posts-2021-fall-wslg-on-windows-11-md-9e6e71e2c5b97af1147c.js.map