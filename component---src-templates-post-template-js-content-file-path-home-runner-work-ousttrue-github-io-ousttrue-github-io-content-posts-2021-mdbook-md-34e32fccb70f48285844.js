"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3801],{9284:function(n,e,t){t.r(e),t.d(e,{default:function(){return m}});var a=t(1151),s=t(7294);function l(n){const e=Object.assign({ul:"ul",li:"li",a:"a",h1:"h1",p:"p",h2:"h2",span:"span"},(0,a.ah)(),n.components);return s.createElement(s.Fragment,null,s.createElement(e.ul,null,"\n",s.createElement(e.li,null,s.createElement(e.a,{href:"https://rust-lang.github.io/mdBook/"},"https://rust-lang.github.io/mdBook/")),"\n",s.createElement(e.li,null,s.createElement(e.a,{href:"https://github.com/rust-lang/mdBook"},"https://github.com/rust-lang/mdBook")),"\n"),"\n",s.createElement(e.h1,null,"作ってみた"),"\n",s.createElement(e.ul,null,"\n",s.createElement(e.li,null,s.createElement(e.a,{href:"https://github.com/ousttrue/cmake_book"},"https://github.com/ousttrue/cmake_book")),"\n"),"\n",s.createElement(e.p,null,"gh-pages"),"\n",s.createElement(e.ul,null,"\n",s.createElement(e.li,null,s.createElement(e.a,{href:"https://ousttrue.github.io/cmake_book/"},"https://ousttrue.github.io/cmake_book/")),"\n"),"\n",s.createElement(e.h1,null,"config.toml"),"\n",s.createElement(e.h2,null,"base_url の設定にはまる"),"\n",s.createElement(e.p,null,"base_url の設定だけ探し回った。\ngh-pages の url が ",s.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">https://ousttrue.github.io/cmake_book/</code>'}})," と root フォルダでは無いので必用。"),"\n",s.createElement(e.p,null,s.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">book.toml</code>'}})),"\n",s.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="toml"><pre class="language-toml"><code class="language-toml"><span class="token punctuation">[</span><span class="token table class-name">output.html</span><span class="token punctuation">]</span>\n<span class="token key property">site-url</span> <span class="token punctuation">=</span> <span class="token string">"https://ousttrue.github.io/cmake_book/"</span></code></pre></div>'}}),"\n",s.createElement(e.h2,null,"github"),"\n",s.createElement(e.p,null,s.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">book.toml</code>'}})),"\n",s.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="toml"><pre class="language-toml"><code class="language-toml"><span class="token punctuation">[</span><span class="token table class-name">output.html</span><span class="token punctuation">]</span>\n<span class="token key property">git-repository-url</span> <span class="token punctuation">=</span> <span class="token string">"https://github.com/rust-lang/mdBook/tree/master/guide"</span>\n<span class="token key property">edit-url-template</span> <span class="token punctuation">=</span> <span class="token string">"https://github.com/rust-lang/mdBook/edit/master/guide/{path}"</span></code></pre></div>'}}),"\n",s.createElement(e.h1,null,"github actions"),"\n",s.createElement(e.p,null,s.createElement(e.a,{href:"https://github.com/marketplace/actions/mdbook-action"},"https://github.com/marketplace/actions/mdbook-action")),"\n",s.createElement(e.p,null,"を参考にしたのだけど、\nちょっとはまった。"),"\n",s.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="yml"><pre class="language-yml"><code class="language-yml"><span class="token key atrule">name</span><span class="token punctuation">:</span> github pages\n<span class="token key atrule">on</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>push<span class="token punctuation">]</span> <span class="token comment"># &lt;= 書き方変わってた(pushしてもjobが起動しない)</span>\n<span class="token key atrule">jobs</span><span class="token punctuation">:</span>\n  <span class="token key atrule">Explore-GitHub-Actions</span><span class="token punctuation">:</span> <span class="token comment"># &lt;= 書き方変わってた？(アクションとして認識されない？)</span>\n    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span><span class="token number">18.04</span>\n    <span class="token key atrule">steps</span><span class="token punctuation">:</span>\n      <span class="token punctuation">-</span> <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v2\n\n      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Setup mdBook\n        <span class="token key atrule">uses</span><span class="token punctuation">:</span> peaceiris/actions<span class="token punctuation">-</span>mdbook@v1\n        <span class="token key atrule">with</span><span class="token punctuation">:</span>\n          <span class="token key atrule">mdbook-version</span><span class="token punctuation">:</span> <span class="token string">"latest"</span>\n\n      <span class="token punctuation">-</span> <span class="token key atrule">run</span><span class="token punctuation">:</span> mdbook build\n\n      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Deploy\n        <span class="token key atrule">uses</span><span class="token punctuation">:</span> peaceiris/actions<span class="token punctuation">-</span>gh<span class="token punctuation">-</span>pages@v3\n        <span class="token comment"># if: github.ref == \'refs/heads/main\' &lt;= あると動かない</span>\n        <span class="token key atrule">with</span><span class="token punctuation">:</span>\n          <span class="token key atrule">github_token</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.GITHUB_TOKEN <span class="token punctuation">}</span><span class="token punctuation">}</span>\n          <span class="token key atrule">publish_dir</span><span class="token punctuation">:</span> ./book</code></pre></div>'}}),"\n",s.createElement(e.p,null,"動かないとき、特に action として認識されていないときは全く手掛かりが無くて難儀した。"),"\n",s.createElement(e.p,null,s.createElement(e.a,{href:"https://docs.github.com/ja/actions/quickstart"},"https://docs.github.com/ja/actions/quickstart")),"\n",s.createElement(e.p,null,"は動いたので、これと違うところを見比べて勘でなおした。\nよくわかっていない。"),"\n",s.createElement(e.h1,null,"mdbook の SUMMARY.md"),"\n",s.createElement(e.p,null,s.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">SUMMARY.md</code>'}})," にページ構成を先に記述して章立てを作ってから中身を記述していくのが面白い。\nこの仕組みが合うものは、 ",s.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">zola</code>'}})," より ",s.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">mdbook</code>'}})," の方がサクサク作れそう。\n",s.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">hugo</code>'}})," とかと違って各ページに ",s.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">frontmatter</code>'}})," が不要なので、\nページを足したり引いたりするする場合はこちらの方が使いやすい。"),"\n",s.createElement(e.p,null,"Scrapbox 上にあるメモを整理するかもしれない。"),"\n",s.createElement(e.p,null,"作った。"),"\n",s.createElement(e.ul,null,"\n",s.createElement(e.li,null,s.createElement(e.a,{href:"https://ousttrue.github.io/cmake_book/"},"cmake_book")),"\n",s.createElement(e.li,null,s.createElement(e.a,{href:"https://ousttrue.github.io/rust_exercise_book/"},"rust練習帳")),"\n"),"\n",s.createElement(e.p,null,"あと、 ",s.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">blender の addon 作成メモ</code>'}})," とか ",s.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">Unity のカスタムエディターメモ</code>'}})," とか作るかも。"),"\n",s.createElement(e.ul,null,"\n",s.createElement(e.li,null,s.createElement(e.a,{href:"https://ousttrue.github.io/bldner_book/"},"blender_book")),"\n",s.createElement(e.li,null,s.createElement(e.a,{href:"https://ousttrue.github.io/unity_book/"},"unity memo")),"\n"),"\n",s.createElement(e.h1,null,"mdbook を gh-pages で初期化する手順"),"\n",s.createElement(e.p,null,"github に repository を作って gh-pages に公開するところまで"),"\n",s.createElement(e.ul,null,"\n",s.createElement(e.li,null,"new repository ",s.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">https://github.com/GITHUB_USER_NAME/MDBOOK_REPOSITORY_NAME</code>'}})),"\n",s.createElement(e.li,null,"git clone GIT_REPOSITORY"),"\n",s.createElement(e.li,null,"cd GIT_REPOSITORY"),"\n",s.createElement(e.li,null,"mdbook init"),"\n"),"\n",s.createElement(e.p,null,s.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">book.toml</code>'}})),"\n",s.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="toml"><pre class="language-toml"><code class="language-toml"><span class="token punctuation">[</span><span class="token table class-name">output.html</span><span class="token punctuation">]</span>\n<span class="token key property">site-url</span> <span class="token punctuation">=</span> <span class="token string">"https://${USER_NAME}.github.io/${REPO_NAME}/"</span>\n<span class="token key property">git-repository-url</span> <span class="token punctuation">=</span> <span class="token string">"https://github.com/${USER_NAME}/${REPO_NAME}/tree/master"</span>\n<span class="token key property">edit-url-template</span> <span class="token punctuation">=</span> <span class="token string">"https://github.com/${USER_NAME}/${REPO_NAME}/edit/master/{path}"</span></code></pre></div>'}}),"\n",s.createElement(e.ul,null,"\n",s.createElement(e.li,null,".github/workflows/gh-pages.yml"),"\n"),"\n",s.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="yaml"><pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">name</span><span class="token punctuation">:</span> github pages\n<span class="token key atrule">on</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>push<span class="token punctuation">]</span>\n<span class="token key atrule">jobs</span><span class="token punctuation">:</span>\n  <span class="token key atrule">Explore-GitHub-Actions</span><span class="token punctuation">:</span>\n    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span><span class="token number">18.04</span>\n    <span class="token key atrule">steps</span><span class="token punctuation">:</span>\n      <span class="token punctuation">-</span> <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v2\n\n      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Setup mdBook\n        <span class="token key atrule">uses</span><span class="token punctuation">:</span> peaceiris/actions<span class="token punctuation">-</span>mdbook@v1\n        <span class="token key atrule">with</span><span class="token punctuation">:</span>\n          <span class="token key atrule">mdbook-version</span><span class="token punctuation">:</span> <span class="token string">"latest"</span>\n\n      <span class="token punctuation">-</span> <span class="token key atrule">run</span><span class="token punctuation">:</span> mdbook build\n\n      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Deploy\n        <span class="token key atrule">uses</span><span class="token punctuation">:</span> peaceiris/actions<span class="token punctuation">-</span>gh<span class="token punctuation">-</span>pages@v3\n        <span class="token key atrule">with</span><span class="token punctuation">:</span>\n          <span class="token key atrule">github_token</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.GITHUB_TOKEN <span class="token punctuation">}</span><span class="token punctuation">}</span>\n          <span class="token key atrule">publish_dir</span><span class="token punctuation">:</span> ./book</code></pre></div>'}}),"\n",s.createElement(e.ul,null,"\n",s.createElement(e.li,null,"git add ."),"\n",s.createElement(e.li,null,"git commit -m init"),"\n",s.createElement(e.li,null,"git push","\n",s.createElement(e.ul,null,"\n",s.createElement(e.li,null,"action が発動し、mdbook がビルドした book フォルダが gh-pages ブランチに push される"),"\n"),"\n"),"\n",s.createElement(e.li,null,"github の settings - pages から gh-pages branch を選んで root を設定する","\n",s.createElement(e.ul,null,"\n",s.createElement(e.li,null,"しばらくすると ",s.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">https://GITHUB_USER_NAME.github.io/MDBOOK_REPOSITORY_NAME/</code>'}})," が有効になる"),"\n"),"\n"),"\n"),"\n",s.createElement(e.p,null,"初回にページが表示されるまで何回か push が要るかも。"),"\n",s.createElement(e.ul,null,"\n",s.createElement(e.li,null,"repo 作る"),"\n",s.createElement(e.li,null,"gh-pages branch に push する"),"\n",s.createElement(e.li,null,"設定で gh-pages を有効にする"),"\n",s.createElement(e.li,null,"再度 push し action を発動させる。この辺でサイトが見れることを確認する"),"\n"),"\n",s.createElement(e.h1,null,"参考"),"\n",s.createElement(e.p,null,s.createElement(e.a,{href:"https://o296.com/e/mdbook_as_blog.html"},"https://o296.com/e/mdbook_as_blog.html")))}var o=function(n){void 0===n&&(n={});const{wrapper:e}=Object.assign({},(0,a.ah)(),n.components);return e?s.createElement(e,n,s.createElement(l,n)):l(n)},p=t(8678),c=t(1883),u=t(8838);const r={code:n=>{let{children:e,className:t}=n;return t?s.createElement(u.Z,{className:t},e):s.createElement("code",null,e)}};function i(n){let{data:e,children:t}=n;const l=e.mdx.frontmatter;return s.createElement(p.Z,null,s.createElement("h1",null,l.title),s.createElement("div",{className:"tags-index"},l.tags&&l.tags.length>0&&l.tags.map((n=>s.createElement(c.rU,{to:"/tags/"+n+"/",itemProp:"url"},s.createElement("button",null,n))))),s.createElement(a.Zo,{components:r},t))}function m(n){return s.createElement(i,n,s.createElement(o,n))}}}]);
//# sourceMappingURL=component---src-templates-post-template-js-content-file-path-home-runner-work-ousttrue-github-io-ousttrue-github-io-content-posts-2021-mdbook-md-34e32fccb70f48285844.js.map