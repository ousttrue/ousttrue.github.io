{"version":3,"file":"component---content-posts-2022-0331-term-md-ff409eac2020de9fb614.js","mappings":"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","sources":["webpack:///./content/posts/2022/0331-term.md","webpack:///./node_modules/@mdx-js/react/lib/index.js"],"sourcesContent":["/*@jsxRuntime classic @jsx React.createElement @jsxFrag React.Fragment*/\nimport {useMDXComponents as _provideComponents} from \"@mdx-js/react\";\nimport React from \"react\";\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    h1: \"h1\",\n    h2: \"h2\",\n    p: \"p\",\n    code: \"code\",\n    h3: \"h3\",\n    ul: \"ul\",\n    li: \"li\",\n    a: \"a\"\n  }, _provideComponents(), props.components);\n  return React.createElement(React.Fragment, null, React.createElement(_components.h1, null, \"term周りの更新\"), \"\\n\", React.createElement(_components.h2, null, \"terminal emulator を選定・・・\"), \"\\n\", React.createElement(_components.p, null, \"主に3つの動作環境、\", React.createElement(_components.code, null, \"Windows\"), \", \", React.createElement(_components.code, null, \"Windows wsl\"), \", \", React.createElement(_components.code, null, \"Ubuntu-20.04\"), \" があってtoolや設定をある程度共通にしたいということで試行錯誤していた。\\n他に \", React.createElement(_components.code, null, \"ssh経由\"), \", \", React.createElement(_components.code, null, \"Windows wslg\"), \" もあるよ。\"), \"\\n\", React.createElement(_components.h3, null, \"wezterm\"), \"\\n\", React.createElement(_components.p, null, React.createElement(_components.code, null, \"wezterm\"), \" が有望であることがわかった\"), \"\\n\", React.createElement(_components.p, null, \"|                 | font fallback | multiplexer | emoji | nerdfnt | graphics escape      |\\n|-----------------|---------------|-------------|-------|---------|----------------------|\\n| wezterm windows | ✅            | ✅          | color | ✅      | conpty issue         |\\n| wezterm wsl     | ✅            | ✅          | color | ✅      | conpty issue         |\\n| wezterm ssh     | ✅            | ✅          | color | ✅      | sixel, kitty, iterm2 |\\n| wezterm linux   | ✅            | ✅          | color | ✅      | sixel, kitty, iterm2 |\"), \"\\n\", React.createElement(_components.p, null, \"conpty を通すときに escape sequence が加工されるとかで、\", React.createElement(_components.code, null, \"sixel\"), \", \", React.createElement(_components.code, null, \"kitty\"), \", \", React.createElement(_components.code, null, \"iterm2\"), \" いずれのプロトコルもうまくうごかなかった。\", React.createElement(_components.code, null, \"iterm2\"), \" は絵はでるのだけど場所がずれるという惜しい挙動・・・。\"), \"\\n\", React.createElement(_components.p, null, \"https://github.com/wez/wezterm/issues/1236\"), \"\\n\", React.createElement(_components.p, null, \"SSH 経由で WSL することで対処する。\"), \"\\n\", React.createElement(_components.h3, null, \"wslg(xtermなど)\"), \"\\n\", React.createElement(_components.p, null, React.createElement(_components.code, null, \"xterm\"), \" は軽快できれいに表示できるので良かった。フォントのフォールバックができないぽいのが弱点。\\n\", React.createElement(_components.code, null, \"urxvt\"), \" は、\", React.createElement(_components.code, null, \"NerdFonts\"), \" がうまくでなかった。\\n\", React.createElement(_components.code, null, \"st\"), \" (simple term) もフォントまわりでつまづきだったかな。\"), \"\\n\", React.createElement(_components.p, null, \"|             | font fallback | multiplexer | emoji | nerdfnt | graphics escape |\\n|-------------|---------------|-------------|-------|---------|-----------------|\\n| xterm wslg  |               |             | mono  | ✅      | sixel           |\\n| mlterm wslg | ✅            | mlterm-con  | color | ✅      | sixel           |\"), \"\\n\", React.createElement(_components.p, null, \"mlterm はフォント周りの設定が強力でよかった。\\n文字セットごとにフォントを個別に指定できるので、フォントを合成せずともばらのままでよい。\"), \"\\n\", React.createElement(_components.p, null, React.createElement(_components.code, null, \"mlterm-con\"), \" という multiplexer があり sixel support があるらしい。\\n自前ビルドが必要そう(apt には含まれていないぽい)。\"), \"\\n\", React.createElement(_components.p, null, \"wslgは、頻繁にキーボードが押しっぱなしになったり不安定なような・・・\\nhttps://github.com/microsoft/wslg/issues/207\\nなおっているけ、リリースに時間がかかりそう？\"), \"\\n\", React.createElement(_components.h3, null, \"libvte\"), \"\\n\", React.createElement(_components.p, null, React.createElement(_components.code, null, \"libvte\"), \" 系のterm。\\n\", React.createElement(_components.code, null, \"gnome-terminal\"), \", \", React.createElement(_components.code, null, \"xfce4-term\"), \" など。\"), \"\\n\", React.createElement(_components.h3, null, \"gpu rendering\"), \"\\n\", React.createElement(_components.p, null, \"GPUレンダリングで \", React.createElement(_components.code, null, \"araclitty\"), \", \", React.createElement(_components.code, null, \"kitty\"), \" そして \", React.createElement(_components.code, null, \"wezterm\"), \" がある。\\n\", React.createElement(_components.code, null, \"wezterm\"), \" が \", React.createElement(_components.code, null, \"Windows\"), \" をサポートしていて、フォントのレンダリング、タブのサポートと総合的に良い。\"), \"\\n\", React.createElement(_components.h3, null, \"その他\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"tabby\"), \"\\n\", React.createElement(_components.li, null, \"RLogin\"), \"\\n\", React.createElement(_components.li, null, \"ConEmu\"), \"\\n\"), \"\\n\", React.createElement(_components.p, null, \"など。\"), \"\\n\", React.createElement(_components.h2, null, \"要件\"), \"\\n\", React.createElement(_components.h3, null, \"日本語、中文、絵文字, NerdFonts を同時にいい感じに表示したい\"), \"\\n\", React.createElement(_components.p, null, \"となるとすべてを含むひとつのフォントより、主になるフォントを設定してそれにグリフが含まれなかったら、他のフォントにフォールバックする挙動をしてもらう方が便利。\\nいくつかのフォントを試してみたのだけど、 \", React.createElement(_components.code, null, \"HackGenNerd Console\"), \" が良かった。\\nで、中文の足りない漢字を \", React.createElement(_components.code, null, \"更紗ゴシックフォント\"), \" にフォールバックするという組み合わせ。\\nがんばって完璧な合成フォントを自作すればいいのだけど、よくわからないので、 複数フォントのフォールバック機能が必要。\"), \"\\n\", React.createElement(_components.p, null, \"かつて w3m で表示が乱れることで苦労した \", React.createElement(_components.code, null, \"ambigous width\"), \" 問題はあまり気にならなくなっていた。\\nなんか、表示は２カラム使うが、データ上は1カラムと見なすような扱いになっていて、\\n\", React.createElement(_components.code, null, \"X\"), \" につづいて \", React.createElement(_components.code, null, \" \"), \" で隙間を開けることで正しく表示できるようだ。\\nNerdFonts や 絵文字 はそのようになっている？\"), \"\\n\", React.createElement(_components.h3, null, \"エスケープシーケンスで画像を表示したい\"), \"\\n\", React.createElement(_components.p, null, React.createElement(_components.code, null, \"sixel\"), \" とか \", React.createElement(_components.code, null, \"kitty\"), \" とか \", React.createElement(_components.code, null, \"iterm2\"), \" による画像表示。\"), \"\\n\", React.createElement(_components.p, null, \"|                        | graphics            |\\n|------------------------|---------------------|\\n| Windows Native(conpty) |                     |\\n| wsltty                 | sixel               |\\n| xterm wslg             | sixel               |\\n| wezterm linux          | sixel, kityt ,iterm2 |\"), \"\\n\", React.createElement(_components.p, null, \"という感じになった。\", React.createElement(_components.code, null, \"wsltty\"), \" は \", React.createElement(_components.code, null, \"conpty\"), \" ではなくて \", React.createElement(_components.code, null, \"winpty\"), \" なので例外的に \", React.createElement(_components.code, null, \"sixel\"), \" が通過できるらしい。\\n動く環境でも \", React.createElement(_components.code, null, \"tmux\"), \" を挟むと動かなくなる。\\n代わりに terminal emulator の方で multiplexer(タブ機能) する必要が発生。\"), \"\\n\", React.createElement(_components.h2, null, \"まとめ\"), \"\\n\", React.createElement(_components.p, null, \"総合力で wezterm が強い。\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"あまり頑張らなくてもフォントがうまく設定できる(cjk, NerdFonts, 絵文字)\"), \"\\n\", React.createElement(_components.li, null, \"multiplexer 機能あり\"), \"\\n\", React.createElement(_components.li, null, \"sixel, kitty, iterm2 プロトコルで画像を表示できる\"), \"\\n\", React.createElement(_components.li, null, \"Windows でも動く\"), \"\\n\"), \"\\n\", React.createElement(_components.h2, null, \"参考\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, React.createElement(_components.a, {\n    href: \"https://zenn.dev/yutakatay/articles/wezterm-intro\"\n  }, \"alacritty+tmuxもいいけど、weztermがすごい件\")), \"\\n\", React.createElement(_components.li, null, React.createElement(_components.a, {\n    href: \"https://wezfurlong.org/wezterm/\"\n  }, \"wezterm\")), \"\\n\", React.createElement(_components.li, null, \"https://sw.kovidgoyal.net/kitty/graphics-protocol/\"), \"\\n\", React.createElement(_components.li, null, \"OSC1337 https://iterm2.com/documentation-images.html\"), \"\\n\", React.createElement(_components.li, null, React.createElement(_components.a, {\n    href: \"https://unrealman.hatenablog.com/entry/tty-mintty-winpty\"\n  }, \"【Git for Windows】tty/mintty/winptyとは何なのか？【Gitbash】\")), \"\\n\"));\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? React.createElement(MDXLayout, props, React.createElement(_createMdxContent, props)) : _createMdxContent(props);\n}\nexport default MDXContent;\n","/**\n * @typedef {import('react').ReactNode} ReactNode\n * @typedef {import('mdx/types.js').MDXComponents} Components\n *\n * @typedef Props\n *   Configuration.\n * @property {Components | MergeComponents | null | undefined} [components]\n *   Mapping of names for JSX components to React components.\n * @property {boolean | null | undefined} [disableParentContext=false]\n *   Turn off outer component context.\n * @property {ReactNode | null | undefined} [children]\n *   Children.\n *\n * @callback MergeComponents\n *   Custom merge function.\n * @param {Components} currentComponents\n *   Current components from the context.\n * @returns {Components}\n *   Merged components.\n */\n\nimport React from 'react'\n\n/**\n * @type {import('react').Context<Components>}\n * @deprecated\n *   This export is marked as a legacy feature.\n *   That means it’s no longer recommended for use as it might be removed\n *   in a future major release.\n *\n *   Please use `useMDXComponents` to get context based components and\n *   `MDXProvider` to set context based components instead.\n */\nexport const MDXContext = React.createContext({})\n\n/**\n * @param {import('react').ComponentType<any>} Component\n * @deprecated\n *   This export is marked as a legacy feature.\n *   That means it’s no longer recommended for use as it might be removed\n *   in a future major release.\n *\n *   Please use `useMDXComponents` to get context based components instead.\n */\nexport function withMDXComponents(Component) {\n  return boundMDXComponent\n\n  /**\n   * @param {Record<string, unknown> & {components?: Components | null | undefined}} props\n   * @returns {JSX.Element}\n   */\n  function boundMDXComponent(props) {\n    const allComponents = useMDXComponents(props.components)\n    return React.createElement(Component, {...props, allComponents})\n  }\n}\n\n/**\n * Get current components from the MDX Context.\n *\n * @param {Components | MergeComponents | null | undefined} [components]\n *   Additional components to use or a function that takes the current\n *   components and filters/merges/changes them.\n * @returns {Components}\n *   Current components.\n */\nexport function useMDXComponents(components) {\n  const contextComponents = React.useContext(MDXContext)\n\n  // Memoize to avoid unnecessary top-level context changes\n  return React.useMemo(() => {\n    // Custom merge via a function prop\n    if (typeof components === 'function') {\n      return components(contextComponents)\n    }\n\n    return {...contextComponents, ...components}\n  }, [contextComponents, components])\n}\n\n/** @type {Components} */\nconst emptyObject = {}\n\n/**\n * Provider for MDX context\n *\n * @param {Props} props\n * @returns {JSX.Element}\n */\nexport function MDXProvider({components, children, disableParentContext}) {\n  /** @type {Components} */\n  let allComponents\n\n  if (disableParentContext) {\n    allComponents =\n      typeof components === 'function'\n        ? components({})\n        : components || emptyObject\n  } else {\n    allComponents = useMDXComponents(components)\n  }\n\n  return React.createElement(\n    MDXContext.Provider,\n    {value: allComponents},\n    children\n  )\n}\n"],"names":["_createMdxContent","props","_components","Object","assign","h1","h2","p","code","h3","ul","li","a","_provideComponents","components","React","href","wrapper","MDXLayout","MDXContext","useMDXComponents","contextComponents"],"sourceRoot":""}