+++
title = "lua による imgui 計画"
date = 2021-07-17
taxonomies.tags = ["lua", "imgui"]
+++

当初 `rust` で `d3d` のレンダラーを作ろうとして作業を進めていた。
ツールに関心があるので `imgui` でサクサク小さいツールを作れるようにしたいのだけど、
`imgui` は c++ 以外だと c++ のやり方を調べて各言語のラッパーのやり方に翻訳するという手間がかかって、
本来の手軽さが減る。かといって、 `c++` でやるのもめんどくさい。
なので、 `rust` 向けの独自のバインディングを作ったりしていたのだけど、 `rust` は関数オーバーロードが無いので
`imgui` のラッパーの使い勝手が `c++` より落ちる。
ここで寄り道して `nvim-0.5` で遊んでいたのだけど、ちょうど `lsp` に加えて `dap` のサポートも始まっていて、
`vscode` の資産を持ってこれる。あと、 `lua` まわりを探索したところ十分な `lsp` と `dap` があるし、 `nvim` で動かすこともできた。さらに、`luarocks` と `luajit` を Windows で運用できることも確認した。
`luajit` の `ffi` で `c++ mangling` された `imgui.dll` からの関数呼び出しができることを確認した。 

ということで、 `luajit` + `ffi` を中心に `imgui` ラッパーを作ってレンダラーというか 3D ツールのインフラとなる、
簡単なレンダラーと `Gizmo` に対応したツールキットを作るという方向になってきた。

`imgui` の `luajit` バインディングの使い勝手が重要なのでこれを最初にやる。

* c++ mangle に対応しつつデフォルト引数をよきにはからう
* `docking` ブランチ
* `lsp` への関数シグニチャ提供

準備として、 `libclang` を使ったバインディング生成ツールの `luajit` 版を作成する。

# X

## rust で途中で進めてきたが・・・

## nvim-0.5 はおもしろい

* vscode の偉大さ

## luarocks の Winodws 運用

* hererocks

## libclang による コード生成
バインディング生成と `lsp` へのアノテーション生成を同時にやる

* EmmyLua Anotation はよいものだ
* luajit FFI はパワフル

## imgui docking ブランチは3Dに限らない、汎用のGUIに使える

* OpenGL

