---
title: "w3mæ”¹é€ "
date: 2020-07-25T23:59:50+09:00
tags: ["w3m"]
---

ä»¥å‰ã«ã‚‚ä½•åº¦ã‹ã‚„ã£ãŸã“ã¨ãŒã‚ã‚‹ã®ã ã‘ã©ç«‹ã¡æ¶ˆãˆã«ãªã£ã¦ã„ãŸã€ [w3m](http://w3m.sourceforge.net/index.ja.html) ã®æ”¹é€ ã‚’è©¦ã¿ã¦ã„ã‚‹ã€‚
w3m ã¯ã‚ã‚Šã¨å¥½ããªãƒ†ã‚­ã‚¹ãƒˆãƒ–ãƒ©ã‚¦ã‚¶ãªã®ã ãŒã€ 2011 å¹´ãã‚‰ã„ã® 0.5.3 ã§é–‹ç™ºãŒçµ‚äº†ã—ã¦ã„ã‚‹æ§˜å­ã€‚

https://github.com/ousttrue/w3m

ã¾ãšã¯ `C++` åŒ–ã—ã¦ã‹ã‚‰ã€HTMLå‡¦ç†ãªã©ã‚’å†å…¥å¯èƒ½ã«ã—ã¦ã‚¿ãƒ–ã”ã¨ã«ã‚¹ãƒ¬ãƒƒãƒ‰ç‹¬ç«‹ã™ã‚‹æ–¹å‘ã‚’ç›®æŒ‡ã™ã€‚
åŒæ™‚ã«ã€ `boehm-GC` ã‚’å°‘ã—ãšã¤ `STL` ã®ã‚³ãƒ³ãƒ†ãƒŠã‚„ `std::string` ã«ç½®ãæ›ãˆã¦æ…£ã‚ŒãŸå½¢å¼ã«å¤‰ãˆã¦ã‚†ãã€‚

ã ã„ã¶æ”¹é€ ã—ã¦ã¡ã‚ƒã‚“ã¨å‹•ã‹ãªããªã£ã¦ããŸã®ã ãŒã€æ§‹é€ ã¯ã‚ã‹ã£ã¦ããŸã€‚
ã“ã“ã‚’ä¹—ã‚Šè¶Šãˆã¦ã€ `boehm-GC` ã‚’æ–‡å­—ã‚³ãƒ¼ãƒ‰å¤‰æ›ç•Œéšˆã«å°ã˜è¾¼ã‚ã‚Œã°ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã—ãªãã§ãã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã€‚

æ”¹é€ ã«ã‚ãŸã£ã¦ãªã‚‹ã¹ãæ©Ÿèƒ½ã‚’ç¶­æŒã—ã‚ˆã†ã¨ã—ã¦ã„ãŸã®ã ã‘ã©ã€ã‚ã‚‹ç¨‹åº¦ã‚ã‚Šãã£ã¦æ©Ÿèƒ½ã‚’è½ã¨ã•ãªã„ã¨æ‰‹ã«è² ãˆãªã„ã¨ã“ã‚ãŒã‚ã‚‹ã€‚

* http + https ä»¥å¤–ã®é€šä¿¡ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã¯è½ã¨ã™ã€‚NNTP ã¨ã‹ Gopher ä½¿ã£ãŸã“ã¨ãªã„ã—ãªãƒ¼
* backend, dump, halfload ç­‰ã®å‡ºåŠ›ã«ä»‹å…¥ã™ã‚‹æ©Ÿèƒ½ã¯è½ã¨ã™ã€‚ã‚³ãƒ¼ãƒ‰ã‚’èª­ã‚€ã®ãŒå¤§å¤‰
* M17N, COLOR, IMAGE ã¯ä½¿ã†
* Mouse ã¯å¾®å¦™ã€‚å‰Šã£ã¦ã‚‚ã‚ˆã„ã‹ã‚‚
* GetText ã‚‚å‰Šã‚‹

é‡ã‚’æ¸›ã‚‰ã™ã€‚æ€ã£ãŸã‚ˆã‚Šã‚³ãƒ¼ãƒ‰ãŒå¤šã‹ã£ãŸã®ã ã€‚

# ä¸‹æº–å‚™

## msys2 ã§ã¨ã‚Šã‚ãˆãšãƒ“ãƒ«ãƒ‰

WSL Ubuntu ã ã¨ãƒ“ãƒ«ãƒ‰ã§ããªã‹ã£ãŸã€‚
ã—ã‹ã—ã€msys2 ãªã‚‰ã‚ã‚Šã¨ç°¡å˜ã«ãƒ“ãƒ«ãƒ‰ã§ãã‚‹ã“ã¨ã‚’ç™ºè¦‹ã€‚

```
$ pacman -S make gcc libgc-devel openssl-devel ncurses-devel
$ x86_64-pc-msys-gcc --version
x86_64-pc-msys-gcc (GCC) 9.3.0
Copyright (C) 2019 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
$ ./configure
```

ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ç’°å¢ƒã®æ–¹ãŒæ˜”ã¨å¤‰ã‚ã£ã¦ã—ã¾ã£ã¦ãƒ“ãƒ«ãƒ‰ã§ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã€‚

ä¿®æ­£æ–¹æ³•ğŸ‘‡

[[CentOS7] emacs24ã«emacs-w3mã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](https://qiita.com/imkitchen/items/02a9df7baaaf434fee66)


`#ifdef` ã®èª¿æ•´

```
// config.h
//#define USE_BINMODE_STREAM 1
//#define USE_EGD
```

```
$ make
$ ./w3m www.google.com // å‹•ã„ãŸ
```

## WSL ã§ GC ãŒã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã™ã‚‹å•é¡Œ

`boehm-GC` ãŒãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã«ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã“ã¨ã§ã€ `make` ä¸­ã®ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ `mktable` ãŒã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã™ã‚‹ã®ãŒåŸå› ã§ãƒ“ãƒ«ãƒ‰ã‚¹ãƒ†ãƒƒãƒ—ãŒé€”ä¸­ã§æ­¢ã¾ã‚‹ã®ãŒåŸå› ã ã£ãŸã€‚ãªã®ã§ã€ãŸã¨ãˆãƒ“ãƒ«ãƒ‰æ¸ˆã¿ã® `w3m` ã‚’ `apt get` ã—ã¦ã‚‚ã€ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚‚åŒã˜åŸå› ã§ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã™ã‚‹ã€‚

ã‚¨ãƒ©ãƒ¼ã€‚

```
Wrong __data_start/_end pair
fish: './build/w3m' terminated by signal SIGABRT (Abort)
```

https://hitkey.nekokan.dyndns.info/diary2004.php#D200424

ã«ã‚ˆã‚‹ã¨ã€stack size ã®åˆ¶é™ãŒåŸå› ã‚‰ã—ã„ã€‚

```
$ ulimit -s
8192
```

WSL ã§ã“ã‚Œã‚’å¤‰ãˆã‚‹ã«ã¯ãƒ»ãƒ»ãƒ»ã€‚

https://github.com/microsoft/WSL/issues/633

ç„¡ç†ã€‚

`WSL2` ãªã‚‰ã§ãã‚‹ï¼Ÿ

```
> wsl -l -v
  NAME            STATE           VERSION
* Ubuntu-20.04    Running         2
```

ã‚„ã£ã¦ã¿ã‚‹ã€‚

```
$ ulimit -s unlimited
> ulimit -s
unlimited
```

ã§ããŸã€‚

```
$ w3m
Wrong __data_start/_end pair
```

ã†ãƒ¼ã‚€ã€‚

```
$ ulimit -s 81920
> ulimit -s
81920
```

å‹•ã„ãŸã€‚
8192KB ã§ã¯è¶³ã‚Šãªãã€ unlimited ã§ã¯å¤šã™ãã‚‹ã‚‰ã—ã„ã€‚ã“ã‚Œã¯ã€é›£ã—ã„ãªã€‚

ã¡ãªã¿ã«ã€ `gdb` ä¸Šãªã‚‰ã‚¹ã‚¿ãƒƒã‚¯å•é¡Œã‚’è§£æ±ºã—ãªãã¦ã‚‚å‹•ã„ãŸã€‚
`gdb` ãŒã‚¹ã‚¿ãƒƒã‚¯ã‚’è¦†ã„éš ã™ã®ã‹ãªï¼Ÿ
é–‹ç™ºã ã‘ãªã‚‰ã§ããªãã‚‚ãªã„ã€‚

## ãƒ“ãƒ«ãƒ‰ã‚·ã‚¹ãƒ†ãƒ 

ã¨ã‚Šã‚ãˆãšæ…£ã‚ŒãŸãƒ„ãƒ¼ãƒ«ã«å¤‰æ›´ã€‚
WSL ä¸Šã® vscode ã§ä½œæ¥­ã—ã¦ã„ã‚‹ã®ã‚‚ã‚ã‚Šã€autotools ã‹ã‚‰ CMake ã«å¤‰æ›´ã€‚
ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã¯å¾Œé€€ã•ã›ã¦ã€æ–°ã—ã‚ã® gcc(c++20) ã§ãƒ“ãƒ«ãƒ‰ã§ãã‚Œã°ã„ã„ã‚„ã€‚
config.h ã‚„ funcname ç³»ã®ã‚³ãƒ¼ãƒ‰ç”Ÿæˆçµæœã¯ã‚³ãƒŸãƒƒãƒˆã—ã¡ã‚ƒã†ã€‚
libwc ãŒ static ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ã‚ã‹ã‚Œã¦ã„ã‚‹ã®ã‚‚ã€ã²ã¨ã¾ã¨ã‚ã«ã—ã¦ã—ã¾ã£ãŸã€‚
ã‚ã¨ã€é©å½“ã«ã‚½ãƒ¼ã‚¹ã‚’ãƒ•ã‚©ãƒ«ãƒ€ã«ç§»å‹•ã™ã‚‹ã€‚

ç”Ÿæˆã‚³ãƒ¼ãƒ‰ä¸€è¦§

| ãƒ•ã‚¡ã‚¤ãƒ«     | ç”Ÿæˆæ–¹æ³•          | å…¥åŠ›           | å‚™è€ƒ                                                   |
|--------------|-------------------|----------------|--------------------------------------------------------|
| config.h     | configure         |                | å„ç¨® #define ãªã©                                      |
| entity.h     | Makefile(mktable) | entity.tab     | ./mktable 100 entity.tab > entity.h                    |
| funcname.tab | Makefile(awk)     | main.c, menu.c |                                                        |
| funcname.c   | Makefile(awk)     | funcname.tab   | sort funcname.tab ï½œ awk -f funcname0.awk > funcname.c |
| funcname1.h  | Makefile(awk)     | funcname.tab   |                                                        |
| funcname2.h  | Makefile(awk)     | funcname.tab   |                                                        |
| functable.c  | Makefile(mktable) | funcname.tab   |                                                        |
| tagtable.c   | Makefile(mktable) | funcname.tab   |                                                        |

## è­¦å‘Šã‹ã‚‰ã‚¨ãƒ©ãƒ¼ã«å¼•ãä¸Šã’

æ”¹é€ ã—ã¦ã„ãã®ã« `C` ã®ç·©ã„å‹åˆ¶é™ãŒå±é™º(ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ãŒé€šã‚‹ã®ã«å‹ãŒä¸ä¸€è‡´ã«ãªã‚Šã‚„ã™ã„)ãªã®ã§ã€
ä»¥ä¸‹ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã€‚

```
-Werror=implicit-function-declaration
-Werror=int-conversion
-Werror=conversion-null
```

ã“ã‚Œã§ã€å‹å®£è¨€ã‚’è£œå¼·ã—ãªãŒã‚‰é€²ã‚ã‚‹ã€‚

# ç¬¬1æ®µéš

* extern "C" ã‚’è¿½åŠ ã—ã¦ C++ åŒ–
* extern "C" ã‚’å–ã‚Šé™¤ã
* typedef struct tag ã‚’å–ã‚Šé™¤ã

ã“ã“ã¾ã§ã‚„ã‚‹ã¨ã€è‡ªç”±ã« `c++` ã®ã‚³ãƒ¼ãƒ‰ã‚’æ··ãœã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚
`std::string`ã€`std::vector`, `std::memory`, `std::function`, `std::string_view`, `template`, `class`, å‰æ–¹å®£è¨€, `auto`, `inline` ä½¿ã„æ”¾é¡Œ ğŸ‘

## c++ åŒ– (extern "C")

æ‰‹æ³•ã¨ã—ã¦ã¯ã€å„ã‚½ãƒ¼ã‚¹ã®æ‹¡å¼µå­ã‚’ `.c` ã‹ã‚‰ `.cpp` ã«å¤‰æ›´ã™ã‚‹ã€‚
`CMakeLists.txt` ã‚’ä¿®æ­£ã€‚
`#include` ã‚’ `extern "C"` ã§å›²ã‚€ã€ã§ `c++` åŒ–ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚

```c++
extern "C" {
#include "xxx.h"
}
```

ãŸã ã€ `cpp` ã§å®šç¾©ã™ã‚‹é–¢æ•°ã®å®£è¨€ãŒ `extern "C"` ã®ä¸­ã«å…¥ã‚‰ãªã„ã¨ãƒªãƒ³ã‚¯ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã®ã§ã€
ãã†ãªã‚‹ã‚ˆã†ã«ã‚½ãƒ¼ã‚¹ã”ã¨ã«ãƒ˜ãƒƒãƒ€ã‚’åˆ†é…ã—ã¦ã‚„ã‚‹ã€‚
`w3m` ã¯é–¢æ•°å®£è¨€ãŒå°‘æ•°ã®ãƒ•ã‚¡ã‚¤ãƒ« `proto.h`, `fm.h` ã¨ã‹ã«é›†ä¸­ã—ã¦ã„ã‚‹ã®ã ãŒã€ã„ã£ã±ã„ã‚ã‚‹ã®ã§é›‘ã«ã‚„ã‚‹ã€‚
ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ãŒé€šã‚Œã°ã‚ˆã„ã€‚

åˆ†é…ã™ã‚‹ã¨ãã«æœªå®šç¾©ã®å‹ã‚’å‰æ–¹å®£è¨€ã§ã™ã¾ã›ãŸã„ã®ã ã‘ã©ã€ `c` ã® `struct` å®šç¾©ãŒã€`struct tag` ã¨ `typedef` ã«åˆ†ã‹ã‚Œã¦ã„ã‚‹ã®ãŒã‚„ã£ã‹ã„ã ã£ãŸã€‚

```c
// C
typedef struct hogeTag
{

} Hoge;
```

```c
void DoHoge(Hoge *p);

// ã«å¯¾ã™ã‚‹å‰æ–¹å®£è¨€ã¯ã€

struct hogeTag;
typedef hogeTag Hoge;
```

ã¨ã‚Šã‚ãˆãšã€ã»ã¨ã‚“ã©å…¨éƒ¨ã® `struct` å®šç¾©ã®å…¥ã£ãŸãƒ˜ãƒƒãƒ€ã‚’ã€ `fm.h` ã‹ã‚‰åˆ†é›¢ã—ã¦ä½œã£ãŸã€‚

## DEFUN

`w3m` ã¯ `DEFUN` ã§ã‚­ãƒ¼ã‚¢ã‚µã‚¤ãƒ³ã§ãã‚‹é–¢æ•°ã‚’å®šç¾©ã—ã¦ã„ã‚‹ã€‚

[readme.func](/w3m/doc-jp/readme.func/)


ä»¥ä¸‹ã®ã‚ˆã†ã«ã€ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãªã©ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’ãƒˆãƒªã‚¬ãƒ¼ã«ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã„ã†ã‚¤ãƒ¡ãƒ¼ã‚¸ã€‚

```
Key
    KeyMap
        DEFUN
    Menu
        DEFUN
MouseAction
    ActionMap
        DEFUN
    Menu
        DEFUN
Alarm
    DEFUN
```

ã‚½ãƒ¼ã‚¹ã¯ã€`main.c` ã¨ `menu.c` ã« `DEFUN` ã¨ãã‚Œã®ä½¿ã†è£œåŠ©é–¢æ•°ãŒã¾ã¨ã‚ã¦å®šç¾©ã•ã‚Œã¦ã„ã¦ã€
ãƒ˜ãƒƒãƒ€ã¯ `proto.h` ã«å…¨éƒ¨å…¥ã‚Œã¨ãªã£ã¦ã„ã‚‹ã€‚

c++ ã§ä¸‹è¨˜ã®ã‚ˆã†ãªãƒ‡ã‚£ã‚¹ãƒ‘ãƒƒãƒãƒ£ã‚’ä½œã£ãŸã€‚

```c++
typedef void (*Command)();
std::unordered_map<std::string, Command> g_commandMap;
```

ä½¿ã„æ¨ã¦ã® python ã§é–¢æ•°ã«ç™»éŒ²ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã—ãŸã€‚

# ç¬¬ï¼’æ®µéš

* PODã˜ã‚ƒãªã„å‹ãŒå‹•ãã‚ˆã†ã«ã™ã‚‹
    * constructor/destructor
* è„±GC
    * ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’STLã«ç½®ãæ›ãˆã‚‹
    * std::string
    * std::shared_ptr
* æ©Ÿèƒ½ã”ã¨ã«ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–
* å†å…¥å¯èƒ½

## GC_MALLOC ã‹ã‚‰ gc_cleanup ç¶™æ‰¿ã¸

boehm-GC ã‚’ `c++` ã®ã‚¯ãƒ©ã‚¹ã§ä½¿ã†æ–¹æ³•ã‚’èª¿ã¹ãŸã€‚

http://www.namikilab.tuat.ac.jp/~sasada/prog/boehmgc.html#i-0-5

`w3m` ã§ã¯ã€ `GC` ã‚’å¤šç”¨ã—ã¦ã„ã‚‹ã€‚

ãŠã‚‚ã«ã€

* struct Str
* ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³
* struct ã® field

ã¨ã„ã†æ„Ÿã˜ã«ã€‚
ã“ã®ã†ã¡ã€ struct ã® field ã§ä½¿ã‚ã‚Œã‚‹ã‚¿ã‚¤ãƒ—ã®å˜ç™ºã® `GC_MALLOC` ã—ã¦ã„ã‚‹å‹ã‚’ `gc_cleanup` ç¶™æ‰¿ã«ã—ã¦ã€ `new` ã§åˆæœŸåŒ–ã™ã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚

* bzero, bcopy, memcpy, sizeof

ç­‰ã§ãƒ¡ãƒ¢ãƒªã‚¯ãƒªã‚¢ã—ã¦ã„ã‚‹ã¨ã“ã‚ã«æ³¨æ„ã™ã‚‹ã€‚
ã“ã‚Œã§ã€ãã®å‹ã¯ `constructor/destructor` ãŒå‹•ãã‚ˆã†ã«ãªã‚Šã€
ãƒ¡ãƒ³ãƒãƒ¼ã« `std::string` ç­‰ã‚’é…ç½®ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚
ã‚ã¨ã§ã€ `gc_cleanup` ã‹ã‚‰ `std::shared_ptr` ã«å¤‰æ›´ã™ã‚‹ã“ã¨ã‚‚è¦–é‡ã«å…¥ã‚Œã¦ã„ã‚‹ã€‚

## GCæ–‡å­—åˆ— Str

ã‚¢ãƒ—ãƒªå…¨ä½“ã§ä½¿ã‚ã‚Œã¦ã„ã¦ä¸€æŒ™ã«ãªãã™ã“ã¨ã¯ã§ããªã„ã®ã ã‘ã©ã€æ§‹é€ ä½“ã®æœ«ç«¯ã®ãƒ¡ãƒ³ãƒãƒ¼ã‹ã‚‰ `std::string` ã«å¤‰ãˆã‚‹ã€‚
ã‚ã¨ã€ãŒã‚“ã°ã£ã¦ `const char *` ã®ç¯„å›²ã‚’å¢—ã‚„ã™ã€‚
`libwc` ã‹ã‚‰ `Str` ã‚’å‰¥ãã†ã¨æ€ã£ã¦ã„ãŸã®ã ãŒã€é€†ã« `libwc` ã« `Str` ã‚’å°ã˜è¾¼ã‚ã‚‹æ–¹å‘ã«è»Œé“ä¿®æ­£ã€‚
`indep.c` ã®ä¾¿åˆ©æ–‡å­—åˆ—é–¢æ•°ã‚‚å°‘ã—ãšã¤å¤‰ãˆã¦ãã€‚

## ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã‚’æ¸›ã‚‰ã™

é–¢æ•°ã®ä¸­ã§ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã„ã‚‹å ´åˆ(CurrentBufferãªã©)ã€ã“ã‚Œã‚’é–¢æ•°ã®å¼•æ•°çµŒç”±ã¨ã‹ã€ã‚¯ãƒ©ã‚¹ã®ãƒ¡ãƒ³ãƒãƒ¼çµŒç”±ã§ã‚‚ã‚‰ã†ã€‚
ãƒªã‚¨ãƒ³ãƒˆãƒ©ãƒ³ãƒˆå¯èƒ½ã«ã™ã‚‹ã€‚

## Streamå‡¦ç†

å¤šåˆ†ã€æœ€é›£é–¢ã® `loadGeneralFile` é–¢æ•°ã€‚700è¡Œãã‚‰ã„ã ã£ãŸã‹ã€‚
goto ã¨ã‹ longjmp ãŒã‚ã£ã¦ã‚ˆãã‚ã‹ã‚‰ãªã‹ã£ãŸã®ã ãŒã€ãªã‚“ã¨ãªãç†è§£ã€‚ 
`http`, `https`, `NNTP ?`, `gopher`, `ftp`, `pipe` ç­‰ã€`http` ã®ãƒ—ãƒ­ã‚­ã‚·ãƒ¼ã‚„ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã€ `www-auth` ãªã©ã‚’ä¸€æ‰‹ã«å‡¦ç†ã—ã¦ã„ã¦å®¹æ˜“ã«æ‰‹ã‚’ä»˜ã‘ã‚‰ã‚Œãªã„ã€‚
ä½•åº¦ã‹æ•´ç†ã—ã‚ˆã†ã¨ã—ã¦æ‚‰ãæ’ƒé€€ã•ã‚ŒãŸã®ã§ã€é›‘ã«ã‚„ã‚‹ã“ã¨ã«ã—ãŸã€‚
æ©Ÿèƒ½ã‚’ `http(https)` ã«çµã£ã¦ãã‚Œä»¥å¤–ã‚’ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã—ã¦ã¨ã«ã‹ãé‡ã‚’æ¸›ã‚‰ã™ã€‚
ãƒ—ãƒ­ã‚­ã‚·ãƒ¼ã¨ã‹ã€ `dump`, `halfload` ãªã©ã®ã‚ˆãçŸ¥ã‚‰ãªã„æ©Ÿèƒ½ã‚‚ã©ã‚“ã©ã‚“å‰Šã‚‹ã€‚
ã¨ã—ã¦ãªã‚“ã¨ã‹æ”¹é€ ã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ããŸã€‚

ã“ã“ã‚’ `HttpClient`, `LocalFile`, `PipeReader` ã‚ãŸã‚Šã«æ•´ç†ã—ãŸã„ã€‚

## ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã«åˆ†å‰²

æ©Ÿèƒ½ã”ã¨ã«ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã«åˆ†å‰²ã™ã‚‹ã€‚

* UI(frontend)
    * Term
        * ä½ãƒ¬ãƒ™ãƒ«æç”»
            * termcap ã®é–¢æ•°ã‚’ç›´æ¥å‘¼ã¶ã€‚curses ã®è‡ªå‰å®Ÿè£…çš„ãª
            * ãƒãƒ«ãƒãƒã‚¤ãƒˆã€ãƒãƒ«ãƒã‚«ãƒ©ãƒ ã®æ–‡å­—åˆ—ã¨å¯†æ¥ã«é–¢é€£ã—ã¦ã„ã¦ libwc ã¨ä¸å¯åˆ†
        * ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰å…¥åŠ›
        * ãƒã‚¦ã‚¹å…¥åŠ›
        * ãƒªã‚µã‚¤ã‚ºã‚¤ãƒ™ãƒ³ãƒˆ
        * SIGNALãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
            * SIGINT => longjmp ã§ã‚­ãƒ£ãƒ³ã‚»ãƒ«å‡¦ç†ã‚’å®Ÿç¾ã—ã¦ã„ã‚‹ã€‚c++ ã®ãƒ‡ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã¨ã‹ã¾ãšãã†
    * é«˜ãƒ¬ãƒ™ãƒ«æç”»
        * Lineã®æ§‹ç¯‰(byte ã”ã¨ã« char ã¨ Lineprop ãŒãƒšã‚¢ã«ãªã‚‹)
    * Tab
    * Buffer
    * Message
    * Menu
    * Keymap
    * LineInput
        * SearchKey
        * History
* IO(transport)
    * IStream
        * union => class polymorphismåŒ–
        * file descriptor
        * FILE*
        * ssl
        * memory
        * Compression
    * LocalCGI

* http
    * HttpSession
        * HttpRequest
        * HttpResponse
    * cookie
    * redirect
    * referer
    * https
    * ftp
    * URL

* HTML
    * HTMLtagproc1
    * HTMLlineproc2body
        * process_form
        * process_form_int
    * form
    * table
    * frame
    * term rendering

* String
    * æ–‡å­—ã‚³ãƒ¼ãƒ‰
    * quote
    * url escape
    * html escape
    * html entity
    * char_util
        * myctype
    * string_view_util
        * strip
    * string_util
        * malloc


# ãƒ¡ãƒ¢

## ãƒªãƒ³ã‚¯ã‚’ãŸã©ã‚‹(followLink)

followA();
loadLink();
loadGeneralFile();

cmd_loadURL();
loadGeneralFile();

cmd_loadURL();
loadGeneralFile();

## æç”»ã™ã‚‹

displayBuffer
redrawBuffer
redrawNLine

## keyå…¥åŠ›
