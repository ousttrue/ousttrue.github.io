"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9957],{8564:function(e,n,t){t.r(n),t.d(n,{default:function(){return i}});var r=t(1151),a=t(7294);function o(e){const n=Object.assign({p:"p",pre:"pre",code:"code"},(0,r.ah)(),e.components);return a.createElement(a.Fragment,null,a.createElement(n.p,null,"前のサイトは gulp を使って typescript で threejs.js していたのだけど、hugo で生成している今サイトでは素の javascript かなぁ。\nes6 の練習を兼ねて。"),"\n",a.createElement(n.p,null,"hugo の md ファイルの中に直書きしてみた"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-html"},'<div id="threejs"></div>\n<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/85/three.min.js"><\/script>\n<script\n  type="text/javascript"\n  src="https://threejs.org/examples/js/controls/OrbitControls.js"\n><\/script>\n<script>\n  function createScene() {\n    var scene = new THREE.Scene();\n\n    var geometry = new THREE.BoxGeometry(1, 1, 1);\n    var material = new THREE.MeshPhongMaterial({ color: 0x0000ff });\n    var box = new THREE.Mesh(geometry, material);\n    box.position.y = 0.5;\n    scene.add(box);\n\n    var light = new THREE.DirectionalLight(0xffffff);\n    light.position.set(1, 1, 1);\n    scene.add(light);\n\n    var planeGeometry = new THREE.PlaneGeometry(10, 10, 10, 10);\n    var planeMaterial = new THREE.MeshBasicMaterial({\n      color: 0x533e25,\n      wireframe: true,\n    });\n    var planeMesh = new THREE.Mesh(planeGeometry, planeMaterial);\n    var toRad = Math.PI / 180;\n    planeMesh.rotation.x = 90 * toRad;\n    scene.add(planeMesh);\n\n    var axis = new THREE.AxisHelper(1000);\n    axis.position.set(0, 0, 0);\n    scene.add(axis);\n\n    return scene;\n  }\n\n  window.addEventListener("DOMContentLoaded", function () {\n    var renderer = new THREE.WebGLRenderer();\n    renderer.setSize(800, 600);\n    document.getElementById("threejs").appendChild(renderer.domElement);\n\n    var scene = createScene();\n\n    var camera = new THREE.PerspectiveCamera(45, 800 / 600, 1, 1000);\n    camera.position.set(2, 3, 5);\n    camera.lookAt({ x: 0, y: 0, z: 0 });\n\n    var controls = new THREE.OrbitControls(camera);\n\n    var render = function () {\n      requestAnimationFrame(render);\n      //cube.rotation.x += 1 * Math.PI / 180;\n      //cube.rotation.y += 1 * Math.PI / 180;\n      //cube.rotation.z += 1 * Math.PI / 180;\n      controls.update();\n      renderer.render(scene, camera);\n    };\n    render();\n  });\n<\/script>\n')),"\n",a.createElement(n.p,null,"動いた。\nなるほど。\nToDo\nちょっと OrbitControls をカスタマイズしたいね。\nメタセコ的なマウスボタンのアサインにしたい"),"\n",a.createElement(n.p,null,"左ドラッグはカメラ操作以外に開けておく\n右ドラッグがカメラ回転\n中ドラッグがカメラ移動\nホイールがカメラドリー"),"\n",a.createElement(n.p,null,"マウスイベントの取得は WebGL エレメントの上にマウスカーソルがあるときだけ"),"\n",a.createElement(n.p,null,"OrbitControls.js が原因でテキストボックスに入力できなくなった問題の解決"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-javascript"},'stage.addEventListener("mouseover", function () {\n  controls.enabled = true;\n  document.body.style.cursor = "pointer";\n});\n\nstage.addEventListener("mouseout", function () {\n  controls.enabled = false;\n  document.body.style.cursor = "default";\n});\n\nfunction createScene() {\n  var scene = new THREE.Scene();\n\n  var geometry = new THREE.BoxGeometry(1, 1, 1);\n  var material = new THREE.MeshPhongMaterial({ color: 0x0000ff });\n  var box = new THREE.Mesh(geometry, material);\n  box.position.y = 0.5;\n  scene.add(box);\n\n  var light = new THREE.DirectionalLight(0xffffff);\n  light.position.set(1, 1, 1);\n  scene.add(light);\n\n  var planeGeometry = new THREE.PlaneGeometry(10, 10, 10, 10);\n  var planeMaterial = new THREE.MeshBasicMaterial({\n    color: 0x533e25,\n    wireframe: true,\n  });\n  var planeMesh = new THREE.Mesh(planeGeometry, planeMaterial);\n  var toRad = Math.PI / 180;\n  planeMesh.rotation.x = 90 * toRad;\n  scene.add(planeMesh);\n\n  var axis = new THREE.AxisHelper(1000);\n  axis.position.set(0, 0, 0);\n  scene.add(axis);\n\n  scene.update = function () {\n    box.rotation.x += 1 * toRad;\n    box.rotation.y += 1 * toRad;\n    box.rotation.z += 1 * toRad;\n  };\n\n  return scene;\n}\n\nfunction onLoaded() {\n  var stage = document.getElementById("threejs");\n\n  var width = stage.clientWidth;\n  var height = stage.clientHeight;\n  console.log(width, height);\n\n  var renderer = new THREE.WebGLRenderer();\n  renderer.setSize(width, height);\n  stage.appendChild(renderer.domElement);\n\n  var scene = createScene();\n\n  var camera = new THREE.PerspectiveCamera(45, width / height, 1, 1000);\n  camera.position.set(2, 3, 5);\n  camera.lookAt({ x: 0, y: 0, z: 0 });\n\n  var controls = new THREE.OrbitControls(camera);\n  controls.enabled = false;\n\n  stage.addEventListener("mouseover", function () {\n    controls.enabled = true;\n    document.body.style.cursor = "pointer";\n  });\n\n  stage.addEventListener("mouseout", function () {\n    controls.enabled = false;\n    document.body.style.cursor = "default";\n  });\n\n  var render = function () {\n    requestAnimationFrame(render);\n    scene.update();\n    controls.update();\n    renderer.render(scene, camera);\n  };\n  render();\n}\n\nwindow.addEventListener("DOMContentLoaded", onLoaded);\n')))}var s=function(e){void 0===e&&(e={});const{wrapper:n}=Object.assign({},(0,r.ah)(),e.components);return n?a.createElement(n,e,a.createElement(o,e)):o(e)};t(8678);function c(e){let{data:n,children:t}=e;return a.createElement(a.Fragment,null,a.createElement("h1",null,n.mdx.frontmatter.title),a.createElement(r.Zo,null,t))}function i(e){return a.createElement(c,e,a.createElement(s,e))}},8678:function(e,n,t){t(7294)},1151:function(e,n,t){t.d(n,{Zo:function(){return c},ah:function(){return o}});var r=t(7294);const a=r.createContext({});function o(e){const n=r.useContext(a);return r.useMemo((()=>"function"==typeof e?e(n):{...n,...e}),[n,e])}const s={};function c({components:e,children:n,disableParentContext:t}){let c;return c=t?"function"==typeof e?e({}):e||s:o(e),r.createElement(a.Provider,{value:c},n)}}}]);
//# sourceMappingURL=component---src-templates-post-template-js-content-file-path-home-runner-work-ousttrue-github-io-ousttrue-github-io-content-posts-2017-06-threejs-md-709770eb19aad23bdc44.js.map