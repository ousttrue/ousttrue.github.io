"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8511],{8328:function(o,e,n){n.r(e),n.d(e,{default:function(){return a}});var r=n(1151),i=n(7294);function t(o){const e=Object.assign({p:"p",pre:"pre",code:"code"},(0,r.ah)(),o.components);return i.createElement(i.Fragment,null,i.createElement(e.p,null,"python によるビルドスクリプト waf を使い始めた\npython によるビルドシステム waf を使ってみた。\n使ってみた感触では vc と gcc 両方でビルドするとかそういうのに向いていそうなので、要するにわしのニーズに合っているように思える。"),"\n",i.createElement(e.pre,null,i.createElement(e.code,null,"https://code.google.com/p/waf/\n前から気にはなっていたのだけれどどうにも取っ付きが悪くて使えるところまでたどりつけていなかったのだが、やっと最初の一歩を踏み出すことができたのでメモを残す。\n早速実践から行く。\n+hello/\n  +hello.cpp\n\nhello.cpp\n#include <iostream>\n\nint main(int argc, char **argv)\n{\n    std::cout << \"hello waf !\" << std::endl;\n    return 0;\n}\n\nというプロジェクトを作ったとする。\nhttps://code.google.com/p/waf/downloads/detail?name=waf-1.7.13\nからwaf(python\nscriptの圧縮されたもの)をダウンロードしてwscriptを記述する。\n+hello/\n  +hello.cpp\n  +waf\n  +wscript\n\nwscriptは以下のようにする。\nAPPNAME='hello'\nVERSION='1.0.0'\n\n\ndef configure(conf):\n    conf.env['MSVC_TARGETS'] = ['x86']\n    conf.load('msvc')\n    conf.env.CXXFLAGS = ['/nologo', '/EHsc']\n\ndef build(bld):\n    bld.program(\n            source='hello.cpp',\n            target=APPNAME\n            )\n\n初回とwscriptのconfigureを修正する度にconfigureする。\n> python waf configure\nSetting top to                           : C:\\work\\_waf\\hello\nSetting out to                           : C:\\work\\_waf\\hello\\build\nChecking for program CL                  : C:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\Bin\\amd64\\CL.exe\nChecking for program CL                  : C:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\Bin\\CL.exe\nChecking for program CL                  : C:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\Bin\\x86_IA64\\CL.exe\nChecking for program CL                  : C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\bin\\CL.exe\nChecking for program CL                  : C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\bin\\CL.exe\nChecking for program CL                  : C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\bin\\CL.exe\nChecking for program CL                  : C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\bin\\CL.exe\nChecking for program CL                  : c:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\Bin\\CL.exe\nChecking for program CL                  : C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\bin\\CL.exe\nChecking for program CL                  : C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\bin\\CL.exe\nChecking for program CL                  : C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\bin\\CL.exe\nChecking for program CL                  : C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\bin\\CL.exe\nChecking for program CL                  : C:\\Program Files (x86)\\Microsoft Visual Studio 9.0\\VC\\BIN\\CL.exe\nChecking for program CL                  : C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\bin\\CL.exe\nChecking for program CL                  : C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\bin\\CL.exe\nChecking for program CL                  : C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\bin\\CL.exe\nChecking for program CL                  : C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\bin\\CL.exe\nChecking for program CL                  : c:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\BIN\\CL.exe\nChecking for program CL                  : C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\bin\\CL.exe\nChecking for program CL                  : C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\bin\\CL.exe\nChecking for program CL                  : C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\bin\\CL.exe\nChecking for program CL                  : C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\bin\\CL.exe\nChecking for program CL                  : C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\bin\\CL.exe\nChecking for program CL                  : c:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\BIN\\CL.exe\nChecking for program CL                  : C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\bin\\CL.exe\nChecking for program CL                  : c:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\BIN\\CL.exe\nChecking for program LINK                : c:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\BIN\\LINK.exe\nChecking for program LIB                 : c:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\BIN\\LIB.exe\nChecking for program MT                  : C:\\Program Files (x86)\\Microsoft SDKs\\Windows\\v7.0A\\bin\\MT.exe\nChecking for program RC                  : C:\\Program Files (x86)\\Microsoft SDKs\\Windows\\v7.0A\\bin\\RC.exe\n'configure' finished successfully (6.219s)\n\nビルドする。\n> python waf build\nWaf: Entering directory `C:\\work\\_waf\\hello\\build'\n[1/2] cxx: hello.cpp -> build\\hello.cpp.1.o\nhello.cpp\n[2/2] cxxprogram: build\\hello.cpp.1.o -> build\\hello.exe build\\hello.exe.manifest\nWaf: Leaving directory `C:\\work\\_waf\\hello\\build'\n'build' finished successfully (1.138s)\n\n実行してみる。\n> .\\build\\hello.exe\nhello waf !\n\nということでvcでexeをビルドするスクリプトができた。\n何もパスの設定をしなくてもvcのコンパイラを勝手に探してビルドできるのは意外だった。\nとはいえ、これだけではwafの嬉しさは発揮されないのでこれからwscriptを拡張していく。\n次回、debugとrelease, 32bitビルドと64bitビルドの管理について書く予定。\n")))}var l=function(o){void 0===o&&(o={});const{wrapper:e}=Object.assign({},(0,r.ah)(),o.components);return e?i.createElement(e,o,i.createElement(t,o)):t(o)};n(8678);function c(o){let{data:e,children:n}=o;return i.createElement(i.Fragment,null,i.createElement("h1",null,e.mdx.frontmatter.title),i.createElement(r.Zo,null,n))}function a(o){return i.createElement(c,o,i.createElement(l,o))}},8678:function(o,e,n){n(7294)},1151:function(o,e,n){n.d(e,{Zo:function(){return c},ah:function(){return t}});var r=n(7294);const i=r.createContext({});function t(o){const e=r.useContext(i);return r.useMemo((()=>"function"==typeof o?o(e):{...e,...o}),[e,o])}const l={};function c({components:o,children:e,disableParentContext:n}){let c;return c=n?"function"==typeof o?o({}):o||l:t(o),r.createElement(i.Provider,{value:c},e)}}}]);
//# sourceMappingURL=component---src-templates-post-template-js-content-file-path-home-runner-work-ousttrue-github-io-ousttrue-github-io-content-posts-2013-10-29-waf-md-875698d749f1aac033ee.js.map