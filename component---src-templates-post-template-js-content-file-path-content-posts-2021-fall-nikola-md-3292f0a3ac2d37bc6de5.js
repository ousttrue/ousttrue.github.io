"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1547],{4180:function(n,t,e){e.r(t),e.d(t,{default:function(){return h}});var l=e(1151),a=e(7294);function s(n){const t=Object.assign({p:"p",span:"span"},(0,l.ah)(),n.components);return a.createElement(a.Fragment,null,a.createElement(t.p,null,"また生成システムを変えてみる。"),"\n",a.createElement(t.p,null,"https://getnikola.com/"),"\n",a.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">\n# init\n\n\n> pip install "Nikola[extras]"\n> nikola init .\n\n\nhttps://github.com/github/gitignore/blob/master/community/Python/Nikola.gitignore\n.gitignore\n# nikola\n.doit.db*\n*.pyc\n/cache/\n/output/\n\n\n`conf.py`\npy\n# とりあえず\nPOSTS = (\n    ("content/*.rst", "posts", "post.tmpl"),\n    ("content/*.md", "posts", "post.tmpl"),\n    ("content/*.txt", "posts", "post.tmpl"),\n    ("content/*.html", "posts", "post.tmpl"),\n)\n\n\n\n> nikola auto --browser\n\n\nなんとなくプレビューできた。\nええやん。\n\n# zola から記事移植\n\n`POSTS` のパス調整でもうできているのだけど、 `frontmatter` の非互換がある。\nそれを調べる。\n\nhttps://getnikola.com/handbook.html#metadata-fields\n\n* `taxonomies.tags` を `tags` に書き換える\n\n小文字強制\npy\nMETADATA_VALUE_MAPPING = {\n    "toml": {\n        "tags": lambda ls: [x.lower() for x in ls]\n     }\n}\n\n# github action で gh-pages\n\n`.github/workflows/nikola.yml`\n\nこんなもんかな。\n\nyml\nname: Nikola\n\non:\n  push:\n    branches:\n      - nikola\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n    env:\n      ACTIONS_ALLOW_UNSECURE_COMMANDS: true\n    steps:\n      - uses: actions/checkout@v1\n      - run: pip install "Nikola[extras]"\n      - name: build\n        run: nikola build\n      - name: Deploy\n        uses: peaceiris/actions-gh-pages@v3\n        with:\n          github_token: ${{ secrets.GITHUB_TOKEN }}\n          publish_dir: ./output\n\n\n\n## 動作\n\nhttps://getnikola.com/internals.html\n\n## yapsy\n\nhttps://getnikola.com/extending.html\n\n`nikola/plugin_categories.py`\n\nhttp://yapsy.sourceforge.net/\n\n## build\n\n[DoIt](https://pydoit.org/) で駆動されるらしい。\n\nnikola は DoIt の task を生成する。\n\n* https://schettino72.wordpress.com/2008/04/14/doit-a-build-tool-tale/\n* [タスクランナー Doit を使ってみよう](https://qiita.com/iisaka51/items/052ffbd9ab3b12504228)\n\n## Theme\n\n* https://getnikola.com/creating-a-theme.html\n* https://getnikola.com/theming.html\n* [Nikola を windows でやるぞ 2](https://iuk.hateblo.jp/entry/2016/10/28/040908)\n\n\n* `themes/custom` フォルダを作る\n* `conf.py` の `THEME = "custom"`\n\n最低限\n\n| path                   | url | 必須   |                                                             |\n|------------------------|-----|--------|-------------------------------------------------------------|\n| bundles                |     | 必須   | 空ファイルでもOk。copy from nikola/data/themes/base/bundles |\n| assets                 |     | option | copy from nikola/data/themes/base/assets                    |\n| templates/index.tmpl   | /   | 必須   | top page                                                    |\n| templates/post.tmpl    |     | 必須   | 各記事                                                      |\n| templates/page.tmpl    |     | 必須   | 各記事                                                      |\n| templates/list.tmpl    |     | 必須   | archive.html                                                |\n| templates/archive.tmpl |     | 必須   | {YEARE}/ archive.html から 年別 リンクをたどったところ      |\n| templates/tags.tmpl    |     | 必須   | categories/index.html                                       |\n| templates/tag.tmpl     |     | 必須   | categories/{TAG_NAME}/index.html                            |\n| templates/gallery.tmpl |     | 必須   |                                                             |\n| templates/listing.tmpl |     | 必須   |                                                             |\n| THEME_NAME.theme       |     | option | Theme meta files                                            |\n| templates/base.tmpl    |     | option | すべての tmpl が継承することで一貫した見た目にする          |\n\n### bundles and assets\n\n`lib/python3.9/site-packages/nikola/data/themes/base` からコピーするとよさそう。\n\n### base.tmpl\n\nhtml\n&lt;html>\n\n&lt;body>\n    &lt;h1 id="brand">\n        &lt;a href="{{ _link(\'root\', None, lang) }}" title="{{ blog_title|e }}" rel="home">\n            &lt;span id="blog-title">{{ blog_title|e }}&lt;/span>\n        &lt;/a>\n    &lt;/h1>\n    &lt;hr>\n    &lt;main id="content">\n        {% block content %}{% endblock %}\n    &lt;/main>\n&lt;/body>\n\n&lt;/html>\n\n\n### index.tmpl\n\nhtml\n{% extends \'base.tmpl\' %}\n\n{% block content %}\n{% if prevlink %}\n&lt;a href="{{ prevlink }}" rel="prev">prev&lt;/a>\n{% endif %}\n\n{% for post in posts %}\n&lt;h1 class="p-name entry-title">\n    &lt;a href="{{ post.permalink() }}" class="u-url">{{ post.title()|e }}&lt;/a>\n&lt;/h1>\n{% endfor %}\n\n{% if nextlink %}\n&lt;a href="{{ nextlink }}" rel="next">next&lt;/a>\n{% endif %}\n{% endblock %}\n\n\n### post.tmpl\n\nhtml\n{% extends \'base.tmpl\' %}\n\n{% block content %}\n&lt;h1 class="p-name entry-title" itemprop="headline name">\n    &lt;a href="{{ post.permalink() }}" class="u-url">{{ post.title()|e}}&lt;/a>\n&lt;/h1>\n{{ post.text() }}\n{% endblock %}\n\n\n### THEME_NAME.theme\n\n\n[Theme]\nengine = jinja\n\n\n## vscode\n\n`settings.json`\n\njson\n    "files.associations": {\n        "*.tmpl": "html",\n    },\n\n\n## ToDo\n\n* Theme 調整\n* TOC\n* syntax highlight</code></pre></div>'}}))}var o=function(n){void 0===n&&(n={});const{wrapper:t}=Object.assign({},(0,l.ah)(),n.components);return t?a.createElement(t,n,a.createElement(s,n)):s(n)},i=e(8678),p=e(4160),m=e(8736);const r={code:n=>{let{children:t,className:e}=n;return e?a.createElement(m.Z,{className:e},t):a.createElement("code",null,t)}};function c(n){let{data:t,children:e}=n;const s=t.mdx.frontmatter;return a.createElement(i.Z,null,a.createElement("h1",null,s.title),a.createElement("div",{className:"tags-index"},s.tags&&s.tags.length>0&&s.tags.map((n=>a.createElement(p.rU,{to:"/tags/"+n+"/",itemProp:"url"},a.createElement("button",null,n))))),a.createElement(l.Zo,{components:r},e))}function h(n){return a.createElement(c,n,a.createElement(o,n))}}}]);
//# sourceMappingURL=component---src-templates-post-template-js-content-file-path-content-posts-2021-fall-nikola-md-3292f0a3ac2d37bc6de5.js.map