"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2521],{2388:function(e,n,l){l.r(n);var t=l(1151),c=l(7294);function u(e){const n=Object.assign({h1:"h1",ul:"ul",li:"li",h2:"h2",p:"p",code:"code",a:"a"},(0,t.ah)(),e.components);return c.createElement(c.Fragment,null,c.createElement(n.h1,null,"python typing"),"\n",c.createElement(n.ul,null,"\n",c.createElement(n.li,null,"https://docs.python.org/3/library/typing.html"),"\n"),"\n",c.createElement(n.h2,null,"生成する"),"\n",c.createElement(n.p,null,"既存のライブラリ、特に拡張ライブラリに型ヒントを付与したいことがある。\nこれらは、元が ",c.createElement(n.code,null,"c/c++")," なのでその型情報から ",c.createElement(n.code,null,"pyi")," を生成してやる。\n型情報は、 ",c.createElement(n.code,null,"clang.cindex")," を使って ",c.createElement(n.code,null,"c/c++")," のヘッダーから得るとよい。"),"\n",c.createElement(n.h2,null,"vscode + pylance(pyright)"),"\n",c.createElement(n.p,null,"プロジェクトローカルでいい場合は、 ",c.createElement(n.code,null,"${workspaceFolder}/typings")," に配置すると処理してくれる。\n",c.createElement(n.code,null,"clang.cindex")," に ",c.createElement(n.code,null,"enum")," の情報を追加してみた。"),"\n",c.createElement(n.h2,null,"ctypes"),"\n",c.createElement(n.ul,null,"\n",c.createElement(n.li,null,"clang.cindex"),"\n"),"\n",c.createElement(n.p,null,"もとのモジュールと構造が同じ ",c.createElement(n.code,null,"pyi")," を用意してやる。\n",c.createElement(n.code,null,"ctypes")," の ",c.createElement(n.code,null,"Structure")," や関数ポインタに直接型ヒントを付与うまい方法は無さそう？"),"\n",c.createElement(n.h2,null,"拡張モジュール"),"\n",c.createElement(n.ul,null,"\n",c.createElement(n.li,null,"bpy"),"\n",c.createElement(n.li,null,"imgui のバインディング"),"\n"),"\n",c.createElement(n.p,null,"拡張モジュールに型ヒントを埋め込む方法がまだ無いっぽい。\n埋め込む方法ができれば、 ",c.createElement(n.code,null,"cython")," や ",c.createElement(n.code,null,"pybind")," で作った拡張モジュールには自動で型ヒントが付きそうな気がするのだが。"),"\n",c.createElement(n.h2,null,"imgui で作ってみた。"),"\n",c.createElement(n.ul,null,"\n",c.createElement(n.li,null,"\n",c.createElement(n.p,null,"https://github.com/ousttrue/cydeer"),"\n"),"\n",c.createElement(n.li,null,"\n",c.createElement(n.p,null,c.createElement(n.a,{href:"https://blog.ymyzk.com/2018/09/creating-packages-using-pep-561/"},"PEP 561 に準拠した型ヒントを含むパッケージの作り方")),"\n"),"\n"),"\n",c.createElement(n.p,null,"を参考に作ってみた。"))}n.default=function(e){void 0===e&&(e={});const{wrapper:n}=Object.assign({},(0,t.ah)(),e.components);return n?c.createElement(n,e,c.createElement(u,e)):u(e)}},1151:function(e,n,l){l.d(n,{ah:function(){return u}});var t=l(7294);const c=t.createContext({});function u(e){const n=t.useContext(c);return t.useMemo((()=>"function"==typeof e?e(n):{...n,...e}),[n,e])}}}]);
//# sourceMappingURL=component---content-posts-2021-winter-python-typing-stub-md-4d6817e06aaae9dcfe84.js.map