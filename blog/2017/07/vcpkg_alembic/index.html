<!DOCTYPE html>
<html lang="en" class="astro-BVZIHDZO">
	<head>
		<!-- Use Google Fonts, if you don't wanna prefer a self-hosted version --><!-- <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;500;600;700&display=swap" rel="stylesheet"> --><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>vcpkgのAlembicパッケージ(USE_HDF5)を作ってみる</title>
<meta name="title" content="vcpkgのAlembicパッケージ(USE_HDF5)を作ってみる">


<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="shortcut icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-config" content="/browserconfig.xml">
<meta name="theme-color" content="#ffffff">

<!-- Open Graph Tags (Facebook) -->
<meta property="og:type" content="website">
<meta property="og:title" content="vcpkgのAlembicパッケージ(USE_HDF5)を作ってみる">




<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:title" content="vcpkgのAlembicパッケージ(USE_HDF5)を作ってみる">





<script>
  const theme = (() => {
    if (typeof localStorage !== "undefined" && localStorage.getItem("theme")) {
      return localStorage.getItem("theme");
    }
    if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
      return "dark";
    }
    return "light";
  })();

  if (theme === "light") {
    document.documentElement.classList.remove("dark");
  } else {
    document.documentElement.classList.add("dark");
  }
</script>
		
	<link rel="stylesheet" href="/_astro/about.6111bb3a.css" />
<link rel="stylesheet" href="/_astro/about.657f8f57.css" />
<link rel="stylesheet" href="/_astro/about.ee60a110.css" />
<link rel="stylesheet" href="/_astro/about.dcb84f3d.css" /><script type="module" src="/_astro/hoisted.e6960f2c.js"></script></head>

	<body class="astro-BVZIHDZO">
		<header class="header astro-3EF6KSR2">
    <div class="header__logo astro-3EF6KSR2">
        <a href="/" class="avatar astro-3EF6KSR2">
            <img class="header__logo-img astro-3EF6KSR2" src="/assets/logo.svg" alt="Astro logo">
        </a>
    </div>
    <div class="header__meta flex-1 astro-3EF6KSR2">
        <h3 class="header__title dark:text-theme-dark-secondary astro-3EF6KSR2">
            <a href="" class="astro-3EF6KSR2">三次元日誌(astro)</a>
        </h3>
        <div class="header__meta-more flex astro-3EF6KSR2">
            <p class="header__desc astro-3EF6KSR2">
                Crisp, minimal, personal blog theme for Astro
            </p>
            <nav class="header__nav flex astro-3EF6KSR2">
                <ul class="header__ref-list astro-3EF6KSR2">
                    <li class="astro-3EF6KSR2">
                        <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var r=(i,c,n)=>{let s=async()=>{await(await i())()},t=new IntersectionObserver(e=>{for(let o of e)if(o.isIntersecting){t.disconnect(),s();break}});for(let e of n.children)t.observe(e)};(self.Astro||(self.Astro={})).visible=r;window.dispatchEvent(new Event("astro:visible"));})();;(()=>{var d;{let p={0:t=>u(t),1:t=>l(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(l(t)),5:t=>new Set(l(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t)},h=t=>{let[e,n]=t;return e in p?p[e](n):void 0},l=t=>t.map(h),u=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([e,n])=>[e,h(n)]));customElements.get("astro-island")||customElements.define("astro-island",(d=class extends HTMLElement{constructor(){super(...arguments);this.hydrate=async()=>{var i;if(!this.hydrator||!this.isConnected)return;let e=(i=this.parentElement)==null?void 0:i.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let n=this.querySelectorAll("astro-slot"),o={},a=this.querySelectorAll("template[data-astro-template]");for(let r of a){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(o[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(let r of n){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(o[r.getAttribute("name")||"default"]=r.innerHTML)}let c;try{c=this.hasAttribute("props")?u(JSON.parse(this.getAttribute("props"))):{}}catch(r){let s=this.getAttribute("component-url")||"<unknown>",y=this.getAttribute("component-export");throw y&&(s+=` (export ${y})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),r),r}await this.hydrator(this)(this.Component,c,o,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))}}connectedCallback(){!this.hasAttribute("await-children")||this.firstChild?this.childrenConnectedCallback():new MutationObserver((e,n)=>{n.disconnect(),setTimeout(()=>this.childrenConnectedCallback(),0)}).observe(this,{childList:!0})}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}start(){let e=JSON.parse(this.getAttribute("opts")),n=this.getAttribute("client");if(Astro[n]===void 0){window.addEventListener(`astro:${n}`,()=>this.start(),{once:!0});return}Astro[n](async()=>{let o=this.getAttribute("renderer-url"),[a,{default:c}]=await Promise.all([import(this.getAttribute("component-url")),o?import(o):()=>()=>{}]),i=this.getAttribute("component-export")||"default";if(!i.includes("."))this.Component=a[i];else{this.Component=a;for(let r of i.split("."))this.Component=this.Component[r]}return this.hydrator=c,this.hydrate},e,this)}attributeChangedCallback(){this.hydrate()}},d.observedAttributes=["props"],d))}})();</script><astro-island uid="2iKzVC" component-url="/_astro/SearchBtn.984510f3.js" component-export="default" renderer-url="/_astro/client.cb726945.js" props="{&quot;class&quot;:[0,&quot;astro-3EF6KSR2&quot;]}" ssr="" client="visible" opts="{&quot;name&quot;:&quot;SearchBtn&quot;,&quot;value&quot;:true}" await-children=""><button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"> <path fill-rule="evenodd" clip-rule="evenodd" d="M16.2071 4.89344C19.0923 7.77862 19.3131 12.3193 16.8693 15.4578C16.8846 15.4713 16.8996 15.4854 16.9143 15.5L21.1569 19.7427C21.5474 20.1332 21.5474 20.7664 21.1569 21.1569C20.7664 21.5474 20.1332 21.5474 19.7427 21.1569L15.5 16.9143C15.4854 16.8996 15.4713 16.8846 15.4578 16.8693C12.3193 19.3131 7.77862 19.0923 4.89344 16.2071C1.76924 13.083 1.76924 8.01763 4.89344 4.89344C8.01763 1.76924 13.083 1.76924 16.2071 4.89344ZM14.7929 14.7929C17.1361 12.4498 17.1361 8.6508 14.7929 6.30765C12.4498 3.96451 8.6508 3.96451 6.30765 6.30765C3.96451 8.6508 3.96451 12.4498 6.30765 14.7929C8.6508 17.1361 12.4498 17.1361 14.7929 14.7929Z" fill="currentColor"></path></svg></button></astro-island>
                    </li>
                    <li class="astro-3EF6KSR2">
                        <a href="https://github.com/one-aalam/astro-ink" title="三次元日誌(astro)'s Github URL'" class="astro-3EF6KSR2">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    
                                <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22" class="astro-3EF6KSR2"></path>
                            
</svg>
                        </a>
                    </li>
                    <li class="astro-3EF6KSR2">
                        <a href="/rss.xml" title="RSS" class="astro-3EF6KSR2">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    
                                <path d="M4 11a9 9 0 0 1 9 9" class="astro-3EF6KSR2"></path>
                                <path d="M4 4a16 16 0 0 1 16 16" class="astro-3EF6KSR2"></path>
                                <circle cx="5" cy="19" r="1" class="astro-3EF6KSR2"></circle>
                            
</svg>
                        </a>
                    </li>
                    <li class="astro-3EF6KSR2">
                        <astro-island uid="h8S6z" component-url="/_astro/ModeSwitcherBtn.0ddc5d6d.js" component-export="default" renderer-url="/_astro/client.cb726945.js" props="{&quot;class&quot;:[0,&quot;astro-3EF6KSR2&quot;]}" ssr="" client="visible" opts="{&quot;name&quot;:&quot;ModeSwitcherBtn&quot;,&quot;value&quot;:true}" await-children=""><button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle> <line x1="12" y1="1" x2="12" y2="3"></line> <line x1="12" y1="21" x2="12" y2="23"></line> <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line> <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line> <line x1="1" y1="12" x2="3" y2="12"></line> <line x1="21" y1="12" x2="23" y2="12"></line> <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line> <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg></button></astro-island>
                    </li>
                </ul>
            </nav>
        </div>
    </div>
</header>
		<main class="astro-BVZIHDZO">
			<article class="astro-BVZIHDZO">
				<div class="hero-image astro-BVZIHDZO">
					
				</div>
				<div class="prose astro-BVZIHDZO">
					<div class="title astro-BVZIHDZO">
						<div class="date astro-BVZIHDZO">
							<time datetime="2017-07-18T00:00:00.000Z">
	Jul 18, 2017
</time>
							
						</div>
						<h1 class="astro-BVZIHDZO">vcpkgのAlembicパッケージ(USE_HDF5)を作ってみる</h1>
						<hr class="astro-BVZIHDZO">
					</div>
					
	<p>mmdbridgeのvcpkgを使ったビルド手順を作ったついでにAlembicのvcpkg向けパッケージを作ってみる。</p>
<p>情報収集</p>
<ul>
<li><a href="https://github.com/Microsoft/vcpkg/blob/master/docs/examples/packaging-zlib.md">https://github.com/Microsoft/vcpkg/blob/master/docs/examples/packaging-zlib.md</a></li>
</ul>
<p>読んだ。</p>
<p><code>vcpkg create url</code> で雛形が作れる。</p>
<p>実験</p>
<pre is:raw="" class="astro-code github-dark" style="background-color: #24292e; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #79B8FF">.</span><span style="color: #E1E4E8">\vcpkg.exe </span><span style="color: #9ECBFF">create</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">alembic</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">https://github.com/alembic/alembic/archive/1.7.1.tar.gz</span></span>
<span class="line"><span style="color: #B392F0">CMake</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">Error</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">at</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">scripts/ports.cmake:101</span><span style="color: #E1E4E8"> (message):</span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #B392F0">Portfile</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">already</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">exists:</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">'D:\vcpkg\ports\alembic\portfile.cmake'</span></span></code></pre>
<p>すでにあるだと！？
最近できたらしい。</p>
<ul>
<li><a href="https://github.com/Microsoft/vcpkg/tree/master/ports/alembic">https://github.com/Microsoft/vcpkg/tree/master/ports/alembic</a></li>
</ul>
<p>しかし、hdf非対応みたいなので作ってみる。</p>
<pre is:raw="" class="astro-code github-dark" style="background-color: #24292e; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #79B8FF">.</span><span style="color: #E1E4E8">\vcpkg.exe </span><span style="color: #9ECBFF">create</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">alembic-hdf</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">https://github.com/alembic/alembic/archive/1.7.1.tar.gz</span></span>
<span class="line"></span>
<span class="line"><span style="color: #B392F0">VCPKG_DIR</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #B392F0">ports</span></span>
<span class="line"><span style="color: #E1E4E8">        </span><span style="color: #B392F0">alembic-hdf</span></span>
<span class="line"><span style="color: #E1E4E8">            </span><span style="color: #B392F0">CONTROL</span></span>
<span class="line"><span style="color: #E1E4E8">            </span><span style="color: #B392F0">portfile.cmake</span></span></code></pre>
<p>ができた。
簡単なCONTROLから。
こっちはパッケージ情報を決めるだけなのでさくっと。</p>
<pre is:raw="" class="astro-code github-dark" style="background-color: #24292e; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #B392F0">Source:</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">alembic-hdf</span></span>
<span class="line"><span style="color: #B392F0">Version:</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">1.7</span><span style="color: #9ECBFF">.1</span></span>
<span class="line"><span style="color: #B392F0">Description:</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">alembic</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">with</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">hdf5</span></span>
<span class="line"><span style="color: #B392F0">Build-Depends:</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">hdf5</span></span></code></pre>
<p>本題のportfile.cmake。
そのままだとエラーになるの。最低限以下が必要なようだ。
アーカイブを展開パスの指定。</p>
<pre is:raw="" class="astro-code github-dark" style="background-color: #24292e; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #F97583">set</span><span style="color: #E1E4E8">(SOURCE_PATH </span><span style="color: #F97583">${CURRENT_BUILDTREES_DIR}</span><span style="color: #E1E4E8">/src/1.7.1)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D"># ↓ 修正する</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F97583">set</span><span style="color: #E1E4E8">(SOURCE_PATH </span><span style="color: #F97583">${CURRENT_BUILDTREES_DIR}</span><span style="color: #E1E4E8">/src/alembic-1.7.1)</span></span></code></pre>
<p>実行してみる。</p>
<pre is:raw="" class="astro-code github-dark" style="background-color: #24292e; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #F97583">></span><span style="color: #E1E4E8"> ./vcpkg install alembic-hdf:x64-windows</span></span>
<span class="line"><span style="color: #B392F0">The</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">following</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">packages</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">will</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">be</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">built</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">and</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">installed:</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #B392F0">alembic-hdf:x64-windows</span></span>
<span class="line"><span style="color: #B392F0">Building</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">package</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">alembic-hdf:x64-windows...</span></span>
<span class="line"><span style="color: #B392F0">--</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">CURRENT_INSTALLED_DIR=D:/vcpkg/installed/x64-windows</span></span>
<span class="line"><span style="color: #B392F0">--</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">DOWNLOADS=D:/vcpkg/downloads</span></span>
<span class="line"><span style="color: #B392F0">--</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">CURRENT_PACKAGES_DIR=D:/vcpkg/packages/alembic-hdf_x64-windows</span></span>
<span class="line"><span style="color: #B392F0">--</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">CURRENT_BUILDTREES_DIR=D:/vcpkg/buildtrees/alembic-hdf</span></span>
<span class="line"><span style="color: #B392F0">--</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">CURRENT_PORT_DIR=D:/vcpkg/ports/alembic-hdf/.</span></span>
<span class="line"><span style="color: #B392F0">--</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">Using</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">cached</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">D:/vcpkg/downloads/1.7.1.tar.gz</span></span>
<span class="line"><span style="color: #B392F0">--</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">Testing</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">integrity</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">of</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">cached</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">file...</span></span>
<span class="line"><span style="color: #B392F0">--</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">Testing</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">integrity</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">of</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">cached</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">file...</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">OK</span></span>
<span class="line"><span style="color: #B392F0">--</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">Extracting</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">done</span></span>
<span class="line"><span style="color: #B392F0">--</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">Configuring</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">x64-windows-rel</span></span>
<span class="line"><span style="color: #B392F0">--</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">Configuring</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">x64-windows-rel</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">done</span></span>
<span class="line"><span style="color: #B392F0">--</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">Configuring</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">x64-windows-dbg</span></span>
<span class="line"><span style="color: #B392F0">PS</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">D:</span><span style="color: #79B8FF">\v</span><span style="color: #9ECBFF">cpk</span><span style="color: #E1E4E8">g</span><span style="color: #F97583">></span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">.</span><span style="color: #79B8FF">\v</span><span style="color: #9ECBFF">cpkg.exe</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">install</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">alembic-hdf:x64-windows</span></span>
<span class="line"><span style="color: #B392F0">The</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">following</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">packages</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">will</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">be</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">built</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">and</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">installed:</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #B392F0">alembic-hdf:x64-windows</span></span>
<span class="line"><span style="color: #B392F0">Building</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">package</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">alembic-hdf:x64-windows...</span></span>
<span class="line"><span style="color: #B392F0">--</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">CURRENT_INSTALLED_DIR=D:/vcpkg/installed/x64-windows</span></span>
<span class="line"><span style="color: #B392F0">--</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">DOWNLOADS=D:/vcpkg/downloads</span></span>
<span class="line"><span style="color: #B392F0">--</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">CURRENT_PACKAGES_DIR=D:/vcpkg/packages/alembic-hdf_x64-windows</span></span>
<span class="line"><span style="color: #B392F0">--</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">CURRENT_BUILDTREES_DIR=D:/vcpkg/buildtrees/alembic-hdf</span></span>
<span class="line"><span style="color: #B392F0">--</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">CURRENT_PORT_DIR=D:/vcpkg/ports/alembic-hdf/.</span></span>
<span class="line"><span style="color: #B392F0">--</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">Using</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">cached</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">D:/vcpkg/downloads/1.7.1.tar.gz</span></span>
<span class="line"><span style="color: #B392F0">--</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">Testing</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">integrity</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">of</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">cached</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">file...</span></span>
<span class="line"><span style="color: #B392F0">--</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">Testing</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">integrity</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">of</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">cached</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">file...</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">OK</span></span>
<span class="line"><span style="color: #B392F0">--</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">Extracting</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">done</span></span>
<span class="line"><span style="color: #B392F0">--</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">Configuring</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">x64-windows-rel</span></span>
<span class="line"><span style="color: #B392F0">--</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">Configuring</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">x64-windows-rel</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">done</span></span>
<span class="line"><span style="color: #B392F0">--</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">Configuring</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">x64-windows-dbg</span></span>
<span class="line"><span style="color: #B392F0">--</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">Configuring</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">x64-windows-dbg</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">done</span></span>
<span class="line"><span style="color: #B392F0">--</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">Package</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">x64-windows-rel</span></span>
<span class="line"><span style="color: #B392F0">--</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">Package</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">x64-windows-rel</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">done</span></span>
<span class="line"><span style="color: #B392F0">--</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">Package</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">x64-windows-dbg</span></span>
<span class="line"><span style="color: #B392F0">--</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">Package</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">x64-windows-dbg</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">done</span></span>
<span class="line"><span style="color: #B392F0">--</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">Performing</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">post-build</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">validation</span></span>
<span class="line"><span style="color: #B392F0">Include</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">files</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">should</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">not</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">be</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">duplicated</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">into</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">the</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">/debug/include</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">directory.</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">If</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">this</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">cannot</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">be</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">disabled</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">in</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">the</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">project</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">cmake,</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">use</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #B392F0">file(REMOVE_RECURSE</span><span style="color: #E1E4E8"> ${CURRENT_PACKAGES_DIR}</span><span style="color: #9ECBFF">/debug/include</span><span style="color: #E1E4E8">)</span></span>
<span class="line"><span style="color: #B392F0">The</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">/lib/cmake</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">folder</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">should</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">be</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">merged</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">with</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">/debug/lib/cmake</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">and</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">moved</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">to</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">/share/alembic-hdf/cmake.</span></span>
<span class="line"><span style="color: #B392F0">The</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">following</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">cmake</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">files</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">were</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">found</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">outside</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">/share/alembic-hdf.</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">Please</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">place</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">cmake</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">files</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">in</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">/share/alembic-hdf.</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #B392F0">D:/vcpkg/packages/alembic-hdf_x64-windows/lib/cmake/Alembic/AlembicConfig.cmake</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #B392F0">D:/vcpkg/packages/alembic-hdf_x64-windows/lib/cmake/Alembic/AlembicConfigVersion.cmake</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #B392F0">D:/vcpkg/packages/alembic-hdf_x64-windows/lib/cmake/Alembic/AlembicTargets-release.cmake</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #B392F0">D:/vcpkg/packages/alembic-hdf_x64-windows/lib/cmake/Alembic/AlembicTargets.cmake</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #B392F0">D:/vcpkg/packages/alembic-hdf_x64-windows/debug/lib/cmake/Alembic/AlembicConfig.cmake</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #B392F0">D:/vcpkg/packages/alembic-hdf_x64-windows/debug/lib/cmake/Alembic/AlembicConfigVersion.cmake</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #B392F0">D:/vcpkg/packages/alembic-hdf_x64-windows/debug/lib/cmake/Alembic/AlembicTargets-debug.cmake</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #B392F0">D:/vcpkg/packages/alembic-hdf_x64-windows/debug/lib/cmake/Alembic/AlembicTargets.cmake</span></span>
<span class="line"></span>
<span class="line"><span style="color: #B392F0">The</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">/debug/lib/cmake</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">folder</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">should</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">be</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">merged</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">with</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">/lib/cmake</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">into</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">/share/alembic-hdf</span></span>
<span class="line"></span>
<span class="line"><span style="color: #B392F0">The</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">following</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">dlls</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">were</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">found</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">in</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">/lib</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">or</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">/debug/lib.</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">Please</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">move</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">them</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">to</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">/bin</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">or</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">/debug/bin,</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">respectively.</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #B392F0">D:/vcpkg/packages/alembic-hdf_x64-windows/lib/Alembic.dll</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color: #B392F0">The</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">following</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">dlls</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">were</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">found</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">in</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">/lib</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">or</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">/debug/lib.</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">Please</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">move</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">them</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">to</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">/bin</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">or</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">/debug/bin,</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">respectively.</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #B392F0">D:/vcpkg/packages/alembic-hdf_x64-windows/debug/lib/Alembic.dll</span></span>
<span class="line"></span>
<span class="line"><span style="color: #B392F0">The</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">software</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">license</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">must</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">be</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">available</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">at</span><span style="color: #E1E4E8"> ${CURRENT_PACKAGES_DIR}</span><span style="color: #9ECBFF">/share/alembic-hdf/copyright</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #B392F0">file(COPY</span><span style="color: #E1E4E8"> ${CURRENT_BUILDTREES_DIR}</span><span style="color: #9ECBFF">/src/alembic-1.7.1/LICENSE.txt</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">DESTINATION</span><span style="color: #E1E4E8"> ${CURRENT_PACKAGES_DIR}</span><span style="color: #9ECBFF">/share/alembic-hdf</span><span style="color: #E1E4E8">)</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #B392F0">file(RENAME</span><span style="color: #E1E4E8"> ${CURRENT_PACKAGES_DIR}</span><span style="color: #9ECBFF">/share/alembic-hdf/LICENSE.txt</span><span style="color: #E1E4E8"> ${CURRENT_PACKAGES_DIR}</span><span style="color: #9ECBFF">/share/alembic-hdf/copyright</span><span style="color: #E1E4E8">)</span></span>
<span class="line"><span style="color: #B392F0">The</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">following</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">EXEs</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">were</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">found</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">in</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">/bin</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">or</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">/debug/bin.</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">EXEs</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">are</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">not</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">valid</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">distribution</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">targets.</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #B392F0">D:/vcpkg/packages/alembic-hdf_x64-windows/bin/abcdiff.exe</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #B392F0">D:/vcpkg/packages/alembic-hdf_x64-windows/bin/abcecho.exe</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #B392F0">D:/vcpkg/packages/alembic-hdf_x64-windows/bin/abcechobounds.exe</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #B392F0">D:/vcpkg/packages/alembic-hdf_x64-windows/bin/abcls.exe</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #B392F0">D:/vcpkg/packages/alembic-hdf_x64-windows/bin/abcstitcher.exe</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #B392F0">D:/vcpkg/packages/alembic-hdf_x64-windows/bin/abctree.exe</span></span>
<span class="line"></span>
<span class="line"><span style="color: #B392F0">The</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">following</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">EXEs</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">were</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">found</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">in</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">/bin</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">or</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">/debug/bin.</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">EXEs</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">are</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">not</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">valid</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">distribution</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">targets.</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #B392F0">D:/vcpkg/packages/alembic-hdf_x64-windows/debug/bin/abcdiff.exe</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #B392F0">D:/vcpkg/packages/alembic-hdf_x64-windows/debug/bin/abcecho.exe</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #B392F0">D:/vcpkg/packages/alembic-hdf_x64-windows/debug/bin/abcechobounds.exe</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #B392F0">D:/vcpkg/packages/alembic-hdf_x64-windows/debug/bin/abcls.exe</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #B392F0">D:/vcpkg/packages/alembic-hdf_x64-windows/debug/bin/abcstitcher.exe</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #B392F0">D:/vcpkg/packages/alembic-hdf_x64-windows/debug/bin/abctree.exe</span></span>
<span class="line"></span>
<span class="line"><span style="color: #B392F0">Found</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">9</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">error</span><span style="color: #E1E4E8">(</span><span style="color: #B392F0">s</span><span style="color: #E1E4E8">)</span><span style="color: #9ECBFF">.</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">Please</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">correct</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">the</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">portfile:</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #B392F0">D:\vcpkg\ports\alembic-hdf\portfile.cmake</span></span>
<span class="line"><span style="color: #B392F0">--</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">Performing</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">post-build</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">validation</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">done</span></span>
<span class="line"><span style="color: #B392F0">Error:</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">Building</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">package</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">alembic-hdf:x64-windows</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">failed</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">with:</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">POST_BUILD_CHECKS_FAILED</span></span>
<span class="line"><span style="color: #B392F0">Please</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">ensure</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">you're using the latest portfiles with `.\vcpkg update`, then</span></span>
<span class="line"><span style="color: #9ECBFF">submit an issue at https://github.com/Microsoft/vcpkg/issues including:</span></span>
<span class="line"><span style="color: #9ECBFF">  Package: alembic-hdf:x64-windows</span></span>
<span class="line"><span style="color: #9ECBFF">  Vcpkg version: 0.0.81-144d3718c4197b101c7d61ee6a258200371fb1ab</span></span>
<span class="line"></span>
<span class="line"><span style="color: #9ECBFF">Additionally, attach any relevant sections from the log files above.</span></span></code></pre>
<p>という感じになった。
エラーメッセージがすごく親切。
あと、NINJAビルド速い。
エラーにはなるがビルド結果は以下のように出力された。</p>
<pre is:raw="" class="astro-code github-dark" style="background-color: #24292e; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #B392F0">VCPKG_DIR/packages/alembic-hdf_x64-windows</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">  </span><span style="color: #9ECBFF">BUILD_INFO</span></span>
<span class="line"><span style="color: #B392F0">│</span></span>
<span class="line"><span style="color: #B392F0">├─bin</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">abcdiff.exe</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">abcecho.exe</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">abcechobounds.exe</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">abcls.exe</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">abcstitcher.exe</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">abctree.exe</span></span>
<span class="line"><span style="color: #B392F0">│</span></span>
<span class="line"><span style="color: #B392F0">├─debug</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">  </span><span style="color: #9ECBFF">├─bin</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">  </span><span style="color: #9ECBFF">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">abcdiff.exe</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">  </span><span style="color: #9ECBFF">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">abcecho.exe</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">  </span><span style="color: #9ECBFF">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">abcechobounds.exe</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">  </span><span style="color: #9ECBFF">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">abcls.exe</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">  </span><span style="color: #9ECBFF">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">abcstitcher.exe</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">  </span><span style="color: #9ECBFF">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">abctree.exe</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">  </span><span style="color: #9ECBFF">│</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">  </span><span style="color: #9ECBFF">├─include</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">  </span><span style="color: #9ECBFF">│</span><span style="color: #E1E4E8">  </span><span style="color: #9ECBFF">└─Alembic</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">  </span><span style="color: #9ECBFF">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">├─Abc</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">  </span><span style="color: #9ECBFF">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">│</span><span style="color: #E1E4E8">      </span><span style="color: #79B8FF">*</span><span style="color: #9ECBFF">.h</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">  </span><span style="color: #9ECBFF">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">│</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">  </span><span style="color: #9ECBFF">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">├─AbcCollection</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">  </span><span style="color: #9ECBFF">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">│</span><span style="color: #E1E4E8">      </span><span style="color: #79B8FF">*</span><span style="color: #9ECBFF">.h</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">  </span><span style="color: #9ECBFF">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">│</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">  </span><span style="color: #9ECBFF">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">├─AbcCoreAbstract</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">  </span><span style="color: #9ECBFF">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">│</span><span style="color: #E1E4E8">      </span><span style="color: #79B8FF">*</span><span style="color: #9ECBFF">.h</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">  </span><span style="color: #9ECBFF">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">│</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">  </span><span style="color: #9ECBFF">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">├─AbcCoreFactory</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">  </span><span style="color: #9ECBFF">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">│</span><span style="color: #E1E4E8">      </span><span style="color: #79B8FF">*</span><span style="color: #9ECBFF">.h</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">  </span><span style="color: #9ECBFF">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">│</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">  </span><span style="color: #9ECBFF">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">├─AbcCoreLayer</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">  </span><span style="color: #9ECBFF">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">│</span><span style="color: #E1E4E8">      </span><span style="color: #79B8FF">*</span><span style="color: #9ECBFF">.h</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">  </span><span style="color: #9ECBFF">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">│</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">  </span><span style="color: #9ECBFF">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">├─AbcCoreOgawa</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">  </span><span style="color: #9ECBFF">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">│</span><span style="color: #E1E4E8">      </span><span style="color: #79B8FF">*</span><span style="color: #9ECBFF">.h</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">  </span><span style="color: #9ECBFF">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">│</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">  </span><span style="color: #9ECBFF">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">├─AbcGeom</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">  </span><span style="color: #9ECBFF">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">│</span><span style="color: #E1E4E8">      </span><span style="color: #79B8FF">*</span><span style="color: #9ECBFF">.h</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">  </span><span style="color: #9ECBFF">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">│</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">  </span><span style="color: #9ECBFF">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">├─AbcMaterial</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">  </span><span style="color: #9ECBFF">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">│</span><span style="color: #E1E4E8">      </span><span style="color: #79B8FF">*</span><span style="color: #9ECBFF">.h</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">  </span><span style="color: #9ECBFF">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">│</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">  </span><span style="color: #9ECBFF">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">└─Util</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">  </span><span style="color: #9ECBFF">│</span><span style="color: #E1E4E8">              </span><span style="color: #79B8FF">*</span><span style="color: #9ECBFF">.h</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">  </span><span style="color: #9ECBFF">│</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">  </span><span style="color: #9ECBFF">└─lib</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">│</span><span style="color: #E1E4E8">  </span><span style="color: #9ECBFF">Alembic.dll</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">│</span><span style="color: #E1E4E8">  </span><span style="color: #9ECBFF">Alembic.lib</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">│</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">└─cmake</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">          </span><span style="color: #9ECBFF">└─Alembic</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">                  </span><span style="color: #9ECBFF">AlembicConfig.cmake</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">                  </span><span style="color: #9ECBFF">AlembicConfigVersion.cmake</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">                  </span><span style="color: #9ECBFF">AlembicTargets-debug.cmake</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">                  </span><span style="color: #9ECBFF">AlembicTargets.cmake</span></span>
<span class="line"><span style="color: #B392F0">│</span></span>
<span class="line"><span style="color: #B392F0">├─include</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">  </span><span style="color: #9ECBFF">└─Alembic</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">├─Abc</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">│</span><span style="color: #E1E4E8">      </span><span style="color: #79B8FF">*</span><span style="color: #9ECBFF">.h</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">│</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">├─AbcCollection</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">│</span><span style="color: #E1E4E8">      </span><span style="color: #79B8FF">*</span><span style="color: #9ECBFF">.h</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">│</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">├─AbcCoreAbstract</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">│</span><span style="color: #E1E4E8">      </span><span style="color: #79B8FF">*</span><span style="color: #9ECBFF">.h</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">│</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">├─AbcCoreFactory</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">│</span><span style="color: #E1E4E8">      </span><span style="color: #79B8FF">*</span><span style="color: #9ECBFF">.h</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">│</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">├─AbcCoreLayer</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">│</span><span style="color: #E1E4E8">      </span><span style="color: #79B8FF">*</span><span style="color: #9ECBFF">.h</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">│</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">├─AbcCoreOgawa</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">│</span><span style="color: #E1E4E8">      </span><span style="color: #79B8FF">*</span><span style="color: #9ECBFF">.h</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">│</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">├─AbcGeom</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">│</span><span style="color: #E1E4E8">      </span><span style="color: #79B8FF">*</span><span style="color: #9ECBFF">.h</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">│</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">├─AbcMaterial</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">│</span><span style="color: #E1E4E8">      </span><span style="color: #79B8FF">*</span><span style="color: #9ECBFF">.h</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">│</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">      </span><span style="color: #9ECBFF">└─Util</span></span>
<span class="line"><span style="color: #B392F0">│</span><span style="color: #E1E4E8">              </span><span style="color: #79B8FF">*</span><span style="color: #9ECBFF">.h</span></span>
<span class="line"><span style="color: #B392F0">│</span></span>
<span class="line"><span style="color: #B392F0">└─lib</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #B392F0">│</span><span style="color: #E1E4E8">  </span><span style="color: #9ECBFF">Alembic.dll</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #B392F0">│</span><span style="color: #E1E4E8">  </span><span style="color: #9ECBFF">Alembic.lib</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #B392F0">│</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #B392F0">└─cmake</span></span>
<span class="line"><span style="color: #E1E4E8">        </span><span style="color: #B392F0">└─Alembic</span></span>
<span class="line"><span style="color: #E1E4E8">                </span><span style="color: #B392F0">AlembicConfig.cmake</span></span>
<span class="line"><span style="color: #E1E4E8">                </span><span style="color: #B392F0">AlembicConfigVersion.cmake</span></span>
<span class="line"><span style="color: #E1E4E8">                </span><span style="color: #B392F0">AlembicTargets-release.cmake</span></span>
<span class="line"><span style="color: #E1E4E8">                </span><span style="color: #B392F0">AlembicTargets.cmake</span></span></code></pre>
<p>ここから不要なものを削除したり、場所の違うものを移動したりすることで完成できそう。
エラーメッセージに沿って修正してみる</p>
<p><code>debug/include</code> 不要</p>
<p>エラーメッセージに含まれるとおりに。</p>
<pre is:raw="" class="astro-code github-dark" style="background-color: #24292e; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #F97583">file</span><span style="color: #E1E4E8">(REMOVE_RECURSE </span><span style="color: #F97583">${CURRENT_PACKAGES_DIR}</span><span style="color: #E1E4E8">/debug/include)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8">lib/cmake/Alembic/*.cmakeをshare/alembic-hdfに移動するべし</span></span>
<span class="line"><span style="color: #E1E4E8">debug/lib/cmake/Alembicを統合するべし。</span></span>
<span class="line"><span style="color: #E1E4E8">vcpkg_fixup_cmake_targets(CONFIG_PATH </span><span style="color: #9ECBFF">"lib/cmake/Alembic"</span><span style="color: #E1E4E8">)</span></span></code></pre>
<p>ぽい。 <code>alembic/portfile.cmake</code> を参考にした</p>
<pre is:raw="" class="astro-code github-dark" style="background-color: #24292e; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #E1E4E8">lib/Alembic.dllをbin/Alembic.dllに移動せよ</span></span>
<span class="line"><span style="color: #E1E4E8">debug/lib/Alembic.dllも。</span></span>
<span class="line"><span style="color: #F97583">file</span><span style="color: #E1E4E8">(RENAME </span><span style="color: #F97583">${CURRENT_PACKAGES_DIR}</span><span style="color: #E1E4E8">/lib/Alembic.dll </span><span style="color: #F97583">${CURRENT_PACKAGES_DIR}</span><span style="color: #E1E4E8">/bin/Alembic.dll)</span></span>
<span class="line"><span style="color: #F97583">file</span><span style="color: #E1E4E8">(RENAME </span><span style="color: #F97583">${CURRENT_PACKAGES_DIR}</span><span style="color: #E1E4E8">/debug/lib/Alembic.dll </span><span style="color: #F97583">${CURRENT_PACKAGES_DIR}</span><span style="color: #E1E4E8">/debug/bin/Alembic.dll)</span></span></code></pre>
<p><code>alembic/portfile.cmake</code> を参考にした</p>
<p>ライセンスファイルをコピーせよ
エラーメッセージに含まれるとおりに。</p>
<pre is:raw="" class="astro-code github-dark" style="background-color: #24292e; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #F97583">file</span><span style="color: #E1E4E8">(COPY </span><span style="color: #F97583">${CURRENT_BUILDTREES_DIR}</span><span style="color: #E1E4E8">/src/alembic-1.7.1/LICENSE.txt DESTINATION </span><span style="color: #F97583">${CURRENT_PACKAGES_DIR}</span><span style="color: #E1E4E8">/share/alembic-hdf)</span></span>
<span class="line"><span style="color: #F97583">file</span><span style="color: #E1E4E8">(RENAME </span><span style="color: #F97583">${CURRENT_PACKAGES_DIR}</span><span style="color: #E1E4E8">/share/alembic-hdf/LICENSE.txt </span><span style="color: #F97583">${CURRENT_PACKAGES_DIR}</span><span style="color: #E1E4E8">/share/alembic-hdf/copyright)</span></span></code></pre>
<p>exeを削除せよ</p>
<pre is:raw="" class="astro-code github-dark" style="background-color: #24292e; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #F97583">file</span><span style="color: #E1E4E8">(GLOB EXE </span><span style="color: #F97583">${CURRENT_PACKAGES_DIR}</span><span style="color: #E1E4E8">/bin/*.exe)</span></span>
<span class="line"><span style="color: #F97583">file</span><span style="color: #E1E4E8">(GLOB DEBUG_EXE </span><span style="color: #F97583">${CURRENT_PACKAGES_DIR}</span><span style="color: #E1E4E8">/debug/bin/*.exe)</span></span>
<span class="line"><span style="color: #F97583">file</span><span style="color: #E1E4E8">(REMOVE </span><span style="color: #F97583">${EXE}</span><span style="color: #E1E4E8">)</span></span>
<span class="line"><span style="color: #F97583">file</span><span style="color: #E1E4E8">(REMOVE </span><span style="color: #F97583">${DEBUG_EXE}</span><span style="color: #E1E4E8">)</span></span></code></pre>
<p>alembic/portfile.cmakeを参考にした
おまけ: debug用にpdbをコピー
alembic/portfile.cmakeを参考にした
vcpkg_copy_pdbs()</p>
<p>vcpkg_install_cmakeより下を抜粋。</p>
<pre is:raw="" class="astro-code github-dark" style="background-color: #24292e; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #E1E4E8">vcpkg_install_cmake()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D"># Remove debug/include</span></span>
<span class="line"><span style="color: #F97583">file</span><span style="color: #E1E4E8">(REMOVE_RECURSE </span><span style="color: #F97583">${CURRENT_PACKAGES_DIR}</span><span style="color: #E1E4E8">/debug/include)</span></span>
<span class="line"><span style="color: #6A737D"># fix *.cmake</span></span>
<span class="line"><span style="color: #E1E4E8">vcpkg_fixup_cmake_targets(CONFIG_PATH </span><span style="color: #9ECBFF">"lib/cmake/Alembic"</span><span style="color: #E1E4E8">)</span></span>
<span class="line"><span style="color: #6A737D"># Rename dll</span></span>
<span class="line"><span style="color: #F97583">file</span><span style="color: #E1E4E8">(RENAME </span><span style="color: #F97583">${CURRENT_PACKAGES_DIR}</span><span style="color: #E1E4E8">/lib/Alembic.dll </span><span style="color: #F97583">${CURRENT_PACKAGES_DIR}</span><span style="color: #E1E4E8">/bin/Alembic.dll)</span></span>
<span class="line"><span style="color: #F97583">file</span><span style="color: #E1E4E8">(RENAME </span><span style="color: #F97583">${CURRENT_PACKAGES_DIR}</span><span style="color: #E1E4E8">/debug/lib/Alembic.dll </span><span style="color: #F97583">${CURRENT_PACKAGES_DIR}</span><span style="color: #E1E4E8">/debug/bin/Alembic.dll)</span></span>
<span class="line"><span style="color: #6A737D"># Handle copyright</span></span>
<span class="line"><span style="color: #F97583">file</span><span style="color: #E1E4E8">(COPY </span><span style="color: #F97583">${CURRENT_BUILDTREES_DIR}</span><span style="color: #E1E4E8">/src/alembic-1.7.1/LICENSE.txt DESTINATION </span><span style="color: #F97583">${CURRENT_PACKAGES_DIR}</span><span style="color: #E1E4E8">/share/alembic-hdf)</span></span>
<span class="line"><span style="color: #F97583">file</span><span style="color: #E1E4E8">(RENAME </span><span style="color: #F97583">${CURRENT_PACKAGES_DIR}</span><span style="color: #E1E4E8">/share/alembic-hdf/LICENSE.txt </span><span style="color: #F97583">${CURRENT_PACKAGES_DIR}</span><span style="color: #E1E4E8">/share/alembic-hdf/copyright)</span></span>
<span class="line"><span style="color: #6A737D"># Remove exe files</span></span>
<span class="line"><span style="color: #F97583">file</span><span style="color: #E1E4E8">(GLOB EXE </span><span style="color: #F97583">${CURRENT_PACKAGES_DIR}</span><span style="color: #E1E4E8">/bin/*.exe)</span></span>
<span class="line"><span style="color: #F97583">file</span><span style="color: #E1E4E8">(GLOB DEBUG_EXE </span><span style="color: #F97583">${CURRENT_PACKAGES_DIR}</span><span style="color: #E1E4E8">/debug/bin/*.exe)</span></span>
<span class="line"><span style="color: #F97583">file</span><span style="color: #E1E4E8">(REMOVE </span><span style="color: #F97583">${EXE}</span><span style="color: #E1E4E8">)</span></span>
<span class="line"><span style="color: #F97583">file</span><span style="color: #E1E4E8">(REMOVE </span><span style="color: #F97583">${DEBUG_EXE}</span><span style="color: #E1E4E8">)</span></span>
<span class="line"><span style="color: #6A737D"># Copy pdb</span></span>
<span class="line"><span style="color: #E1E4E8">vcpkg_copy_pdbs()</span></span></code></pre>
<p>再度ビルド。</p>
<p><code>> vcpkg install alembic-hdf:x64-windows</code></p>
<p>うまくいった。
USE_HDF5を有効にする
portfileの修正
CONTROLに依存追加。
Build-Depends: ilmbase, hdf5</p>
<p>USE_HDF5を有効に。</p>
<pre is:raw="" class="astro-code github-dark" style="background-color: #24292e; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #E1E4E8">vcpkg_configure_cmake(</span></span>
<span class="line"><span style="color: #E1E4E8">    SOURCE_PATH </span><span style="color: #F97583">${SOURCE_PATH}</span></span>
<span class="line"><span style="color: #E1E4E8">    PREFER_NINJA </span><span style="color: #6A737D"># Disable this option if project cannot be built with Ninja</span></span>
<span class="line"><span style="color: #E1E4E8">    OPTIONS -DUSE_HDF5=</span><span style="color: #F97583">ON</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #6A737D"># OPTIONS_RELEASE -DOPTIMIZE=1</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #6A737D"># OPTIONS_DEBUG -DDEBUGGABLE=1</span></span>
<span class="line"><span style="color: #E1E4E8">)</span></span></code></pre>
<p>ビルドあんどエラー
ビルドしてみるがエラーになる。</p>
<p><code>VCPKG_DIR\buildtrees\alembic-hdf\package-x64-windows-rel-out.log</code> を見て原因を探る。</p>
<p>hdf5に対するlinkが無くて、hdf5関連のシンボルが見つからん。
パッチ
alembic-1.7.1/lib/Alembic/CMakeLists.txtを修正したいのでやり方を調べる。
パッチの当て方</p>
<p>portfile.cmakeに記述する。</p>
<pre is:raw="" class="astro-code github-dark" style="background-color: #24292e; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #E1E4E8">vcpkg_extract_source_archiveよりあと、vcpkg_install_cmakeより前。</span></span>
<span class="line"><span style="color: #E1E4E8">vcpkg_apply_patches(</span></span>
<span class="line"><span style="color: #E1E4E8">    SOURCE_PATH </span><span style="color: #F97583">${SOURCE_PATH}</span></span>
<span class="line"><span style="color: #E1E4E8">    PATCHES </span><span style="color: #F97583">${CMAKE_CURRENT_LIST_DIR}</span><span style="color: #E1E4E8">/fix-hdf5link.patch</span></span>
<span class="line"><span style="color: #E1E4E8">)</span></span></code></pre>
<p>パッチの作り方</p>
<p><a href="https://github.com/Microsoft/vcpkg/blob/master/docs/examples/patching-libpng.md#patching-the-code-to-improve-compatibility">https://github.com/Microsoft/vcpkg/blob/master/docs/examples/patching-libpng.md#patching-the-code-to-improve-compatibility</a></p>
<p>なるほど。
gitを準備して・・・</p>
<pre is:raw="" class="astro-code github-dark" style="background-color: #24292e; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #B392F0">vcpkg></span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">cd</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">./buildtrees/alembic-hdf/src/alembic-1.7.1/</span></span>
<span class="line"><span style="color: #B392F0">vcpkg/buildtrees/alembic-hdf/src/alembic-1.7.1></span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">git</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">init</span></span>
<span class="line"><span style="color: #B392F0">vcpkg/buildtrees/alembic-hdf/src/alembic-1.7.1></span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">git</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">add</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">.</span></span>
<span class="line"><span style="color: #B392F0">vcpkg/buildtrees/alembic-hdf/src/alembic-1.7.1></span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">git</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">commit</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">-m</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">"temp"</span></span></code></pre>
<p>修正
alembic-1.7.1/lib/Alembic/CMakeLists.txtを修正。</p>
<pre is:raw="" class="astro-code github-dark" style="background-color: #24292e; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #85E89D">> git diff</span></span>
<span class="line"><span style="color: #FDAEB7"><span style="user-select: none;">-</span>-git a/lib/Alembic/CMakeLists.txt b/lib/Alembic/CMakeLists.txt</span></span>
<span class="line"><span style="color: #E1E4E8">index 5028c91..1f81d50 100644</span></span>
<span class="line"><span style="color: #FDAEB7"><span style="user-select: none;">-</span>-- a/lib/Alembic/CMakeLists.txt</span></span>
<span class="line"><span style="color: #85E89D"><span style="user-select: none;">+</span>++ b/lib/Alembic/CMakeLists.txt</span></span>
<span class="line"><span style="color: #B392F0; font-weight: bold">@@ -49,6 +49,12 @@</span><span style="color: #E1E4E8"> ADD_SUBDIRECTORY(AbcMaterial)</span></span>
<span class="line"><span style="color: #E1E4E8"> ADD_SUBDIRECTORY(Ogawa)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8"> ADD_LIBRARY(Alembic ${LIB_TYPE} ${CXX_FILES})</span></span>
<span class="line"><span style="color: #85E89D"><span style="user-select: none;">+</span>IF (USE_HDF5)</span></span>
<span class="line"><span style="color: #85E89D"><span style="user-select: none;">+</span>    TARGET_LINK_LIBRARIES(Alembic</span></span>
<span class="line"><span style="color: #85E89D"><span style="user-select: none;">+</span>        ${HDF5_LIBRARIES}</span></span>
<span class="line"><span style="color: #85E89D"><span style="user-select: none;">+</span>        )</span></span>
<span class="line"><span style="color: #85E89D"><span style="user-select: none;">+</span>    ADD_DEFINITIONS(-DH5_BUILT_AS_DYNAMIC_LIB)</span></span>
<span class="line"><span style="color: #85E89D"><span style="user-select: none;">+</span>ENDIF()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8"> TARGET_INCLUDE_DIRECTORIES(Alembic</span></span>
<span class="line"><span style="color: #E1E4E8">     PUBLIC</span></span></code></pre>
<p>gitでpatchを作成</p>
<p><code>> git diff | out-file -enc ascii ..\..\..\..\ports\alembic-hdf\fix-hdf5link.patch</code></p>
<p>ビルド</p>
<pre is:raw="" class="astro-code github-dark" style="background-color: #24292e; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #F97583">></span><span style="color: #E1E4E8"> .</span><span style="color: #79B8FF">\v</span><span style="color: #E1E4E8">cpkg.exe install alembic-hdf:x64-windows</span></span>
<span class="line"><span style="color: #B392F0">Installing</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">package</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">alembic-hdf:x64-windows...</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">done</span></span></code></pre>
<p>VCPKG_DIR/installed/x64-windows/bin/Alembic.dllをdependencywalkerで見てみるとばっちりhdf5.dllへのリンクが含まれている。作業完了。
はじめてで調べながらでもわりとさくさく作業が進んだ。エラーメッセージの出し方とか、フォルダの構成とかvcpkgなかなかレベルが高いな。</p>
<pre is:raw="" class="astro-code github-dark" style="background-color: #24292e; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #B392F0">ports</span></span>
<span class="line"><span style="color: #B392F0">ports/alembic-hdf/CONTROL</span></span>
<span class="line"><span style="color: #B392F0">Source:</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">alembic-hdf</span></span>
<span class="line"><span style="color: #B392F0">Version:</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">1.7</span><span style="color: #9ECBFF">.1</span></span>
<span class="line"><span style="color: #B392F0">Description:</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">alembic</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">with</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">hdf5</span></span>
<span class="line"><span style="color: #B392F0">Build-Depends:</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">ilmbase,</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">hdf5</span></span></code></pre>
<pre is:raw="" class="astro-code github-dark" style="background-color: #24292e; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #e1e4e8"># Common Ambient Variables:</span></span>
<span class="line"><span style="color: #e1e4e8">#   CURRENT_BUILDTREES_DIR    = ${VCPKG_ROOT_DIR}\buildtrees\${PORT}</span></span>
<span class="line"><span style="color: #e1e4e8">#   CURRENT_PACKAGES_DIR      = ${VCPKG_ROOT_DIR}\packages\${PORT}_${TARGET_TRIPLET}</span></span>
<span class="line"><span style="color: #e1e4e8">#   CURRENT_PORT_DIR          = ${VCPKG_ROOT_DIR}\ports\${PORT}</span></span>
<span class="line"><span style="color: #e1e4e8">#   PORT                      = current port name (zlib, etc)</span></span>
<span class="line"><span style="color: #e1e4e8">#   TARGET_TRIPLET            = current triplet (x86-windows, x64-windows-static, etc)</span></span>
<span class="line"><span style="color: #e1e4e8">#   VCPKG_CRT_LINKAGE         = C runtime linkage type (static, dynamic)</span></span>
<span class="line"><span style="color: #e1e4e8">#   VCPKG_LIBRARY_LINKAGE     = target library linkage type (static, dynamic)</span></span>
<span class="line"><span style="color: #e1e4e8">#   VCPKG_ROOT_DIR            = &#x3C;C:\path\to\current\vcpkg></span></span>
<span class="line"><span style="color: #e1e4e8">#   VCPKG_TARGET_ARCHITECTURE = target architecture (x64, x86, arm)</span></span>
<span class="line"><span style="color: #e1e4e8">#</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">include(vcpkg_common_functions)</span></span>
<span class="line"><span style="color: #e1e4e8">set(SOURCE_PATH ${CURRENT_BUILDTREES_DIR}/src/alembic-1.7.1)</span></span>
<span class="line"><span style="color: #e1e4e8">vcpkg_download_distfile(ARCHIVE</span></span>
<span class="line"><span style="color: #e1e4e8">    URLS "https://github.com/alembic/alembic/archive/1.7.1.tar.gz"</span></span>
<span class="line"><span style="color: #e1e4e8">    FILENAME "1.7.1.tar.gz"</span></span>
<span class="line"><span style="color: #e1e4e8">    SHA512 89e30b681a76eaf79b20ebeff62c495971b0eb64b28f249a14bbcf3bdb40df7eda93b0ede299dd5511bd4587a2cc2d4ebd851fb89bf999fdccc31fee3cffbba2</span></span>
<span class="line"><span style="color: #e1e4e8">)</span></span>
<span class="line"><span style="color: #e1e4e8">vcpkg_extract_source_archive(${ARCHIVE})</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">vcpkg_apply_patches(</span></span>
<span class="line"><span style="color: #e1e4e8">    SOURCE_PATH ${SOURCE_PATH}</span></span>
<span class="line"><span style="color: #e1e4e8">    PATCHES ${CMAKE_CURRENT_LIST_DIR}/fix-hdf5link.patch</span></span>
<span class="line"><span style="color: #e1e4e8">)</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">vcpkg_configure_cmake(</span></span>
<span class="line"><span style="color: #e1e4e8">    SOURCE_PATH ${SOURCE_PATH}</span></span>
<span class="line"><span style="color: #e1e4e8">    PREFER_NINJA # Disable this option if project cannot be built with Ninja</span></span>
<span class="line"><span style="color: #e1e4e8">    OPTIONS -DUSE_HDF5=ON</span></span>
<span class="line"><span style="color: #e1e4e8">    # OPTIONS_RELEASE -DOPTIMIZE=1</span></span>
<span class="line"><span style="color: #e1e4e8">    # OPTIONS_DEBUG -DDEBUGGABLE=1</span></span>
<span class="line"><span style="color: #e1e4e8">)</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">vcpkg_install_cmake()</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8"># Remove debug/include</span></span>
<span class="line"><span style="color: #e1e4e8">file(REMOVE_RECURSE ${CURRENT_PACKAGES_DIR}/debug/include)</span></span>
<span class="line"><span style="color: #e1e4e8"># fix *.cmake</span></span>
<span class="line"><span style="color: #e1e4e8">vcpkg_fixup_cmake_targets(CONFIG_PATH "lib/cmake/Alembic")</span></span>
<span class="line"><span style="color: #e1e4e8"># Rename dll</span></span>
<span class="line"><span style="color: #e1e4e8">file(RENAME ${CURRENT_PACKAGES_DIR}/lib/Alembic.dll ${CURRENT_PACKAGES_DIR}/bin/Alembic.dll)</span></span>
<span class="line"><span style="color: #e1e4e8">file(RENAME ${CURRENT_PACKAGES_DIR}/debug/lib/Alembic.dll ${CURRENT_PACKAGES_DIR}/debug/bin/Alembic.dll)</span></span>
<span class="line"><span style="color: #e1e4e8"># Handle copyright</span></span>
<span class="line"><span style="color: #e1e4e8">file(COPY ${CURRENT_BUILDTREES_DIR}/src/alembic-1.7.1/LICENSE.txt DESTINATION ${CURRENT_PACKAGES_DIR}/share/alembic-hdf)</span></span>
<span class="line"><span style="color: #e1e4e8">file(RENAME ${CURRENT_PACKAGES_DIR}/share/alembic-hdf/LICENSE.txt ${CURRENT_PACKAGES_DIR}/share/alembic-hdf/copyright)</span></span>
<span class="line"><span style="color: #e1e4e8"># Remove exe files</span></span>
<span class="line"><span style="color: #e1e4e8">file(GLOB EXE ${CURRENT_PACKAGES_DIR}/bin/*.exe)</span></span>
<span class="line"><span style="color: #e1e4e8">file(GLOB DEBUG_EXE ${CURRENT_PACKAGES_DIR}/debug/bin/*.exe)</span></span>
<span class="line"><span style="color: #e1e4e8">file(REMOVE ${EXE})</span></span>
<span class="line"><span style="color: #e1e4e8">file(REMOVE ${DEBUG_EXE})</span></span>
<span class="line"><span style="color: #e1e4e8"># Copy pdb</span></span>
<span class="line"><span style="color: #e1e4e8">vcpkg_copy_pdbs()</span></span></code></pre>
<pre is:raw="" class="astro-code github-dark" style="background-color: #24292e; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #e1e4e8">diff --git a/lib/Alembic/CMakeLists.txt b/lib/Alembic/CMakeLists.txt</span></span>
<span class="line"><span style="color: #e1e4e8">index 5028c91..1f81d50 100644</span></span>
<span class="line"><span style="color: #e1e4e8">--- a/lib/Alembic/CMakeLists.txt</span></span>
<span class="line"><span style="color: #e1e4e8">+++ b/lib/Alembic/CMakeLists.txt</span></span>
<span class="line"><span style="color: #e1e4e8">@@ -49,6 +49,12 @@ ADD_SUBDIRECTORY(AbcMaterial)</span></span>
<span class="line"><span style="color: #e1e4e8"> ADD_SUBDIRECTORY(Ogawa)</span></span>
<span class="line"><span style="color: #e1e4e8"> </span></span>
<span class="line"><span style="color: #e1e4e8"> ADD_LIBRARY(Alembic ${LIB_TYPE} ${CXX_FILES})</span></span>
<span class="line"><span style="color: #e1e4e8">+IF (USE_HDF5)</span></span>
<span class="line"><span style="color: #e1e4e8">+    TARGET_LINK_LIBRARIES(Alembic </span></span>
<span class="line"><span style="color: #e1e4e8">+        ${HDF5_LIBRARIES}</span></span>
<span class="line"><span style="color: #e1e4e8">+        )</span></span>
<span class="line"><span style="color: #e1e4e8">+    ADD_DEFINITIONS(-DH5_BUILT_AS_DYNAMIC_LIB)</span></span>
<span class="line"><span style="color: #e1e4e8">+ENDIF()</span></span>
<span class="line"><span style="color: #e1e4e8"> </span></span>
<span class="line"><span style="color: #e1e4e8"> TARGET_INCLUDE_DIRECTORIES(Alembic</span></span>
<span class="line"><span style="color: #e1e4e8">     PUBLIC</span></span></code></pre>
<p>vcpkgにPR送った
採用されたので上記の作業は必要なくなったのが、cmake-3.9.0の更新でFindHDF5が壊れるという事態が発生したので対応中…。</p>

				</div>
			</article>
		</main>
		<footer class="footer astro-SZ7XMLTE">
    <nav class="nav astro-SZ7XMLTE">
        <div class="astro-SZ7XMLTE">2021  &copy; Copyright notice |  <a href="https://github.com/one-aalam/astro-ink" title="三次元日誌(astro)'s Github URL'" class="astro-SZ7XMLTE">三次元日誌(astro)</a>
        <script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();</script><astro-island uid="1QEdto" component-url="/_astro/ModeLabel.e3ff75e7.js" component-export="default" renderer-url="/_astro/client.cb726945.js" props="{&quot;class&quot;:[0,&quot;astro-SZ7XMLTE&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;ModeLabel&quot;,&quot;value&quot;:true}" await-children=""><span slot="dark" data-svelte-h="svelte-14ov3lc">(dark)</span></astro-island> theme on <a href="https://astro.build/" class="astro-SZ7XMLTE">Astro</a></div>
        <astro-island uid="1I86to" component-url="/_astro/NetlifyIdentity.94b8edb0.js" component-export="default" renderer-url="/_astro/client.cb726945.js" props="{&quot;class&quot;:[0,&quot;astro-SZ7XMLTE&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;NetlifyIdentity&quot;,&quot;value&quot;:true}"></astro-island>
    </nav>
</footer>
	</body></html>