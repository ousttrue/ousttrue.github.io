<!DOCTYPE html>
<html lang="en" class="astro-BVZIHDZO">
	<head>
		<!-- Use Google Fonts, if you don't wanna prefer a self-hosted version --><!-- <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;500;600;700&display=swap" rel="stylesheet"> --><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>UnityでToon</title>
<meta name="title" content="UnityでToon">


<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="shortcut icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-config" content="/browserconfig.xml">
<meta name="theme-color" content="#ffffff">

<!-- Open Graph Tags (Facebook) -->
<meta property="og:type" content="website">
<meta property="og:title" content="UnityでToon">




<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:title" content="UnityでToon">





<script>
  const theme = (() => {
    if (typeof localStorage !== "undefined" && localStorage.getItem("theme")) {
      return localStorage.getItem("theme");
    }
    if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
      return "dark";
    }
    return "light";
  })();

  if (theme === "light") {
    document.documentElement.classList.remove("dark");
  } else {
    document.documentElement.classList.add("dark");
  }
</script>
		
	<link rel="stylesheet" href="/_astro/about.6111bb3a.css" />
<link rel="stylesheet" href="/_astro/about.657f8f57.css" />
<link rel="stylesheet" href="/_astro/about.ee60a110.css" />
<link rel="stylesheet" href="/_astro/about.dcb84f3d.css" /><script type="module" src="/_astro/hoisted.e6960f2c.js"></script></head>

	<body class="astro-BVZIHDZO">
		<header class="header astro-3EF6KSR2">
    <div class="header__logo astro-3EF6KSR2">
        <a href="/" class="avatar astro-3EF6KSR2">
            <img class="header__logo-img astro-3EF6KSR2" src="/assets/logo.svg" alt="Astro logo">
        </a>
    </div>
    <div class="header__meta flex-1 astro-3EF6KSR2">
        <h3 class="header__title dark:text-theme-dark-secondary astro-3EF6KSR2">
            <a href="" class="astro-3EF6KSR2">三次元日誌(astro)</a>
        </h3>
        <div class="header__meta-more flex astro-3EF6KSR2">
            <p class="header__desc astro-3EF6KSR2">
                Crisp, minimal, personal blog theme for Astro
            </p>
            <nav class="header__nav flex astro-3EF6KSR2">
                <ul class="header__ref-list astro-3EF6KSR2">
                    <li class="astro-3EF6KSR2">
                        <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var r=(i,c,n)=>{let s=async()=>{await(await i())()},t=new IntersectionObserver(e=>{for(let o of e)if(o.isIntersecting){t.disconnect(),s();break}});for(let e of n.children)t.observe(e)};(self.Astro||(self.Astro={})).visible=r;window.dispatchEvent(new Event("astro:visible"));})();;(()=>{var d;{let p={0:t=>u(t),1:t=>l(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(l(t)),5:t=>new Set(l(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t)},h=t=>{let[e,n]=t;return e in p?p[e](n):void 0},l=t=>t.map(h),u=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([e,n])=>[e,h(n)]));customElements.get("astro-island")||customElements.define("astro-island",(d=class extends HTMLElement{constructor(){super(...arguments);this.hydrate=async()=>{var i;if(!this.hydrator||!this.isConnected)return;let e=(i=this.parentElement)==null?void 0:i.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let n=this.querySelectorAll("astro-slot"),o={},a=this.querySelectorAll("template[data-astro-template]");for(let r of a){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(o[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(let r of n){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(o[r.getAttribute("name")||"default"]=r.innerHTML)}let c;try{c=this.hasAttribute("props")?u(JSON.parse(this.getAttribute("props"))):{}}catch(r){let s=this.getAttribute("component-url")||"<unknown>",y=this.getAttribute("component-export");throw y&&(s+=` (export ${y})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),r),r}await this.hydrator(this)(this.Component,c,o,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))}}connectedCallback(){!this.hasAttribute("await-children")||this.firstChild?this.childrenConnectedCallback():new MutationObserver((e,n)=>{n.disconnect(),setTimeout(()=>this.childrenConnectedCallback(),0)}).observe(this,{childList:!0})}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}start(){let e=JSON.parse(this.getAttribute("opts")),n=this.getAttribute("client");if(Astro[n]===void 0){window.addEventListener(`astro:${n}`,()=>this.start(),{once:!0});return}Astro[n](async()=>{let o=this.getAttribute("renderer-url"),[a,{default:c}]=await Promise.all([import(this.getAttribute("component-url")),o?import(o):()=>()=>{}]),i=this.getAttribute("component-export")||"default";if(!i.includes("."))this.Component=a[i];else{this.Component=a;for(let r of i.split("."))this.Component=this.Component[r]}return this.hydrator=c,this.hydrate},e,this)}attributeChangedCallback(){this.hydrate()}},d.observedAttributes=["props"],d))}})();</script><astro-island uid="2iKzVC" component-url="/_astro/SearchBtn.984510f3.js" component-export="default" renderer-url="/_astro/client.cb726945.js" props="{&quot;class&quot;:[0,&quot;astro-3EF6KSR2&quot;]}" ssr="" client="visible" opts="{&quot;name&quot;:&quot;SearchBtn&quot;,&quot;value&quot;:true}" await-children=""><button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"> <path fill-rule="evenodd" clip-rule="evenodd" d="M16.2071 4.89344C19.0923 7.77862 19.3131 12.3193 16.8693 15.4578C16.8846 15.4713 16.8996 15.4854 16.9143 15.5L21.1569 19.7427C21.5474 20.1332 21.5474 20.7664 21.1569 21.1569C20.7664 21.5474 20.1332 21.5474 19.7427 21.1569L15.5 16.9143C15.4854 16.8996 15.4713 16.8846 15.4578 16.8693C12.3193 19.3131 7.77862 19.0923 4.89344 16.2071C1.76924 13.083 1.76924 8.01763 4.89344 4.89344C8.01763 1.76924 13.083 1.76924 16.2071 4.89344ZM14.7929 14.7929C17.1361 12.4498 17.1361 8.6508 14.7929 6.30765C12.4498 3.96451 8.6508 3.96451 6.30765 6.30765C3.96451 8.6508 3.96451 12.4498 6.30765 14.7929C8.6508 17.1361 12.4498 17.1361 14.7929 14.7929Z" fill="currentColor"></path></svg></button></astro-island>
                    </li>
                    <li class="astro-3EF6KSR2">
                        <a href="https://github.com/one-aalam/astro-ink" title="三次元日誌(astro)'s Github URL'" class="astro-3EF6KSR2">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    
                                <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22" class="astro-3EF6KSR2"></path>
                            
</svg>
                        </a>
                    </li>
                    <li class="astro-3EF6KSR2">
                        <a href="/rss.xml" title="RSS" class="astro-3EF6KSR2">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    
                                <path d="M4 11a9 9 0 0 1 9 9" class="astro-3EF6KSR2"></path>
                                <path d="M4 4a16 16 0 0 1 16 16" class="astro-3EF6KSR2"></path>
                                <circle cx="5" cy="19" r="1" class="astro-3EF6KSR2"></circle>
                            
</svg>
                        </a>
                    </li>
                    <li class="astro-3EF6KSR2">
                        <astro-island uid="h8S6z" component-url="/_astro/ModeSwitcherBtn.0ddc5d6d.js" component-export="default" renderer-url="/_astro/client.cb726945.js" props="{&quot;class&quot;:[0,&quot;astro-3EF6KSR2&quot;]}" ssr="" client="visible" opts="{&quot;name&quot;:&quot;ModeSwitcherBtn&quot;,&quot;value&quot;:true}" await-children=""><button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle> <line x1="12" y1="1" x2="12" y2="3"></line> <line x1="12" y1="21" x2="12" y2="23"></line> <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line> <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line> <line x1="1" y1="12" x2="3" y2="12"></line> <line x1="21" y1="12" x2="23" y2="12"></line> <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line> <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg></button></astro-island>
                    </li>
                </ul>
            </nav>
        </div>
    </div>
</header>
		<main class="astro-BVZIHDZO">
			<article class="astro-BVZIHDZO">
				<div class="hero-image astro-BVZIHDZO">
					
				</div>
				<div class="prose astro-BVZIHDZO">
					<div class="title astro-BVZIHDZO">
						<div class="date astro-BVZIHDZO">
							<time datetime="2016-01-12T00:00:00.000Z">
	Jan 12, 2016
</time>
							
						</div>
						<h1 class="astro-BVZIHDZO">UnityでToon</h1>
						<hr class="astro-BVZIHDZO">
					</div>
					
	<p>Toon シェーダーをやってみる。</p>
<pre is:raw="" class="astro-code github-dark" style="background-color: #24292e; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #e1e4e8">メニューからインポートすると、</span></span>
<span class="line"><span style="color: #e1e4e8">Assets > Import Package > Effects</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">Assetsが現れる。</span></span>
<span class="line"><span style="color: #e1e4e8">Standard Assets/Effects/ToonShading</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">Toon/Lit</span></span>
<span class="line"><span style="color: #e1e4e8">Standard Assets/Effects/ToonShadingのshaderを自分のフォルダにコピーして改造する。</span></span>
<span class="line"><span style="color: #e1e4e8">#UsePassを展開して改造準備</span></span>
<span class="line"><span style="color: #e1e4e8">Shader "MyToon/Lit Outline" {</span></span>
<span class="line"><span style="color: #e1e4e8">    Properties {</span></span>
<span class="line"><span style="color: #e1e4e8">        _Color ("Main Color", Color) = (0.5,0.5,0.5,1)</span></span>
<span class="line"><span style="color: #e1e4e8">        _OutlineColor ("Outline Color", Color) = (0,0,0,1)</span></span>
<span class="line"><span style="color: #e1e4e8">        _Outline ("Outline width", Range (.002, 0.03)) = .005</span></span>
<span class="line"><span style="color: #e1e4e8">        _MainTex ("Base (RGB)", 2D) = "white" {}</span></span>
<span class="line"><span style="color: #e1e4e8">        _Ramp ("Toon Ramp (RGB)", 2D) = "gray" {}</span></span>
<span class="line"><span style="color: #e1e4e8">    }</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">    SubShader {</span></span>
<span class="line"><span style="color: #e1e4e8">        Tags { "RenderType"="Opaque" }</span></span>
<span class="line"><span style="color: #e1e4e8">        UsePass "Toon/Lit/FORWARD"</span></span>
<span class="line"><span style="color: #e1e4e8">        UsePass "Toon/Basic Outline/OUTLINE"</span></span>
<span class="line"><span style="color: #e1e4e8">    }</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">    Fallback "Toon/Lit"</span></span>
<span class="line"><span style="color: #e1e4e8">}</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">Toon/Litのinspectorの</span></span>
<span class="line"><span style="color: #e1e4e8">Surface shader: Show generated code</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">から該当するFORWARD Passをコピペし、</span></span>
<span class="line"><span style="color: #e1e4e8">Toon/Basic OutlineのOUTLINE Passをコピペする。</span></span>
<span class="line"><span style="color: #e1e4e8">適当に整理する。</span></span>
<span class="line"><span style="color: #e1e4e8">Shader "MyToon/Custom"</span></span>
<span class="line"><span style="color: #e1e4e8">{</span></span>
<span class="line"><span style="color: #e1e4e8">    Properties</span></span>
<span class="line"><span style="color: #e1e4e8">    {</span></span>
<span class="line"><span style="color: #e1e4e8">        _Color("Main Color", Color) = (0.5,0.5,0.5,1)</span></span>
<span class="line"><span style="color: #e1e4e8">        _MainTex("Base (RGB)", 2D) = "white" {}</span></span>
<span class="line"><span style="color: #e1e4e8">        _Ramp("Toon Ramp (RGB)", 2D) = "gray" {}</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">        _OutlineColor("Outline Color", Color) = (0,0,0,1)</span></span>
<span class="line"><span style="color: #e1e4e8">        _Outline("Outline width", Range(.002, 0.03)) = .005</span></span>
<span class="line"><span style="color: #e1e4e8">    }</span></span>
<span class="line"><span style="color: #e1e4e8">    SubShader</span></span>
<span class="line"><span style="color: #e1e4e8">    {</span></span>
<span class="line"><span style="color: #e1e4e8">        Tags { "RenderType"="Opaque" }</span></span>
<span class="line"><span style="color: #e1e4e8">        LOD 100</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">        // ---- forward rendering base pass:</span></span>
<span class="line"><span style="color: #e1e4e8">        Pass{</span></span>
<span class="line"><span style="color: #e1e4e8">            Name "FORWARD"</span></span>
<span class="line"><span style="color: #e1e4e8">            Tags{ "LightMode" = "ForwardBase" }</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">            CGPROGRAM</span></span>
<span class="line"><span style="color: #e1e4e8">#pragma vertex vert_surf</span></span>
<span class="line"><span style="color: #e1e4e8">#pragma fragment frag_surf</span></span>
<span class="line"><span style="color: #e1e4e8">#pragma lighting ToonRamp exclude_path:prepass</span></span>
<span class="line"><span style="color: #e1e4e8">#pragma multi_compile_fog</span></span>
<span class="line"><span style="color: #e1e4e8">#pragma multi_compile_fwdbase</span></span>
<span class="line"><span style="color: #e1e4e8">#include "Custom.cginc"</span></span>
<span class="line"><span style="color: #e1e4e8">            ENDCG</span></span>
<span class="line"><span style="color: #e1e4e8">        }</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">        // outline</span></span>
<span class="line"><span style="color: #e1e4e8">        Pass{</span></span>
<span class="line"><span style="color: #e1e4e8">            Name "OUTLINE"</span></span>
<span class="line"><span style="color: #e1e4e8">            Tags{ "LightMode" = "Always" }</span></span>
<span class="line"><span style="color: #e1e4e8">            Cull Front</span></span>
<span class="line"><span style="color: #e1e4e8">            ZWrite On</span></span>
<span class="line"><span style="color: #e1e4e8">            ColorMask RGB</span></span>
<span class="line"><span style="color: #e1e4e8">            Blend SrcAlpha OneMinusSrcAlpha</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">            CGPROGRAM</span></span>
<span class="line"><span style="color: #e1e4e8">#pragma vertex vert</span></span>
<span class="line"><span style="color: #e1e4e8">#pragma fragment frag</span></span>
<span class="line"><span style="color: #e1e4e8">#pragma multi_compile_fog</span></span>
<span class="line"><span style="color: #e1e4e8">#pragma multi_compile_fwdbase</span></span>
<span class="line"><span style="color: #e1e4e8">#include "Custom.cginc"</span></span>
<span class="line"><span style="color: #e1e4e8">            ENDCG</span></span>
<span class="line"><span style="color: #e1e4e8">        }</span></span>
<span class="line"><span style="color: #e1e4e8">    }</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">    // for shadow etc...</span></span>
<span class="line"><span style="color: #e1e4e8">    Fallback "Diffuse"</span></span>
<span class="line"><span style="color: #e1e4e8">}</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">*.shaderファイルのインデントが扱いずらいのでcgincと分割して手で整形。</span></span>
<span class="line"><span style="color: #e1e4e8">気持ちよくindentできるエディタを見繕う必要があるな・・・</span></span>
<span class="line"><span style="color: #e1e4e8">Custom.cginc</span></span>
<span class="line"><span style="color: #e1e4e8">#include "HLSLSupport.cginc"</span></span>
<span class="line"><span style="color: #e1e4e8">#include "UnityShaderVariables.cginc"</span></span>
<span class="line"><span style="color: #e1e4e8">// Surface shader code generated based on:</span></span>
<span class="line"><span style="color: #e1e4e8">// writes to per-pixel normal: no</span></span>
<span class="line"><span style="color: #e1e4e8">// writes to emission: no</span></span>
<span class="line"><span style="color: #e1e4e8">// needs world space reflection vector: no</span></span>
<span class="line"><span style="color: #e1e4e8">// needs world space normal vector: no</span></span>
<span class="line"><span style="color: #e1e4e8">// needs screen space position: no</span></span>
<span class="line"><span style="color: #e1e4e8">// needs world space position: no</span></span>
<span class="line"><span style="color: #e1e4e8">// needs view direction: no</span></span>
<span class="line"><span style="color: #e1e4e8">// needs world space view direction: no</span></span>
<span class="line"><span style="color: #e1e4e8">// needs world space position for lighting: no</span></span>
<span class="line"><span style="color: #e1e4e8">// needs world space view direction for lighting: no</span></span>
<span class="line"><span style="color: #e1e4e8">// needs world space view direction for lightmaps: no</span></span>
<span class="line"><span style="color: #e1e4e8">// needs vertex color: no</span></span>
<span class="line"><span style="color: #e1e4e8">// needs VFACE: no</span></span>
<span class="line"><span style="color: #e1e4e8">// passes tangent-to-world matrix to pixel shader: no</span></span>
<span class="line"><span style="color: #e1e4e8">// reads from normal: no</span></span>
<span class="line"><span style="color: #e1e4e8">// 1 texcoords actually used</span></span>
<span class="line"><span style="color: #e1e4e8">//   float2 _MainTex</span></span>
<span class="line"><span style="color: #e1e4e8">#define UNITY_PASS_FORWARDBASE</span></span>
<span class="line"><span style="color: #e1e4e8">#include "UnityCG.cginc"</span></span>
<span class="line"><span style="color: #e1e4e8">#include "Lighting.cginc"</span></span>
<span class="line"><span style="color: #e1e4e8">#include "AutoLight.cginc"</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">#define INTERNAL_DATA</span></span>
<span class="line"><span style="color: #e1e4e8">#define WorldReflectionVector(data,normal) data.worldRefl</span></span>
<span class="line"><span style="color: #e1e4e8">#define WorldNormalVector(data,normal) normal</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">// Original surface shader snippet:</span></span>
<span class="line"><span style="color: #e1e4e8">#line 10 ""</span></span>
<span class="line"><span style="color: #e1e4e8">#ifdef DUMMY_PREPROCESSOR_TO_WORK_AROUND_HLSL_COMPILER_LINE_HANDLING</span></span>
<span class="line"><span style="color: #e1e4e8">#endif</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">//#pragma surface surf ToonRamp</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">sampler2D _Ramp;</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">// custom lighting function that uses a texture ramp based</span></span>
<span class="line"><span style="color: #e1e4e8">// on angle between light direction and normal</span></span>
<span class="line"><span style="color: #e1e4e8">//#pragma lighting ToonRamp exclude_path:prepass</span></span>
<span class="line"><span style="color: #e1e4e8">inline half4 LightingToonRamp(SurfaceOutput s, half3 lightDir, half atten)</span></span>
<span class="line"><span style="color: #e1e4e8">{</span></span>
<span class="line"><span style="color: #e1e4e8">#ifndef USING_DIRECTIONAL_LIGHT</span></span>
<span class="line"><span style="color: #e1e4e8">    lightDir = normalize(lightDir);</span></span>
<span class="line"><span style="color: #e1e4e8">#endif</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">    half d = dot(s.Normal, lightDir)*0.5 + 0.5;</span></span>
<span class="line"><span style="color: #e1e4e8">    half3 ramp = tex2D(_Ramp, float2(d, d)).rgb;</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">    half4 c;</span></span>
<span class="line"><span style="color: #e1e4e8">    c.rgb = s.Albedo * _LightColor0.rgb * ramp * (atten * 2);</span></span>
<span class="line"><span style="color: #e1e4e8">    c.a = 0;</span></span>
<span class="line"><span style="color: #e1e4e8">    return c;</span></span>
<span class="line"><span style="color: #e1e4e8">}</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">sampler2D _MainTex;</span></span>
<span class="line"><span style="color: #e1e4e8">float4 _Color;</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">struct Input {</span></span>
<span class="line"><span style="color: #e1e4e8">    float2 uv_MainTex : TEXCOORD0;</span></span>
<span class="line"><span style="color: #e1e4e8">};</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">void surf(Input IN, inout SurfaceOutput o) {</span></span>
<span class="line"><span style="color: #e1e4e8">    half4 c = tex2D(_MainTex, IN.uv_MainTex) * _Color;</span></span>
<span class="line"><span style="color: #e1e4e8">    o.Albedo = c.rgb;</span></span>
<span class="line"><span style="color: #e1e4e8">    o.Alpha = c.a;</span></span>
<span class="line"><span style="color: #e1e4e8">}</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">// vertex-to-fragment interpolation data</span></span>
<span class="line"><span style="color: #e1e4e8">// no lightmaps:</span></span>
<span class="line"><span style="color: #e1e4e8">#ifdef LIGHTMAP_OFF</span></span>
<span class="line"><span style="color: #e1e4e8">struct v2f_surf {</span></span>
<span class="line"><span style="color: #e1e4e8">    float4 pos : SV_POSITION;</span></span>
<span class="line"><span style="color: #e1e4e8">    float2 pack0 : TEXCOORD0; // _MainTex</span></span>
<span class="line"><span style="color: #e1e4e8">    half3 worldNormal : TEXCOORD1;</span></span>
<span class="line"><span style="color: #e1e4e8">    fixed3 vlight : TEXCOORD2; // ambient/SH/vertexlights</span></span>
<span class="line"><span style="color: #e1e4e8">    SHADOW_COORDS(3)</span></span>
<span class="line"><span style="color: #e1e4e8">        UNITY_FOG_COORDS(4)</span></span>
<span class="line"><span style="color: #e1e4e8">#if SHADER_TARGET >= 30</span></span>
<span class="line"><span style="color: #e1e4e8">        float4 lmap : TEXCOORD5;</span></span>
<span class="line"><span style="color: #e1e4e8">#endif</span></span>
<span class="line"><span style="color: #e1e4e8">};</span></span>
<span class="line"><span style="color: #e1e4e8">#endif</span></span>
<span class="line"><span style="color: #e1e4e8">// with lightmaps:</span></span>
<span class="line"><span style="color: #e1e4e8">#ifndef LIGHTMAP_OFF</span></span>
<span class="line"><span style="color: #e1e4e8">struct v2f_surf {</span></span>
<span class="line"><span style="color: #e1e4e8">    float4 pos : SV_POSITION;</span></span>
<span class="line"><span style="color: #e1e4e8">    float2 pack0 : TEXCOORD0; // _MainTex</span></span>
<span class="line"><span style="color: #e1e4e8">    half3 worldNormal : TEXCOORD1;</span></span>
<span class="line"><span style="color: #e1e4e8">    float4 lmap : TEXCOORD2;</span></span>
<span class="line"><span style="color: #e1e4e8">    SHADOW_COORDS(3)</span></span>
<span class="line"><span style="color: #e1e4e8">        UNITY_FOG_COORDS(4)</span></span>
<span class="line"><span style="color: #e1e4e8">#ifdef DIRLIGHTMAP_COMBINED</span></span>
<span class="line"><span style="color: #e1e4e8">        fixed3 tSpace0 : TEXCOORD5;</span></span>
<span class="line"><span style="color: #e1e4e8">    fixed3 tSpace1 : TEXCOORD6;</span></span>
<span class="line"><span style="color: #e1e4e8">    fixed3 tSpace2 : TEXCOORD7;</span></span>
<span class="line"><span style="color: #e1e4e8">#endif</span></span>
<span class="line"><span style="color: #e1e4e8">};</span></span>
<span class="line"><span style="color: #e1e4e8">#endif</span></span>
<span class="line"><span style="color: #e1e4e8">float4 _MainTex_ST;</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">// vertex shader</span></span>
<span class="line"><span style="color: #e1e4e8">v2f_surf vert_surf(appdata_full v) {</span></span>
<span class="line"><span style="color: #e1e4e8">    v2f_surf o;</span></span>
<span class="line"><span style="color: #e1e4e8">    UNITY_INITIALIZE_OUTPUT(v2f_surf, o);</span></span>
<span class="line"><span style="color: #e1e4e8">    o.pos = mul(UNITY_MATRIX_MVP, v.vertex);</span></span>
<span class="line"><span style="color: #e1e4e8">    o.pack0.xy = TRANSFORM_TEX(v.texcoord, _MainTex);</span></span>
<span class="line"><span style="color: #e1e4e8">    float3 worldPos = mul(_Object2World, v.vertex).xyz;</span></span>
<span class="line"><span style="color: #e1e4e8">    fixed3 worldNormal = UnityObjectToWorldNormal(v.normal);</span></span>
<span class="line"><span style="color: #e1e4e8">#if !defined(LIGHTMAP_OFF) &#x26;&#x26; defined(DIRLIGHTMAP_COMBINED)</span></span>
<span class="line"><span style="color: #e1e4e8">    fixed3 worldTangent = UnityObjectToWorldDir(v.tangent.xyz);</span></span>
<span class="line"><span style="color: #e1e4e8">    fixed tangentSign = v.tangent.w * unity_WorldTransformParams.w;</span></span>
<span class="line"><span style="color: #e1e4e8">    fixed3 worldBinormal = cross(worldNormal, worldTangent) * tangentSign;</span></span>
<span class="line"><span style="color: #e1e4e8">#endif</span></span>
<span class="line"><span style="color: #e1e4e8">#if !defined(LIGHTMAP_OFF) &#x26;&#x26; defined(DIRLIGHTMAP_COMBINED)</span></span>
<span class="line"><span style="color: #e1e4e8">    o.tSpace0 = fixed3(worldTangent.x, worldBinormal.x, worldNormal.x);</span></span>
<span class="line"><span style="color: #e1e4e8">    o.tSpace1 = fixed3(worldTangent.y, worldBinormal.y, worldNormal.y);</span></span>
<span class="line"><span style="color: #e1e4e8">    o.tSpace2 = fixed3(worldTangent.z, worldBinormal.z, worldNormal.z);</span></span>
<span class="line"><span style="color: #e1e4e8">#endif</span></span>
<span class="line"><span style="color: #e1e4e8">    o.worldNormal = worldNormal;</span></span>
<span class="line"><span style="color: #e1e4e8">#ifndef DYNAMICLIGHTMAP_OFF</span></span>
<span class="line"><span style="color: #e1e4e8">    o.lmap.zw = v.texcoord2.xy * unity_DynamicLightmapST.xy + unity_DynamicLightmapST.zw;</span></span>
<span class="line"><span style="color: #e1e4e8">#endif</span></span>
<span class="line"><span style="color: #e1e4e8">#ifndef LIGHTMAP_OFF</span></span>
<span class="line"><span style="color: #e1e4e8">    o.lmap.xy = v.texcoord1.xy * unity_LightmapST.xy + unity_LightmapST.zw;</span></span>
<span class="line"><span style="color: #e1e4e8">#endif</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">    // SH/ambient and vertex lights</span></span>
<span class="line"><span style="color: #e1e4e8">#ifdef LIGHTMAP_OFF</span></span>
<span class="line"><span style="color: #e1e4e8">#if UNITY_SHOULD_SAMPLE_SH</span></span>
<span class="line"><span style="color: #e1e4e8">    float3 shlight = ShadeSH9(float4(worldNormal, 1.0));</span></span>
<span class="line"><span style="color: #e1e4e8">    o.vlight = shlight;</span></span>
<span class="line"><span style="color: #e1e4e8">#else</span></span>
<span class="line"><span style="color: #e1e4e8">    o.vlight = 0.0;</span></span>
<span class="line"><span style="color: #e1e4e8">#endif</span></span>
<span class="line"><span style="color: #e1e4e8">#ifdef VERTEXLIGHT_ON</span></span>
<span class="line"><span style="color: #e1e4e8">    o.vlight += Shade4PointLights(</span></span>
<span class="line"><span style="color: #e1e4e8">            unity_4LightPosX0, unity_4LightPosY0, unity_4LightPosZ0,</span></span>
<span class="line"><span style="color: #e1e4e8">            unity_LightColor[0].rgb, unity_LightColor[1].rgb, unity_LightColor[2].rgb, unity_LightColor[3].rgb,</span></span>
<span class="line"><span style="color: #e1e4e8">            unity_4LightAtten0, worldPos, worldNormal);</span></span>
<span class="line"><span style="color: #e1e4e8">#endif // VERTEXLIGHT_ON</span></span>
<span class="line"><span style="color: #e1e4e8">#endif // LIGHTMAP_OFF</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">    TRANSFER_SHADOW(o); // pass shadow coordinates to pixel shader</span></span>
<span class="line"><span style="color: #e1e4e8">    UNITY_TRANSFER_FOG(o, o.pos); // pass fog coordinates to pixel shader</span></span>
<span class="line"><span style="color: #e1e4e8">    return o;</span></span>
<span class="line"><span style="color: #e1e4e8">}</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">// fragment shader</span></span>
<span class="line"><span style="color: #e1e4e8">fixed4 frag_surf(v2f_surf IN) : SV_Target{</span></span>
<span class="line"><span style="color: #e1e4e8">    // prepare and unpack data</span></span>
<span class="line"><span style="color: #e1e4e8">    Input surfIN;</span></span>
<span class="line"><span style="color: #e1e4e8">    UNITY_INITIALIZE_OUTPUT(Input,surfIN);</span></span>
<span class="line"><span style="color: #e1e4e8">    surfIN.uv_MainTex.x = 1.0;</span></span>
<span class="line"><span style="color: #e1e4e8">    surfIN.uv_MainTex = IN.pack0.xy;</span></span>
<span class="line"><span style="color: #e1e4e8">    float3 lightDir = _WorldSpaceLightPos0.xyz;</span></span>
<span class="line"><span style="color: #e1e4e8">#ifdef UNITY_COMPILER_HLSL</span></span>
<span class="line"><span style="color: #e1e4e8">    SurfaceOutput o = (SurfaceOutput)0;</span></span>
<span class="line"><span style="color: #e1e4e8">#else</span></span>
<span class="line"><span style="color: #e1e4e8">    SurfaceOutput o;</span></span>
<span class="line"><span style="color: #e1e4e8">#endif</span></span>
<span class="line"><span style="color: #e1e4e8">    o.Albedo = 0.0;</span></span>
<span class="line"><span style="color: #e1e4e8">    o.Emission = 0.0;</span></span>
<span class="line"><span style="color: #e1e4e8">    o.Specular = 0.0;</span></span>
<span class="line"><span style="color: #e1e4e8">    o.Alpha = 0.0;</span></span>
<span class="line"><span style="color: #e1e4e8">    o.Gloss = 0.0;</span></span>
<span class="line"><span style="color: #e1e4e8">    fixed3 normalWorldVertex = fixed3(0,0,1);</span></span>
<span class="line"><span style="color: #e1e4e8">    o.Normal = IN.worldNormal;</span></span>
<span class="line"><span style="color: #e1e4e8">    normalWorldVertex = IN.worldNormal;</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">    // call surface function</span></span>
<span class="line"><span style="color: #e1e4e8">    surf(surfIN, o);</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">    // compute lighting &#x26; shadowing factor</span></span>
<span class="line"><span style="color: #e1e4e8">    UNITY_LIGHT_ATTENUATION(atten, IN, worldPos)</span></span>
<span class="line"><span style="color: #e1e4e8">        fixed4 c = 0;</span></span>
<span class="line"><span style="color: #e1e4e8">#ifdef LIGHTMAP_OFF</span></span>
<span class="line"><span style="color: #e1e4e8">    c.rgb += o.Albedo * IN.vlight;</span></span>
<span class="line"><span style="color: #e1e4e8">#endif // LIGHTMAP_OFF</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">    // lightmaps</span></span>
<span class="line"><span style="color: #e1e4e8">#ifndef LIGHTMAP_OFF</span></span>
<span class="line"><span style="color: #e1e4e8">#ifdef DIRLIGHTMAP_OFF</span></span>
<span class="line"><span style="color: #e1e4e8">    // single lightmap</span></span>
<span class="line"><span style="color: #e1e4e8">    fixed4 lmtex = UNITY_SAMPLE_TEX2D(unity_Lightmap, IN.lmap.xy);</span></span>
<span class="line"><span style="color: #e1e4e8">    fixed3 lm = DecodeLightmap(lmtex);</span></span>
<span class="line"><span style="color: #e1e4e8">#elif DIRLIGHTMAP_COMBINED</span></span>
<span class="line"><span style="color: #e1e4e8">    // directional lightmaps</span></span>
<span class="line"><span style="color: #e1e4e8">    fixed4 lmtex = UNITY_SAMPLE_TEX2D(unity_Lightmap, IN.lmap.xy);</span></span>
<span class="line"><span style="color: #e1e4e8">    half3 lm = DecodeLightmap(lmtex);</span></span>
<span class="line"><span style="color: #e1e4e8">#elif DIRLIGHTMAP_SEPARATE</span></span>
<span class="line"><span style="color: #e1e4e8">    // directional with specular - no support</span></span>
<span class="line"><span style="color: #e1e4e8">    half4 lmtex = 0;</span></span>
<span class="line"><span style="color: #e1e4e8">    half3 lm = 0;</span></span>
<span class="line"><span style="color: #e1e4e8">#endif // DIRLIGHTMAP_OFF</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">#endif // LIGHTMAP_OFF</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">    // realtime lighting: call lighting function</span></span>
<span class="line"><span style="color: #e1e4e8">#ifdef LIGHTMAP_OFF</span></span>
<span class="line"><span style="color: #e1e4e8">    c += LightingToonRamp(o, lightDir, atten);</span></span>
<span class="line"><span style="color: #e1e4e8">#else</span></span>
<span class="line"><span style="color: #e1e4e8">    c.a = o.Alpha;</span></span>
<span class="line"><span style="color: #e1e4e8">#endif</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">#ifndef LIGHTMAP_OFF</span></span>
<span class="line"><span style="color: #e1e4e8">    // combine lightmaps with realtime shadows</span></span>
<span class="line"><span style="color: #e1e4e8">#ifdef SHADOWS_SCREEN</span></span>
<span class="line"><span style="color: #e1e4e8">#if defined(UNITY_NO_RGBM)</span></span>
<span class="line"><span style="color: #e1e4e8">    c.rgb += o.Albedo * min(lm, atten * 2);</span></span>
<span class="line"><span style="color: #e1e4e8">#else</span></span>
<span class="line"><span style="color: #e1e4e8">    c.rgb += o.Albedo * max(min(lm,(atten * 2)*lmtex.rgb), lm*atten);</span></span>
<span class="line"><span style="color: #e1e4e8">#endif</span></span>
<span class="line"><span style="color: #e1e4e8">#else // SHADOWS_SCREEN</span></span>
<span class="line"><span style="color: #e1e4e8">    c.rgb += o.Albedo * lm;</span></span>
<span class="line"><span style="color: #e1e4e8">#endif // SHADOWS_SCREEN</span></span>
<span class="line"><span style="color: #e1e4e8">#endif // LIGHTMAP_OFF</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">#ifndef DYNAMICLIGHTMAP_OFF</span></span>
<span class="line"><span style="color: #e1e4e8">    fixed4 dynlmtex = UNITY_SAMPLE_TEX2D(unity_DynamicLightmap, IN.lmap.zw);</span></span>
<span class="line"><span style="color: #e1e4e8">    c.rgb += o.Albedo * DecodeRealtimeLightmap(dynlmtex);</span></span>
<span class="line"><span style="color: #e1e4e8">#endif</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">    UNITY_APPLY_FOG(IN.fogCoord, c); // apply fog</span></span>
<span class="line"><span style="color: #e1e4e8">    UNITY_OPAQUE_ALPHA(c.a);</span></span>
<span class="line"><span style="color: #e1e4e8">    return c;</span></span>
<span class="line"><span style="color: #e1e4e8">}</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">//////////////////////////////////////////////////////////////////////////////</span></span>
<span class="line"><span style="color: #e1e4e8">// outline</span></span>
<span class="line"><span style="color: #e1e4e8">//////////////////////////////////////////////////////////////////////////////</span></span>
<span class="line"><span style="color: #e1e4e8">#include "UnityCG.cginc"</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">struct appdata {</span></span>
<span class="line"><span style="color: #e1e4e8">    float4 vertex : POSITION;</span></span>
<span class="line"><span style="color: #e1e4e8">    float3 normal : NORMAL;</span></span>
<span class="line"><span style="color: #e1e4e8">};</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">struct v2f {</span></span>
<span class="line"><span style="color: #e1e4e8">    float4 pos : SV_POSITION;</span></span>
<span class="line"><span style="color: #e1e4e8">    UNITY_FOG_COORDS(0)</span></span>
<span class="line"><span style="color: #e1e4e8">        fixed4 color : COLOR;</span></span>
<span class="line"><span style="color: #e1e4e8">};</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">uniform float _Outline;</span></span>
<span class="line"><span style="color: #e1e4e8">uniform float4 _OutlineColor;</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">v2f vert(appdata v) {</span></span>
<span class="line"><span style="color: #e1e4e8">    v2f o;</span></span>
<span class="line"><span style="color: #e1e4e8">    o.pos = mul(UNITY_MATRIX_MVP, v.vertex);</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">    float3 norm = normalize(mul((float3x3)UNITY_MATRIX_IT_MV, v.normal));</span></span>
<span class="line"><span style="color: #e1e4e8">    float2 offset = TransformViewToProjection(norm.xy);</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">    o.pos.xy += offset * o.pos.z * _Outline;</span></span>
<span class="line"><span style="color: #e1e4e8">    o.color = _OutlineColor;</span></span>
<span class="line"><span style="color: #e1e4e8">    UNITY_TRANSFER_FOG(o, o.pos);</span></span>
<span class="line"><span style="color: #e1e4e8">    return o;</span></span>
<span class="line"><span style="color: #e1e4e8">}</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">fixed4 frag(v2f i) : SV_Target</span></span>
<span class="line"><span style="color: #e1e4e8">{</span></span>
<span class="line"><span style="color: #e1e4e8">    UNITY_APPLY_FOG(i.fogCoord, i.color);</span></span>
<span class="line"><span style="color: #e1e4e8">    return i.color;</span></span>
<span class="line"><span style="color: #e1e4e8">}</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">改造準備完了。</span></span>
<span class="line"><span style="color: #e1e4e8">改造した</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">alpha blending</span></span>
<span class="line"><span style="color: #e1e4e8">影と陰の合成とRampの適用法を改造</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">なかなか難しい。</span></span>
<span class="line"><span style="color: #e1e4e8">顔は別光源にして影が落ちないようにする必要があるね。</span></span>
<span class="line"><span style="color: #e1e4e8">顔にDiffuseは必要ない。</span></span>
<span class="line"><span style="color: #e1e4e8">#include "HLSLSupport.cginc"</span></span>
<span class="line"><span style="color: #e1e4e8">#include "UnityShaderVariables.cginc"</span></span>
<span class="line"><span style="color: #e1e4e8">// Surface shader code generated based on:</span></span>
<span class="line"><span style="color: #e1e4e8">// writes to per-pixel normal: no</span></span>
<span class="line"><span style="color: #e1e4e8">// writes to emission: no</span></span>
<span class="line"><span style="color: #e1e4e8">// needs world space reflection vector: no</span></span>
<span class="line"><span style="color: #e1e4e8">// needs world space normal vector: no</span></span>
<span class="line"><span style="color: #e1e4e8">// needs screen space position: no</span></span>
<span class="line"><span style="color: #e1e4e8">// needs world space position: no</span></span>
<span class="line"><span style="color: #e1e4e8">// needs view direction: no</span></span>
<span class="line"><span style="color: #e1e4e8">// needs world space view direction: no</span></span>
<span class="line"><span style="color: #e1e4e8">// needs world space position for lighting: no</span></span>
<span class="line"><span style="color: #e1e4e8">// needs world space view direction for lighting: no</span></span>
<span class="line"><span style="color: #e1e4e8">// needs world space view direction for lightmaps: no</span></span>
<span class="line"><span style="color: #e1e4e8">// needs vertex color: no</span></span>
<span class="line"><span style="color: #e1e4e8">// needs VFACE: no</span></span>
<span class="line"><span style="color: #e1e4e8">// passes tangent-to-world matrix to pixel shader: no</span></span>
<span class="line"><span style="color: #e1e4e8">// reads from normal: no</span></span>
<span class="line"><span style="color: #e1e4e8">// 1 texcoords actually used</span></span>
<span class="line"><span style="color: #e1e4e8">//   float2 _MainTex</span></span>
<span class="line"><span style="color: #e1e4e8">#define UNITY_PASS_FORWARDBASE</span></span>
<span class="line"><span style="color: #e1e4e8">#include "UnityCG.cginc"</span></span>
<span class="line"><span style="color: #e1e4e8">#include "Lighting.cginc"</span></span>
<span class="line"><span style="color: #e1e4e8">#include "AutoLight.cginc"</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">#define INTERNAL_DATA</span></span>
<span class="line"><span style="color: #e1e4e8">#define WorldReflectionVector(data,normal) data.worldRefl</span></span>
<span class="line"><span style="color: #e1e4e8">#define WorldNormalVector(data,normal) normal</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">// Original surface shader snippet:</span></span>
<span class="line"><span style="color: #e1e4e8">#line 10 ""</span></span>
<span class="line"><span style="color: #e1e4e8">#ifdef DUMMY_PREPROCESSOR_TO_WORK_AROUND_HLSL_COMPILER_LINE_HANDLING</span></span>
<span class="line"><span style="color: #e1e4e8">#endif</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">//#pragma surface surf ToonRamp</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">sampler2D _Ramp;</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">// custom lighting function that uses a texture ramp based</span></span>
<span class="line"><span style="color: #e1e4e8">// on angle between light direction and normal</span></span>
<span class="line"><span style="color: #e1e4e8">//#pragma lighting ToonRamp exclude_path:prepass</span></span>
<span class="line"><span style="color: #e1e4e8">inline half3 LightingToonRamp(half3 rgb, half diffuse, half atten)</span></span>
<span class="line"><span style="color: #e1e4e8">{</span></span>
<span class="line"><span style="color: #e1e4e8">    float d = min(diffuse, atten);</span></span>
<span class="line"><span style="color: #e1e4e8">    float3 ramp = tex2D(_Ramp, float2(d, d));</span></span>
<span class="line"><span style="color: #e1e4e8">    return rgb * ramp;</span></span>
<span class="line"><span style="color: #e1e4e8">}</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">sampler2D _MainTex;</span></span>
<span class="line"><span style="color: #e1e4e8">float4 _Color;</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">struct Input {</span></span>
<span class="line"><span style="color: #e1e4e8">    float2 uv_MainTex : TEXCOORD0;</span></span>
<span class="line"><span style="color: #e1e4e8">};</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">void surf(Input IN, inout SurfaceOutput o) {</span></span>
<span class="line"><span style="color: #e1e4e8">    half4 c = tex2D(_MainTex, IN.uv_MainTex) * _Color;</span></span>
<span class="line"><span style="color: #e1e4e8">    o.Albedo = c.rgb;</span></span>
<span class="line"><span style="color: #e1e4e8">    o.Alpha = c.a;</span></span>
<span class="line"><span style="color: #e1e4e8">}</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">// vertex-to-fragment interpolation data</span></span>
<span class="line"><span style="color: #e1e4e8">// no lightmaps:</span></span>
<span class="line"><span style="color: #e1e4e8">#ifdef LIGHTMAP_OFF</span></span>
<span class="line"><span style="color: #e1e4e8">struct v2f_surf {</span></span>
<span class="line"><span style="color: #e1e4e8">    float4 pos : SV_POSITION;</span></span>
<span class="line"><span style="color: #e1e4e8">    float2 pack0 : TEXCOORD0; // _MainTex</span></span>
<span class="line"><span style="color: #e1e4e8">    half3 worldNormal : TEXCOORD1;</span></span>
<span class="line"><span style="color: #e1e4e8">    fixed3 vlight : TEXCOORD2; // ambient/SH/vertexlights</span></span>
<span class="line"><span style="color: #e1e4e8">    SHADOW_COORDS(3)</span></span>
<span class="line"><span style="color: #e1e4e8">        UNITY_FOG_COORDS(4)</span></span>
<span class="line"><span style="color: #e1e4e8">#if SHADER_TARGET >= 30</span></span>
<span class="line"><span style="color: #e1e4e8">        float4 lmap : TEXCOORD5;</span></span>
<span class="line"><span style="color: #e1e4e8">#endif</span></span>
<span class="line"><span style="color: #e1e4e8">};</span></span>
<span class="line"><span style="color: #e1e4e8">#endif</span></span>
<span class="line"><span style="color: #e1e4e8">// with lightmaps:</span></span>
<span class="line"><span style="color: #e1e4e8">#ifndef LIGHTMAP_OFF</span></span>
<span class="line"><span style="color: #e1e4e8">struct v2f_surf {</span></span>
<span class="line"><span style="color: #e1e4e8">    float4 pos : SV_POSITION;</span></span>
<span class="line"><span style="color: #e1e4e8">    float2 pack0 : TEXCOORD0; // _MainTex</span></span>
<span class="line"><span style="color: #e1e4e8">    half3 worldNormal : TEXCOORD1;</span></span>
<span class="line"><span style="color: #e1e4e8">    float4 lmap : TEXCOORD2;</span></span>
<span class="line"><span style="color: #e1e4e8">    SHADOW_COORDS(3)</span></span>
<span class="line"><span style="color: #e1e4e8">        UNITY_FOG_COORDS(4)</span></span>
<span class="line"><span style="color: #e1e4e8">#ifdef DIRLIGHTMAP_COMBINED</span></span>
<span class="line"><span style="color: #e1e4e8">        fixed3 tSpace0 : TEXCOORD5;</span></span>
<span class="line"><span style="color: #e1e4e8">    fixed3 tSpace1 : TEXCOORD6;</span></span>
<span class="line"><span style="color: #e1e4e8">    fixed3 tSpace2 : TEXCOORD7;</span></span>
<span class="line"><span style="color: #e1e4e8">#endif</span></span>
<span class="line"><span style="color: #e1e4e8">};</span></span>
<span class="line"><span style="color: #e1e4e8">#endif</span></span>
<span class="line"><span style="color: #e1e4e8">float4 _MainTex_ST;</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">// vertex shader</span></span>
<span class="line"><span style="color: #e1e4e8">v2f_surf vert_surf(appdata_full v) {</span></span>
<span class="line"><span style="color: #e1e4e8">    v2f_surf o;</span></span>
<span class="line"><span style="color: #e1e4e8">    UNITY_INITIALIZE_OUTPUT(v2f_surf, o);</span></span>
<span class="line"><span style="color: #e1e4e8">    o.pos = mul(UNITY_MATRIX_MVP, v.vertex);</span></span>
<span class="line"><span style="color: #e1e4e8">    o.pack0.xy = TRANSFORM_TEX(v.texcoord, _MainTex);</span></span>
<span class="line"><span style="color: #e1e4e8">    float3 worldPos = mul(_Object2World, v.vertex).xyz;</span></span>
<span class="line"><span style="color: #e1e4e8">    fixed3 worldNormal = UnityObjectToWorldNormal(v.normal);</span></span>
<span class="line"><span style="color: #e1e4e8">#if !defined(LIGHTMAP_OFF) &#x26;&#x26; defined(DIRLIGHTMAP_COMBINED)</span></span>
<span class="line"><span style="color: #e1e4e8">    fixed3 worldTangent = UnityObjectToWorldDir(v.tangent.xyz);</span></span>
<span class="line"><span style="color: #e1e4e8">    fixed tangentSign = v.tangent.w * unity_WorldTransformParams.w;</span></span>
<span class="line"><span style="color: #e1e4e8">    fixed3 worldBinormal = cross(worldNormal, worldTangent) * tangentSign;</span></span>
<span class="line"><span style="color: #e1e4e8">#endif</span></span>
<span class="line"><span style="color: #e1e4e8">#if !defined(LIGHTMAP_OFF) &#x26;&#x26; defined(DIRLIGHTMAP_COMBINED)</span></span>
<span class="line"><span style="color: #e1e4e8">    o.tSpace0 = fixed3(worldTangent.x, worldBinormal.x, worldNormal.x);</span></span>
<span class="line"><span style="color: #e1e4e8">    o.tSpace1 = fixed3(worldTangent.y, worldBinormal.y, worldNormal.y);</span></span>
<span class="line"><span style="color: #e1e4e8">    o.tSpace2 = fixed3(worldTangent.z, worldBinormal.z, worldNormal.z);</span></span>
<span class="line"><span style="color: #e1e4e8">#endif</span></span>
<span class="line"><span style="color: #e1e4e8">    o.worldNormal = worldNormal;</span></span>
<span class="line"><span style="color: #e1e4e8">#ifndef DYNAMICLIGHTMAP_OFF</span></span>
<span class="line"><span style="color: #e1e4e8">    o.lmap.zw = v.texcoord2.xy * unity_DynamicLightmapST.xy + unity_DynamicLightmapST.zw;</span></span>
<span class="line"><span style="color: #e1e4e8">#endif</span></span>
<span class="line"><span style="color: #e1e4e8">#ifndef LIGHTMAP_OFF</span></span>
<span class="line"><span style="color: #e1e4e8">    o.lmap.xy = v.texcoord1.xy * unity_LightmapST.xy + unity_LightmapST.zw;</span></span>
<span class="line"><span style="color: #e1e4e8">#endif</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">    // SH/ambient and vertex lights</span></span>
<span class="line"><span style="color: #e1e4e8">#ifdef LIGHTMAP_OFF</span></span>
<span class="line"><span style="color: #e1e4e8">#if UNITY_SHOULD_SAMPLE_SH</span></span>
<span class="line"><span style="color: #e1e4e8">    float3 shlight = ShadeSH9(float4(worldNormal, 1.0));</span></span>
<span class="line"><span style="color: #e1e4e8">    o.vlight = shlight;</span></span>
<span class="line"><span style="color: #e1e4e8">#else</span></span>
<span class="line"><span style="color: #e1e4e8">    o.vlight = 0.0;</span></span>
<span class="line"><span style="color: #e1e4e8">#endif</span></span>
<span class="line"><span style="color: #e1e4e8">#ifdef VERTEXLIGHT_ON</span></span>
<span class="line"><span style="color: #e1e4e8">    o.vlight += Shade4PointLights(</span></span>
<span class="line"><span style="color: #e1e4e8">            unity_4LightPosX0, unity_4LightPosY0, unity_4LightPosZ0,</span></span>
<span class="line"><span style="color: #e1e4e8">            unity_LightColor[0].rgb, unity_LightColor[1].rgb, unity_LightColor[2].rgb, unity_LightColor[3].rgb,</span></span>
<span class="line"><span style="color: #e1e4e8">            unity_4LightAtten0, worldPos, worldNormal);</span></span>
<span class="line"><span style="color: #e1e4e8">#endif // VERTEXLIGHT_ON</span></span>
<span class="line"><span style="color: #e1e4e8">#endif // LIGHTMAP_OFF</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">    TRANSFER_SHADOW(o); // pass shadow coordinates to pixel shader</span></span>
<span class="line"><span style="color: #e1e4e8">    UNITY_TRANSFER_FOG(o, o.pos); // pass fog coordinates to pixel shader</span></span>
<span class="line"><span style="color: #e1e4e8">    return o;</span></span>
<span class="line"><span style="color: #e1e4e8">}</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">// fragment shader</span></span>
<span class="line"><span style="color: #e1e4e8">fixed4 frag_surf(v2f_surf IN) : SV_Target{</span></span>
<span class="line"><span style="color: #e1e4e8">    // prepare and unpack data</span></span>
<span class="line"><span style="color: #e1e4e8">    Input surfIN;</span></span>
<span class="line"><span style="color: #e1e4e8">    UNITY_INITIALIZE_OUTPUT(Input,surfIN);</span></span>
<span class="line"><span style="color: #e1e4e8">    surfIN.uv_MainTex.x = 1.0;</span></span>
<span class="line"><span style="color: #e1e4e8">    surfIN.uv_MainTex = IN.pack0.xy;</span></span>
<span class="line"><span style="color: #e1e4e8">    float3 lightDir = _WorldSpaceLightPos0.xyz;</span></span>
<span class="line"><span style="color: #e1e4e8">#ifdef UNITY_COMPILER_HLSL</span></span>
<span class="line"><span style="color: #e1e4e8">    SurfaceOutput o = (SurfaceOutput)0;</span></span>
<span class="line"><span style="color: #e1e4e8">#else</span></span>
<span class="line"><span style="color: #e1e4e8">    SurfaceOutput o;</span></span>
<span class="line"><span style="color: #e1e4e8">#endif</span></span>
<span class="line"><span style="color: #e1e4e8">    o.Albedo = 0.0;</span></span>
<span class="line"><span style="color: #e1e4e8">    o.Emission = 0.0;</span></span>
<span class="line"><span style="color: #e1e4e8">    o.Specular = 0.0;</span></span>
<span class="line"><span style="color: #e1e4e8">    o.Alpha = 0.0;</span></span>
<span class="line"><span style="color: #e1e4e8">    o.Gloss = 0.0;</span></span>
<span class="line"><span style="color: #e1e4e8">    fixed3 normalWorldVertex = fixed3(0,0,1);</span></span>
<span class="line"><span style="color: #e1e4e8">    o.Normal = IN.worldNormal;</span></span>
<span class="line"><span style="color: #e1e4e8">    normalWorldVertex = IN.worldNormal;</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">    // call surface function</span></span>
<span class="line"><span style="color: #e1e4e8">    surf(surfIN, o);</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">    // compute lighting &#x26; shadowing factor</span></span>
<span class="line"><span style="color: #e1e4e8">    UNITY_LIGHT_ATTENUATION(atten, IN, worldPos)</span></span>
<span class="line"><span style="color: #e1e4e8">        fixed4 c = 0;</span></span>
<span class="line"><span style="color: #e1e4e8">#ifdef LIGHTMAP_OFF</span></span>
<span class="line"><span style="color: #e1e4e8">    c.rgb += o.Albedo * IN.vlight;</span></span>
<span class="line"><span style="color: #e1e4e8">#endif // LIGHTMAP_OFF</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">    // lightmaps</span></span>
<span class="line"><span style="color: #e1e4e8">#ifndef LIGHTMAP_OFF</span></span>
<span class="line"><span style="color: #e1e4e8">#ifdef DIRLIGHTMAP_OFF</span></span>
<span class="line"><span style="color: #e1e4e8">    // single lightmap</span></span>
<span class="line"><span style="color: #e1e4e8">    fixed4 lmtex = UNITY_SAMPLE_TEX2D(unity_Lightmap, IN.lmap.xy);</span></span>
<span class="line"><span style="color: #e1e4e8">    fixed3 lm = DecodeLightmap(lmtex);</span></span>
<span class="line"><span style="color: #e1e4e8">#elif DIRLIGHTMAP_COMBINED</span></span>
<span class="line"><span style="color: #e1e4e8">    // directional lightmaps</span></span>
<span class="line"><span style="color: #e1e4e8">    fixed4 lmtex = UNITY_SAMPLE_TEX2D(unity_Lightmap, IN.lmap.xy);</span></span>
<span class="line"><span style="color: #e1e4e8">    half3 lm = DecodeLightmap(lmtex);</span></span>
<span class="line"><span style="color: #e1e4e8">#elif DIRLIGHTMAP_SEPARATE</span></span>
<span class="line"><span style="color: #e1e4e8">    // directional with specular - no support</span></span>
<span class="line"><span style="color: #e1e4e8">    half4 lmtex = 0;</span></span>
<span class="line"><span style="color: #e1e4e8">    half3 lm = 0;</span></span>
<span class="line"><span style="color: #e1e4e8">#endif // DIRLIGHTMAP_OFF</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">#endif // LIGHTMAP_OFF</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">    // realtime lighting: call lighting function</span></span>
<span class="line"><span style="color: #e1e4e8">    c.a = o.Alpha;</span></span>
<span class="line"><span style="color: #e1e4e8">#ifdef LIGHTMAP_OFF</span></span>
<span class="line"><span style="color: #e1e4e8">#ifndef USING_DIRECTIONAL_LIGHT</span></span>
<span class="line"><span style="color: #e1e4e8">    lightDir = normalize(lightDir);</span></span>
<span class="line"><span style="color: #e1e4e8">#endif</span></span>
<span class="line"><span style="color: #e1e4e8">    half diffuse = max(0, dot(o.Normal, lightDir));</span></span>
<span class="line"><span style="color: #e1e4e8">    c.rgb += LightingToonRamp(o.Albedo, diffuse, atten);</span></span>
<span class="line"><span style="color: #e1e4e8">#else</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">    // combine lightmaps with realtime shadows</span></span>
<span class="line"><span style="color: #e1e4e8">#ifdef SHADOWS_SCREEN</span></span>
<span class="line"><span style="color: #e1e4e8">#if defined(UNITY_NO_RGBM)</span></span>
<span class="line"><span style="color: #e1e4e8">    c.rgb += o.Albedo * min(lm, atten * 2);</span></span>
<span class="line"><span style="color: #e1e4e8">#else</span></span>
<span class="line"><span style="color: #e1e4e8">    c.rgb += o.Albedo * max(min(lm,(atten * 2)*lmtex.rgb), lm*atten);</span></span>
<span class="line"><span style="color: #e1e4e8">#endif</span></span>
<span class="line"><span style="color: #e1e4e8">#else // SHADOWS_SCREEN</span></span>
<span class="line"><span style="color: #e1e4e8">    c.rgb += o.Albedo * lm;</span></span>
<span class="line"><span style="color: #e1e4e8">#endif // SHADOWS_SCREEN</span></span>
<span class="line"><span style="color: #e1e4e8">#endif // LIGHTMAP_OFF</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">#ifndef DYNAMICLIGHTMAP_OFF</span></span>
<span class="line"><span style="color: #e1e4e8">    fixed4 dynlmtex = UNITY_SAMPLE_TEX2D(unity_DynamicLightmap, IN.lmap.zw);</span></span>
<span class="line"><span style="color: #e1e4e8">    c.rgb += o.Albedo * DecodeRealtimeLightmap(dynlmtex);</span></span>
<span class="line"><span style="color: #e1e4e8">#endif</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">    UNITY_APPLY_FOG(IN.fogCoord, c); // apply fog</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">    return c;</span></span>
<span class="line"><span style="color: #e1e4e8">}</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">//////////////////////////////////////////////////////////////////////////////</span></span>
<span class="line"><span style="color: #e1e4e8">// outline</span></span>
<span class="line"><span style="color: #e1e4e8">//////////////////////////////////////////////////////////////////////////////</span></span>
<span class="line"><span style="color: #e1e4e8">#include "UnityCG.cginc"</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">struct appdata {</span></span>
<span class="line"><span style="color: #e1e4e8">    float4 vertex : POSITION;</span></span>
<span class="line"><span style="color: #e1e4e8">    float3 normal : NORMAL;</span></span>
<span class="line"><span style="color: #e1e4e8">};</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">struct v2f {</span></span>
<span class="line"><span style="color: #e1e4e8">    float4 pos : SV_POSITION;</span></span>
<span class="line"><span style="color: #e1e4e8">    UNITY_FOG_COORDS(0)</span></span>
<span class="line"><span style="color: #e1e4e8">        fixed4 color : COLOR;</span></span>
<span class="line"><span style="color: #e1e4e8">};</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">uniform float _Outline;</span></span>
<span class="line"><span style="color: #e1e4e8">uniform float4 _OutlineColor;</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">v2f vert(appdata v) {</span></span>
<span class="line"><span style="color: #e1e4e8">    v2f o;</span></span>
<span class="line"><span style="color: #e1e4e8">    o.pos = mul(UNITY_MATRIX_MVP, v.vertex);</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">    float3 norm = normalize(mul((float3x3)UNITY_MATRIX_IT_MV, v.normal));</span></span>
<span class="line"><span style="color: #e1e4e8">    float2 offset = TransformViewToProjection(norm.xy);</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">    o.pos.xy += offset * min(1, o.pos.z) * _Outline; // 太さ調整</span></span>
<span class="line"><span style="color: #e1e4e8">    o.color = _OutlineColor;</span></span>
<span class="line"><span style="color: #e1e4e8">    UNITY_TRANSFER_FOG(o, o.pos);</span></span>
<span class="line"><span style="color: #e1e4e8">    return o;</span></span>
<span class="line"><span style="color: #e1e4e8">}</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span>
<span class="line"><span style="color: #e1e4e8">fixed4 frag(v2f i) : SV_Target</span></span>
<span class="line"><span style="color: #e1e4e8">{</span></span>
<span class="line"><span style="color: #e1e4e8">    UNITY_APPLY_FOG(i.fogCoord, i.color);</span></span>
<span class="line"><span style="color: #e1e4e8">    return i.color;</span></span>
<span class="line"><span style="color: #e1e4e8">}</span></span>
<span class="line"><span style="color: #e1e4e8"></span></span></code></pre>

				</div>
			</article>
		</main>
		<footer class="footer astro-SZ7XMLTE">
    <nav class="nav astro-SZ7XMLTE">
        <div class="astro-SZ7XMLTE">2021  &copy; Copyright notice |  <a href="https://github.com/one-aalam/astro-ink" title="三次元日誌(astro)'s Github URL'" class="astro-SZ7XMLTE">三次元日誌(astro)</a>
        <script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();</script><astro-island uid="1QEdto" component-url="/_astro/ModeLabel.e3ff75e7.js" component-export="default" renderer-url="/_astro/client.cb726945.js" props="{&quot;class&quot;:[0,&quot;astro-SZ7XMLTE&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;ModeLabel&quot;,&quot;value&quot;:true}" await-children=""><span slot="dark" data-svelte-h="svelte-14ov3lc">(dark)</span></astro-island> theme on <a href="https://astro.build/" class="astro-SZ7XMLTE">Astro</a></div>
        <astro-island uid="1I86to" component-url="/_astro/NetlifyIdentity.94b8edb0.js" component-export="default" renderer-url="/_astro/client.cb726945.js" props="{&quot;class&quot;:[0,&quot;astro-SZ7XMLTE&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;NetlifyIdentity&quot;,&quot;value&quot;:true}"></astro-island>
    </nav>
</footer>
	</body></html>