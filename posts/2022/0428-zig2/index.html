<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="generator" content="Nikola (getnikola.com)">
<meta name="viewport" content="width=device-width">
<script src="../../../assets/js/all-nocdn.js"></script><title>0428-zig2 | ä¸‰æ¬¡å…ƒæ—¥èªŒ</title>
<link href="../../../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
</head>
<body>
    <h1 id="brand">
        <a href="../../../" title="ä¸‰æ¬¡å…ƒæ—¥èªŒ" rel="home">
            <span id="blog-title">ä¸‰æ¬¡å…ƒæ—¥èªŒ</span>
        </a>
    </h1>

    <nav id="menu"><ul>
<li><a href="../../../archive.html">Archives</a></li>
<li><a href="../../../categories/index.html">Tags</a></li>
<li><a href="../../../rss.xml">RSS feed</a></li>
<li><a href="../../../about">About</a></li>
<li><a href="../../../books">MemoBooks</a></li>

            
            
            
        </ul></nav><hr>
<main id="content"><h1 class="p-name entry-title" itemprop="headline name">
    <h1 class="p-name entry-title" itemprop="headline name">
    <a href="." class="u-url">0428-zig2
    </a>
</h1>
<ul itemprop="keywords" class="tags">
<li>
        <time datetime="2022-04-28T00:00:00+09:00" title="2022-04-28">2022-04-28</time>
</li>
    <li><a class="tag p-category" href="../../../categories/zig/" rel="tag">zig</a></li>
</ul>
</h1>

<h2>zig ãã®2</h2>
<p>å†åº¦ä½¿ã£ã¦ã¿ã‚‹ã¹ãç’°å¢ƒæ•´å‚™ã‹ã‚‰ã€‚</p>
<h3>zls ã® master ã‚’ä½¿ã†</h3>
<p>ã©ã†ã‚„ã‚‰ @import std ä»¥å¤–ãŒã†ã¾ãå‹•ã‹ãªã„ã‚‰ã—ãã€ æœ€æ–°ç‰ˆã‚’è©¦ã—ã¦ã¿ãŸã„ã€‚</p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">glfw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">@</span><span class="n">import</span><span class="p">(</span><span class="s2">"glfw"</span><span class="p">);</span><span class="w"></span>
</pre></div>

<p><a href="https://ziglang.org/download/">https://ziglang.org/download/</a> ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã¹ã—ã€‚</p>
<h3>ã„ã¡ãŠã† build ã‚’ è©¦ã¿ãŸ</h3>
<p>zls ã®æœ€æ–°åˆ¤ã‚’è©¦ã™ã«ã¯ã€ zig ã®æœ€æ–°ç‰ˆ(0.9.1ã˜ã‚ƒãªãã¦master)ãŒå¿…è¦ã€‚
zig ã®ãƒ“ãƒ«ãƒ‰ã«ã¯ static build ã® llvm-13 ãŒå¿…è¦ã€‚
Windows ã§ã¯é “æŒ«ã—ãŸã€‚
ã—ã‹ã—ã€æœ€è¿‘ gentoo ã‚’è‚²æˆã—ã¦ã„ã‚‹ã®ã§ã“ã£ã¡ã§ã‚„ã£ã¦ã¿ã‚‹ã€‚</p>
<div class="code"><pre class="code literal-block">cmake -B build -S .
</pre></div>

<p>ã—ã¦ã¿ãŸãŒã€æœ€å¾Œã«ãƒªãƒ³ã‚¯ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹ã€‚</p>
<div class="code"><pre class="code literal-block">undefined reference to clang::SourceManager::getFilename
</pre></div>

<p>ã—ã‹ã—ã€ gentoo ã® emerge ã« <code>dev-lang/zig-9999</code> ãŒã‚ã£ãŸã€‚
ã“ã‚Œã‚’ä½¿ã£ã¦ zls ãŒãƒ“ãƒ«ãƒ‰ã§ããŸã€‚
<code>glfw</code> ã®ã‚¤ãƒ³ãƒ†ãƒªã‚»ãƒ³ã‚¹ã‚‚å‹•ä½œã—ãŸã€‚</p>
<h3>zig master(0.10) ãŒå¤‰ã‚ã£ã¦ã„ã¦ zls ã¨ gyro ã®ãƒ“ãƒ«ãƒ‰ãŒé€šã‚‰ãªã„ã€‚</h3>
<ul>
<li><a href="https://github.com/ziglang/zig/commit/a0a2ce92ca129d28e22c63f7bace1672c43776b5">https://github.com/ziglang/zig/commit/a0a2ce92ca129d28e22c63f7bace1672c43776b5</a></li>
</ul>
<h4>zls</h4>
<ul>
<li><a href="https://github.com/zigtools/zls/pull/481">https://github.com/zigtools/zls/pull/481</a></li>
</ul>
<h4>gyro</h4>
<p><code>std.ChildProcess.init</code> ã®ã¨ã“ã‚ã€‚</p>
<h3>OpenGL ã‚„ã£ã¦ã</h3>
<ul>
<li><a href="https://github.com/hexops/mach-glfw">https://github.com/hexops/mach-glfw</a></li>
</ul>
<p>ã‚’èµ·ç‚¹ã«ã‚„ã£ã¦ã¿ã‚‹ã€‚
å‰å›ã¯ <code>@cImport</code> ã‚’ä½¿ã£ã¦ã„ã‚‹ã‚µãƒ³ãƒ—ãƒ«ã§ã‚¤ãƒ³ãƒ†ãƒªã‚»ãƒ³ã‚¹åŠ¹ã‹ãªãã¦ã€ç¶šã‹ãªã‹ã£ãŸã€‚
<code>@import</code> + <code>æœ€æ–°ç‰ˆzls</code> ã§é€²ã‚ã¦ã„ã‘ã°æ…£ã‚Œã‚‹ã‹ãªã€‚</p>
<h3>gyro ã®ä½¿ã„ã‹ãŸ</h3>
<p><code>202204</code> ç¾åœ¨ã ã¨ã€ gyro ã§ import ã™ã‚‹ã¨ zls ãŒè§£æ±ºã§ããªã„ã‚ˆã†ãªæ°—ãŒã™ã‚‹ã€‚</p>
<h4>add package</h4>
<div class="code"><pre class="code literal-block">gyro add --src github hexops/mach-glfw --root src/main.zig --alias glfw
</pre></div>

<h4>dep package</h4>
<div class="code"><pre class="code literal-block">gyro add --build-dep --src github hexops/mach-glfw --root build.zig --alias build-glfw
</pre></div>

<h4>use package</h4>
<div class="code"><pre class="code literal-block"><span class="kr">const</span><span class="w"> </span><span class="n">glfw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">@import</span><span class="p">(</span><span class="s">"glfw"</span><span class="p">);</span><span class="w"></span>
</pre></div>

<h4>build.zig</h4>
<div class="code"><pre class="code literal-block"><span class="kr">const</span><span class="w"> </span><span class="n">pkgs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">@import</span><span class="p">(</span><span class="s">"deps.zig"</span><span class="p">).</span><span class="n">pkgs</span><span class="p">;</span><span class="w"></span>
<span class="kr">const</span><span class="w"> </span><span class="n">glfw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">@import</span><span class="p">(</span><span class="s">"build-glfw"</span><span class="p">);</span><span class="w"></span>

<span class="kr">pub</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="n">build</span><span class="p">(</span><span class="n">b</span><span class="o">:</span><span class="w"> </span><span class="o">*</span><span class="n">Builder</span><span class="p">)</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="p">...</span><span class="w"></span>

<span class="w">    </span><span class="n">exe</span><span class="p">.</span><span class="n">addPackage</span><span class="p">(</span><span class="n">pkgs</span><span class="p">.</span><span class="n">glfw</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">glfw</span><span class="p">.</span><span class="n">link</span><span class="p">(</span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">exe</span><span class="p">,</span><span class="w"> </span><span class="p">.{});</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>

<h4>zgl</h4>
<p>libepoxy</p>
<div class="code"><pre class="code literal-block">gyro add --src github ziglibs/zgl --root zgl.zig --alias gl
</pre></div>

<hr>
<ul class="pager hidden-print">
<li class="previous">
        <a href="../0419-gentoo/" rel="prev" title="0419-gentoo">
            0419-gentoo ğŸ‘ˆ
        </a>
    </li>
    <li style="flex-grow: 1">
    <li class="next">
        <a href="../0507-bdist_wheel/" rel="next" title="0507-bdist_wheel">
            ğŸ‘‰ 0507-bdist_wheel
        </a>
    </li>
</ul></main><footer id="footer"><p>
            Powered by
            <a href="https://getnikola.com" rel="nofollow">Nikola</a>
        </p>
    </footer>
</body>
</html>
