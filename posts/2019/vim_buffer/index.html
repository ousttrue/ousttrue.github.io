<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="generator" content="Nikola (getnikola.com)">
<meta name="viewport" content="width=device-width">
<script src="../../../assets/js/all-nocdn.js"></script><title>vim の Buffer 操作のメモ | 三次元日誌</title>
<link href="../../../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
</head>
<body>
    <h1 id="brand">
        <a href="../../../" title="三次元日誌" rel="home">
            <span id="blog-title">三次元日誌</span>
        </a>
    </h1>

    <nav id="menu"><ul>
<li><a href="../../../archive.html">Archives</a></li>
<li><a href="../../../categories/index.html">Tags</a></li>
<li><a href="../../../rss.xml">RSS feed</a></li>
<li><a href="../../../about">About</a></li>
<li><a href="../../../books">MemoBooks</a></li>

            
            
            
        </ul></nav><hr>
<main id="content"><h1 class="p-name entry-title" itemprop="headline name">
    <h1 class="p-name entry-title" itemprop="headline name">
    <a href="." class="u-url">vim の Buffer 操作のメモ
    </a>
</h1>
<ul itemprop="keywords" class="tags">
<li>
        <time datetime="2019-04-23T14:30:07+09:00" title="2019-04-23">2019-04-23</time>
</li>
    <li><a class="tag p-category" href="../../../categories/vim/" rel="tag">vim</a></li>
</ul>
</h1>

<p><code>buffer list</code> &lt; <code>buffer</code> &gt; <code>window</code> &gt; <code>tab</code> &gt; <code>vim</code></p>
<p>という感じ</p>
<p><code>:help window</code></p>
<blockquote>
<p>Summary:
   A buffer is the in-memory text of a file.
   A window is a viewport on a buffer.
   A tab page is a collection of windows.</p>
</blockquote>
<h3>Tab</h3>
<h4>autocmd events</h4>
<ul>
<li>TabEnter: after entering another tab page</li>
<li>TabLeave: before leaving a tab page</li>
<li>TabNew: when creating a new tab page</li>
<li>TabNewEntered: after entering a new tab page</li>
<li>TabClosed: after closing a tab page</li>
</ul>
<h3>Window</h3>
<ul>
<li>https://vim-jp.org/vimdoc-ja/windows.html</li>
</ul>
<p>Window番号は、vim によって自動で振られる。
BufferからWindow番号を手繰る。</p>
<p><code>bufwinnr('buf_name')</code></p>
<p>tabにひとつだけ <code>previewwindow</code> を作れる。</p>
<h4>autocmd events</h4>
<ul>
<li>WinNew: after creating a new window</li>
<li>WinEnter: after entering another window</li>
<li>WinLeave: before leaving a window</li>
</ul>
<h4>winnr</h4>
<p>Windowの増減で番号が代わる。</p>
<h4>win_getid</h4>
<p>vimセッション中不変のユニークなID</p>
<h5>id to nr</h5>
<h4>win_id2tabwin</h4>
<p>vimセッション中不変のユニークなID</p>
<h4>指定のWindowに移動する</h4>
<pre class="code literal-block"><span class="p">:</span>exe nr . <span class="s2">"wincmd w"</span>
</pre>
<pre class="code literal-block"><span class="p">:</span><span class="k">call</span> win_gotoid<span class="p">(</span>id<span class="p">)</span>
</pre>
<h4>split</h4>
<h4>vsplit</h4>
<h4>topleft</h4>
<pre class="code literal-block">+---+
| 1 |
+-+-+
| |0|
+-+-+
</pre>
<h4>aboveleft</h4>
<pre class="code literal-block">+-+-+
| |1|
| +-+
| |0|
+-+-+
</pre>
<h3>Buffer + Window</h3>
<h4>閉じるときの挙動</h4>
<p><code>:bdelete</code></p>
<ul>
<li>最後のWindowでない時</li>
</ul>
<p>そのバッファを表示しているWindowごと取り除かれる</p>
<ul>
<li>最後のWindowの時</li>
</ul>
<p>バッファを取り除いて、 <code>:bnext</code> される</p>
<h3>BufferList</h3>
<h4>bufferlisted</h4>
<h4>new name</h4>
<ul>
<li>split</li>
<li>enew</li>
<li>file name</li>
</ul>
<h4>vne[w] name</h4>
<p>vertical new</p>
<ul>
<li>vsplit</li>
<li>enew</li>
</ul>
<h4>bd[elete]</h4>
<ul>
<li>カレントバッファを閉じる</li>
<li>このバッファを開いているWindowをすべて閉じる。</li>
<li>buffer-listから取り除く</li>
<li>bufferはまだ消えてない</li>
</ul>
<h4>bdwipeout</h4>
<ul>
<li>カレントバッファを閉じる</li>
<li>このバッファを開いているWindowをすべて閉じる。</li>
<li>buffer-listから取り除く</li>
<li>bufferを消す</li>
</ul>
<h3>Buffer</h3>
<ul>
<li>"$": last buffer</li>
<li>0, "#": alternate buffer</li>
<li>"%", "": current buffer</li>
</ul>
<h4>autocmd events(Bufferの変化)</h4>
<ul>
<li>BufNewFile: starting to edit a file that doesn't exist</li>
<li>BufReadPre: starting to edit a new buffer, before reading the file</li>
<li>BufRead: starting to edit a new buffer, after reading the file</li>
<li>BufReadPost: starting to edit a new buffer, after reading the file</li>
<li>BufReadCmd: before starting to edit a new buffer |Cmd-event|</li>
<li>BufWrite: starting to write the whole buffer to a file</li>
<li>BufWritePre: starting to write the whole buffer to a file</li>
<li>BufWritePost: after writing the whole buffer to a file</li>
<li>BufWriteCmd: before writing the whole buffer to a file |Cmd-event: </li>
<li>BufAdd: just after adding a buffer to the buffer list</li>
<li>BufCreate: just after adding a buffer to the buffer list</li>
<li>BufDelete: before deleting a buffer from the buffer list</li>
<li>
<p>BufWipeout: before completely deleting a buffer</p>
</li>
<li>
<p>BufFilePre: before changing the name of the current buffer</p>
</li>
<li>
<p>BufFilePost: after changing the name of the current buffer</p>
</li>
<li>
<p>BufEnter: after entering a buffer</p>
</li>
<li>BufLeave: before leaving to another buffer</li>
<li>BufWinEnter: after a buffer is displayed in a window</li>
<li>
<p>BufWinLeave: before a buffer is removed from a window</p>
</li>
<li>
<p>BufUnload: before unloading a buffer</p>
</li>
<li>BufHidden: just after a buffer has become hidden</li>
<li>BufNew: just after creating a new buffer</li>
</ul>
<h4>autocmd events(Bufferの中身の変化)</h4>
<ul>
<li>CursorMoved</li>
</ul>
<h4>:file</h4>
<p>バッファ名(ファイル名)</p>
<h4>bufnr</h4>
<p>名前から番号を得る</p>
<h4>bufname</h4>
<p>番号から名前を得る</p>
<h4>bufexists</h4>
<h4>bufloaded</h4>
<p>bufexists and not bufloaded はあり得る</p>
<h4>bnext</h4>
<h3>Buffer Variables</h3>
<h4>getbufvar</h4>
<h4>setbufvar</h4>

<hr>
<ul class="pager hidden-print">
<li class="previous">
        <a href="../vim_create_plugin_has_buffer/" rel="prev" title="buffer を持つ vim plugin を作る">
            buffer を持つ vim plugin を作る 👈
        </a>
    </li>
    <li style="flex-grow: 1">
    <li class="next">
        <a href="../../../github/vim-pycall/" rel="next" title="vim-pycall">
            👉 vim-pycall
        </a>
    </li>
</ul></main><footer id="footer"><p>
            Powered by
            <a href="https://getnikola.com" rel="nofollow">Nikola</a>
        </p>
    </footer>
</body>
</html>
