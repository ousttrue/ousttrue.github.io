<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="generator" content="Nikola (getnikola.com)">
<meta name="viewport" content="width=device-width">
<script src="../../../../assets/js/all-nocdn.js"></script><title>Pixarã®Universal Scene Descriptionã‚’ãƒ“ãƒ«ãƒ‰ã—ã¦ã¿ã‚‹ | ä¸‰æ¬¡å…ƒæ—¥èªŒ</title>
<link href="../../../../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
</head>
<body>
    <h1 id="brand">
        <a href="../../../../" title="ä¸‰æ¬¡å…ƒæ—¥èªŒ" rel="home">
            <span id="blog-title">ä¸‰æ¬¡å…ƒæ—¥èªŒ</span>
        </a>
    </h1>

    <nav id="menu"><ul>
<li><a href="../../../../archive.html">Archives</a></li>
<li><a href="../../../../categories/index.html">Tags</a></li>
<li><a href="../../../../rss.xml">RSS feed</a></li>
<li><a href="../../../../about">About</a></li>
<li><a href="../../../../books">MemoBooks</a></li>

            
            
            
        </ul></nav><hr>
<main id="content"><h1 class="p-name entry-title" itemprop="headline name">
    <h1 class="p-name entry-title" itemprop="headline name">
    <a href="." class="u-url">Pixarã®Universal Scene Descriptionã‚’ãƒ“ãƒ«ãƒ‰ã—ã¦ã¿ã‚‹
    </a>
</h1>
<ul itemprop="keywords" class="tags">
<li>
        <time datetime="2017-08-14T00:00:00+09:00" title="2017-08-14">2017-08-14</time>
</li>
</ul>
</h1>

<div>
<p>20170902ã€‚å®Ÿã¯ãƒ“ãƒ«ãƒ‰ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒã‚ã£ã¦ã€ç°¡å˜ã«ãªã£ã¦ã„ãŸã€‚</p>
<p>å‹•ç”»ã§CEDEC2017ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’èã„ã¦ã‚ˆã•ã’ãªæ°—ãŒã—ãŸã®ã§å†åº¦ã‚„ã£ã¦ã¿ãŸ(ã¡ã‚‡ã£ã¨å‰ã«é€”ä¸­ã¾ã§ã‚„ã£ã¦æ”¾ç½®ã—ã¦ã„ãŸ)ã€‚
usdviewãŒä½¿ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹ã¨ã‚ˆã„ã‚‰ã—ã„ã€‚</p>
<h3>Pixar USD ã® Windows ãƒ“ãƒ«ãƒ‰æ–¹æ³•ï¼ˆ2017/9 ç‰ˆï¼‰</h3>
<p>è‡ªå‹•ãƒ“ãƒ«ãƒ‰ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒã¤ã„ã¦ã„ã‚‹ã®ã§æ”¾ã£ã¦ãŠãã ã‘ãªã®ã ã‘ã©ã€ã†ã¾ãã„ã‹ãªã‹ã£ãŸã¨ã“ã‚ã‚’è£œè¶³ã™ã‚‹ã€‚
ç’°å¢ƒã¯ã€Windows10(64bit) + VisualStudio2017 + VisualStudio2015ã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©è¿½åŠ ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«(VisualStudio2017ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã«ã‚ã‚‹)
visualstudioè£œè¶³
VisualStudioã¯ã€æœ€è¿‘ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«é™ã£ã¦ã‚‚ã„ã‚ã„ã‚ã‚ã‚‹ã€‚</p>
<p>VisualStudio2017(MSVC14.1)ã®ã¿
VisualStudio2017(MSVC14.1)ã«VS2015(MSVC14.0)ã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ãŒè¿½åŠ ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹(ã†ã¡ã¯ã“ã‚Œ)
VisualStudio2015(MSVC14.0)ã®ã¿
Visual C++ 2015 Build Tools(MSVC14.0)Python3ãƒ“ãƒ«ãƒ‰å‘ã‘ã«IDEã®ç„¡ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³)</p>
<p>ã‚‚ã®ã«ã‚ˆã£ã¦vcvars.batã®å ´æ‰€ãŒé•ã£ã¦ã€bjamã¨ã‹distutilsãŒã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã®ç™ºè¦‹ã«å¤±æ•—ã—ãŸã‚Šã™ã‚‹å ´åˆãŒã‚ã‚‹ã‚ˆã†ã ã€‚
cl.exeãŒè¦‹ã¤ã‹ã‚‰ãªã„ã‚ˆã†ãªå ´åˆã€visualstudioã®æä¾›ã™ã‚‹è¨­å®šæ¸ˆã¿ã®dosãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‹ã‚‰å§‹ã‚ã‚‹ã®ãŒæ‰‹å …ã„ã‹ã‚‚ã—ã‚Œãªã„ã€‚
ä¸€å¿œã€
VisualStudio2017 - x64 native tools command promptã‹ã‚‰ã¯ã˜ã‚ã‚‹ã€‚
CMakeã¯VisualStudioã®æ¤œå‡ºã«ã‚ã¾ã‚Šå¤±æ•—ã—ãªã„ã®ã§ã€ãŠã‚‚ã«Boostã®ãƒ“ãƒ«ãƒ‰å¯¾ç­–ã€‚
åŠ¹æœãŒã‚ã£ãŸã‹ã¯ä¸æ˜ã€‚
D:\work&gt; cl
Microsoft(R) C/C++ Optimizing Compiler Version 19.10.25019 for x64
Copyright (C) Microsoft Corporation.  All rights reserved.</p>
<p>ä½¿ã„æ–¹: cl [ ã‚ªãƒ—ã‚·ãƒ§ãƒ³... ] ãƒ•ã‚¡ã‚¤ãƒ«å... [ /link ãƒªãƒ³ã‚¯ ã‚ªãƒ—ã‚·ãƒ§ãƒ³... ]</p>
<p>VS2017ã—ã‹å…¥ã£ã¦ã„ãªã„ã¨ã
build_usd.pyå†…Boost.Pythonã«é–¢ã—ã¦msvc=14.0æŒ‡å®š(VS2015)ãŒã‚ã‚‹ã®ã§ã€ã“ã‚Œã‚’ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã™ã‚Œã°ãŸã¶ã‚“VS2017ã—ã‹ãªãã¦ã‚‚ãƒ“ãƒ«ãƒ‰ã§ãã‚‹ã€‚Windowsç‰ˆã®Python2.7ã®ãƒ“ãƒ«ãƒ‰ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã¯VS2008(MSVC9.0)ã‚‰ã—ã„ã€‚</p>
<p><a href="https://www.microsoft.com/en-us/download/details.aspx?id=44266">https://www.microsoft.com/en-us/download/details.aspx?id=44266</a></p>
<p>pythonè£œè¶³
Python27ä»¥å¤–ã®PythonãŒå…¥ã£ã¦ã„ã‚‹ã¨ã¯ã¾ã‚‹ç‡ãŒä¸ŠãŒã‚‹ã€‚</p>
<pre class="code literal-block"><span></span><span class="nt">D</span><span class="o">:</span><span class="err">\</span><span class="nt">work</span><span class="o">&gt;</span> <span class="nt">python</span> <span class="nt">-V</span>
<span class="nt">Python</span> <span class="nt">3</span><span class="p">.</span><span class="nc">6</span><span class="p">.</span><span class="nc">0</span> <span class="o">::</span> <span class="nt">Anaconda</span> <span class="nt">4</span><span class="p">.</span><span class="nc">3</span><span class="p">.</span><span class="nc">0</span> <span class="o">(</span><span class="nt">64-bit</span><span class="o">)</span>

<span class="nt">é•ã†Pythonã ãƒ¼</span><span class="err">ã€‚</span>
<span class="nt">D</span><span class="o">:</span><span class="err">\</span><span class="nt">work</span><span class="o">&gt;</span> <span class="nt">set</span> <span class="nt">PATH</span><span class="o">=</span><span class="nt">D</span><span class="o">:</span><span class="err">\</span><span class="nt">Python27</span><span class="o">;</span><span class="nt">D</span><span class="o">:</span><span class="err">\</span><span class="nt">Python27</span><span class="err">\</span><span class="nt">Scripts</span><span class="o">;%</span><span class="nt">PATH</span><span class="o">%</span>
<span class="nt">D</span><span class="o">:</span><span class="err">\</span><span class="nt">work</span><span class="o">&gt;</span> <span class="nt">python</span> <span class="nt">-V</span>
<span class="nt">Python</span> <span class="nt">2</span><span class="p">.</span><span class="nc">7</span><span class="p">.</span><span class="nc">14rc1</span>
<span class="nt">D</span><span class="o">:</span><span class="err">\</span><span class="nt">work</span><span class="o">&gt;</span> <span class="nt">pip</span> <span class="nt">install</span> <span class="nt">pyside</span>
<span class="nt">Collecting</span> <span class="nt">pyside</span>
  <span class="nt">Downloading</span> <span class="nt">PySide-1</span><span class="p">.</span><span class="nc">2</span><span class="p">.</span><span class="nc">4-cp27-none-win_amd64</span><span class="p">.</span><span class="nc">whl</span> <span class="o">(</span><span class="nt">45</span><span class="p">.</span><span class="nc">0MB</span><span class="o">)</span>
    <span class="nt">100</span><span class="o">%</span> <span class="o">|</span><span class="err">################################</span><span class="o">|</span> <span class="nt">45</span><span class="p">.</span><span class="nc">0MB</span> <span class="nt">36kB</span><span class="o">/</span><span class="nt">s</span>
<span class="nt">Installing</span> <span class="nt">collected</span> <span class="nt">packages</span><span class="o">:</span> <span class="nt">pyside</span>
<span class="nt">Successfully</span> <span class="nt">installed</span> <span class="nt">pyside-1</span><span class="p">.</span><span class="nc">2</span><span class="p">.</span><span class="nc">4</span>
</pre>

<p>pythonä½¿ã„ãŸã‚‹ã‚‚ã®ï¼’ç³»ã€ï¼“ç³»ä¸¡æ–¹å…¥ã£ã¦ã„ãŸã‚Šã™ã‚‹ã‚‚ã®ã§ã‚ã‚‹ã€‚
cloneã—ã¦ãƒ“ãƒ«ãƒ‰ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œ</p>
<pre class="code literal-block"><span></span>D:\work&gt; git clone https://github.com/PixarAnimationStudios/USD

D:\work&gt; mkdir USD_build
D:\work&gt; cd USD_build
D:\work\USD_build&gt;

D:\work\USD_build&gt; python ..\USD\build_scripts\build_usd.py
usage: build_usd.py [-h] [-n] [-v | -q] [--build BUILD]
                    [--generator GENERATOR]
                    [--build-shared | --build-monolithic] [--src SRC]
                    [--inst INST] [--force FORCE_BUILD] [--force-all]
                    [--tests | --no-tests] [--docs | --no-docs]
                    [--imaging | --usd-imaging | --no-imaging]
                    [--ptex | --no-ptex] [--embree | --no-embree]
                    [--embree-location EMBREE_LOCATION]
                    [--alembic | --no-alembic] [--hdf5 | --no-hdf5]
                    [--maya | --no-maya] [--maya-location MAYA_LOCATION]
                    [--katana | --no-katana]
                    [--katana-api-location KATANA_API_LOCATION]
                    [--houdini | --no-houdini]
                    [--houdini-location HOUDINI_LOCATION]
                    install_dir
build_usd.py: error: too few arguments

D:\work\USD_build&gt; python ..\USD\build_scripts\build_usd.py .
ERROR: CMake not found -- please install it and adjust your PATH
</pre>

<p>ã“ã‚“ãªé¢¨ã«è¶³ã‚Šãªã„ãƒ„ãƒ¼ãƒ«ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå‡ºã‚‹ã®ã§ã›ã£ã›ã¨ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãƒ‘ã‚¹ã‚’è¨­å®šã™ã‚‹ã€‚</p>
<blockquote>
<p>set PATH=D:\Program Files\CMake\bin;%PATH%
set PATH=D:\Program Files\NASM;%PATH%</p>
</blockquote>
<p>buildâ€¦</p>
<h3>Alembicã¨ã‹ç„¡ã—ã®æœ€å°ãƒ“ãƒ«ãƒ‰ã€‚</h3>
<pre class="code literal-block"><span></span>D:\work\USD_build&gt; python ..\USD\build_scripts\build_usd.py .

Building with settings:
  USD source directory          D:\work\USD
  USD install directory         D:\work\USD_build
  3rd-party source directory    D:\work\USD_build\src
  3rd-party install directory   D:\work\USD_build
  Build directory               D:\work\USD_build\build

  Building                      Shared libraries
    Imaging                     On
      Ptex support:             Off
    UsdImaging                  On
    Documentation               Off
    Tests                       Off
    Alembic Plugin              Off
      HDF5 support:             Off
    Maya Plugin                 Off
    Katana Plugin               Off
    Houdini Plugin              Off

    Dependencies                zlib, boost, TBB, JPEG, TIFF, PNG, OpenEXR, GLEW, OpenImageIO, OpenSubdiv, PyOpenGL

STATUS: Installing zlib...
STATUS: Installing boost...
STATUS: Installing TBB...
STATUS: Installing JPEG...
STATUS: Installing TIFF...
STATUS: Installing PNG...
</pre>

<p>ã“ã‚“ãªæ„Ÿã˜ã«é †ç•ªã«ãƒ“ãƒ«ãƒ‰ãŒé€²ã‚“ã§ã„ãã€‚
pngã®ãƒ“ãƒ«ãƒ‰ã§ã“ã‘ãŸ
pngrutil.obj : error LNK2019: æœªè§£æ±ºã®å¤–éƒ¨ã‚·ãƒ³ãƒœãƒ« inflateValidate ãŒé–¢æ•° png_inflate_claim ã§å‚ç…§ã•ã‚Œã¾ã—ãŸã€‚</p>
<p>ä½•æ•…ã‹ã€zlibã¸ã®ãƒªãƒ³ã‚¯ãŒã†ã¾ãã„ã£ã¦ã„ãªã„ï¼Ÿ
CMakeã®GUIã§sourceã‚’USD_build/src/libpng-1.6.29ã€buildã‚’D:/dev/_alembic/USD_build/build/libpng-1.6.29ã«ã—ã¦ç¢ºèªã™ã‚‹ã¨ZLIB_LIBRARY_RELEASEãŒC:/Program Files/Anaconda3/Library/lib/z.libã«ãªã£ã¦ã„ã¦ãŠå¯Ÿã—ã€‚
pythonã‚’ãƒ•ãƒ«ãƒ‘ã‚¹ã§æŒ‡å®šã—ãŸã‚‰ãªã‚“ã‹æ²»ã£ãŸã€‚é•ã†PythonãŒæ„å›³ã›ãšä½¿ã‚ã‚Œã¦ã„ãŸã‹ã€‚
dosçª“ã¯ã€whichã‚³ãƒãƒ³ãƒ‰ãŒç„¡ã„ã—ã‚ˆãã‚ã‹ã‚‰ã‚“ã€‚</p>
<pre class="code literal-block"><span></span>work\USD_build&gt; D:\python27\python ..\USD\build_scripts\build_usd.py . --force png

STATUS: Installing PNG...
STATUS: Installing OpenEXR...
STATUS: Installing GLEW...
STATUS: Installing OpenImageIO...
STATUS: Installing OpenSubdiv...
STATUS: Installing PyOpenGL...
STATUS: Installing PyOpenGL...
STATUS: Installing USD...

Success! To use USD, please ensure that you have:
  The following in your PYTHONPATH environment variable:
    D:\dev\_alembic\USD_build\lib\python

  The following in your PATH environment variable:
    D:\dev\_alembic\USD_build\bin
    D:\dev\_alembic\USD_build\lib
</pre>

<p>ãƒ“ãƒ«ãƒ‰ã§ããŸã€‚</p>
<h3>Boost.Pythonãƒ¡ãƒ¢</h3>
<p>boost_python-vc140-mt-1_61.dllãŒpython36.dllã¨ã‹é•ã†ã®ã«ãƒªãƒ³ã‚¯ã—ã¦ã—ã¾ã†å ´åˆã€‚
æœ€æ‚ªPythonã‚’ã™ã¹ã¦ã‚¢ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦Python27(64bit)ã ã‘ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚Œã°ã„ã‘ã‚‹ã®ã ãŒã€ãã‚Œã§ã¯è² ã‘ãŸæ°—ãŒã™ã‚‹ã®ã§Boost.Pythonã«ä½¿ã†Pythonã‚’å¼·åˆ¶ã™ã‚‹æ–¹æ³•ã€‚
USD_BUILD/user-conifg.jam
using python
    : 2.7                   # Version
    : C:\Python27\python.exe      # Python Path
    : C:\Python27\include         # include path
    : C:\Python27\libs            # lib path(s)
    ;</p>
<p>ã‚’ä½œã£ã¦ç’°å¢ƒå¤‰æ•°BOOST_BUILD_PATHã‚’user-config.jamã®ã‚ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«æŒ‡å®šã™ã‚‹ã€‚
%USERROFILE%\user-config.jamã«ä½œã£ã¦BOOST_BUILD_PATHç„¡ã—ã§ã‚‚ã‚ˆã„ãŒã€æ¶ˆã—å¿˜ã‚Œã‚‹ã¨ã‚ã¨ã§ã¯ã¾ã‚‹å¯èƒ½æ€§ãŒå¢—ãˆã‚‹ã¨æ€ã†ã€‚</p>
<p>http://www.boost.org/build/doc/html/bbv2/overview/configuration.html</p>
<p>Windowsã®Boost.Pythonã¯ä½œã‚‹ã¨ãã‚‚ä½¿ã†ã¨ãã‚‚ãƒªãƒ³ã‚¯ã§ã¯ã¾ã‚‹ã€‚
usdviewã‚’ä½¿ã£ã¦ã¿ã‚‹
USD_BUILD/bin/usdviewãŒã‚ã‚‹ã€‚
USD_BUILD\bin&gt; D:\python27\python usdview</p>
<p>sys.path
Traceback (most recent call last):
  File "usdview", line 25, in <module>
    import pxr.Usdviewq as Usdviewq
ImportError: No module named pxr.Usdviewq</module></p>
<p>environ[â€˜PATHâ€™]
Traceback (most recent call last):
  File "usdview", line 37, in <module>
    Usdviewq.Launcher().Run()
  File "D:\dev_alembic\USD_build\lib\python\pxr\Usdviewq__init__.py", line 54, in Run
    valid = self.ValidateOptions(arg_parse_result)
  File "D:\dev_alembic\USD_build\lib\python\pxr\Usdviewq__init__.py", line 167, in ValidateOptions
    from pxr import Sdf
  File "D:\dev_alembic\USD_build\lib\python\pxr\Sdf__init__.py", line 24, in <module>
    import _sdf
ImportError: DLL load failed: æŒ‡å®šã•ã‚ŒãŸãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚</module></module></p>
<p>usdviewã‚’æ”¹é€ ã—ã¦ã—ã¾ãŠã†ã€‚
ç’°å¢ƒå¤‰æ•°PATHã¨PYTHONPATHã‚’è¿½åŠ ã€‚
usdview.cmdæ”¹é€ ã§ã‚‚ã‚ˆã„ãŒpythonã®æ–¹ãŒæ›¸ãã‚„ã™ã„ã®ã§ã€‚
usdviewã®å†’é ­ã®importå‰ã«ä¸‹è¨˜ã‚’è¿½åŠ ã€‚
import os
import sys</p>
<p>basepath=os.path.dirname(os.path.dirname(os.path.abspath(<strong>file</strong>)))
bin_dir=os.path.join(basepath, 'bin')
lib_dir=os.path.join(basepath, 'lib')
libpython_dir=os.path.join(lib_dir, 'python')</p>
<p>sys.path.append(libpython_dir)
os.environ['PATH']="%s;%s;" % (bin_dir, lib_dir) + os.environ['PATH']</p>
<p>import pxr.Usdviewq as Usdviewq</p>
<p>å®Ÿè¡Œã€‚
USD_BUILD\bin&gt; D:\python27\python usdview
usage: usdview [-h] [--renderer {opt,simple}] [--select PRIMPATH]
               [--camera CAMERA] [--mask PRIMPATH[,PRIMPATH...]]
               [--clearsettings] [--norender] [--unloaded] [--timing]
               [--memstats {none,stage,stageAndImaging}]
               [--numThreads NUMTHREADS] [--ff FIRSTFRAME] [--lf LASTFRAME]
               [--complexity COMPLEXITY] [--quitAfterStartup]
               usdFile
usdview: error: too few arguments</p>
<p>å¼•æ•°ãŒå¿…è¦ã¨ã€‚
cube.usd</p>
<h2>usda 1.0</h2>
<p>def Cube "Cube"
{
}</p>
<p>å®Ÿè¡Œã€‚
Warning: in Link at line 180 of D:\dev_alembic\USD\pxr\imaging\lib\hd\glslProgram.cpp -- Failed to link shader:
Geometry shader(s) failed to link.
Geometry link error: HW_UNSUPPORTED.
ERROR: Internal compile error, error code: E_SC_LITERAL_NOT_DEFINED
Shader not supported by HW</p>
<p>Windowã¯å‡ºãŸã€‚ã—ã‹ã—glslã®ã‚¨ãƒ©ãƒ¼ã§3DViewã®æç”»ãŒã§ãã¬ã€‚
Rx480ãŒã ã‚ãªã®ã ã‚ã†ã‹ã€‚
GTXè²·ã‚ã­ã°ãƒ»ãƒ»ãƒ»
Alembicè¿½åŠ ã™ã‚‹
ToDo</p>
</div>

<hr>
<ul class="pager hidden-print">
<li class="previous">
        <a href="../../boost_python3/" rel="prev" title="Boost.Pythonã®Python3ã§ã®std::stringã€std::wstringã®ãµã‚‹ã¾ã„">
            Boost.Pythonã®Python3ã§ã®std::stringã€std::wstringã®ãµã‚‹ã¾ã„ ğŸ‘ˆ
        </a>
    </li>
    <li style="flex-grow: 1">
    <li class="next">
        <a href="../pybullet/" rel="next" title="PyBulletã‚’ä½¿ã£ã¦ã¿ã‚‹">
            ğŸ‘‰ PyBulletã‚’ä½¿ã£ã¦ã¿ã‚‹
        </a>
    </li>
</ul></main><footer id="footer"><p>
            Powered by
            <a href="https://getnikola.com" rel="nofollow">Nikola</a>
        </p>
    </footer>
</body>
</html>
