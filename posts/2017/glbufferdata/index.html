<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="generator" content="Nikola (getnikola.com)">
<meta name="viewport" content="width=device-width">
<script src="../../../assets/js/all-nocdn.js"></script><title>PyOpenGLのglBufferDataにはどんなデータが渡せるのか | 三次元日誌</title>
<link href="../../../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
</head>
<body>
    <h1 id="brand">
        <a href="../../../" title="三次元日誌" rel="home">
            <span id="blog-title">三次元日誌</span>
        </a>
    </h1>

    <nav id="menu"><ul>
<li><a href="../../../archive.html">Archives</a></li>
<li><a href="../../../categories/index.html">Tags</a></li>
<li><a href="../../../rss.xml">RSS feed</a></li>
<li><a href="../../../about">About</a></li>
<li><a href="../../../books">MemoBooks</a></li>

            
            
            
        </ul></nav><hr>
<main id="content"><h1 class="p-name entry-title" itemprop="headline name">
    <h1 class="p-name entry-title" itemprop="headline name">
    <a href="." class="u-url">PyOpenGLのglBufferDataにはどんなデータが渡せるのか
    </a>
</h1>
<ul itemprop="keywords" class="tags">
<li>
        <time datetime="2017-08-01T00:00:00+09:00" title="2017-08-01">2017-08-01</time>
</li>
    <li><a class="tag p-category" href="../../../categories/opengl/" rel="tag">opengl</a></li>
    <li><a class="tag p-category" href="../../../categories/python/" rel="tag">python</a></li>
</ul>
</h1>

<p>glBufferDataに数字のlistを渡す場合以下のように渡せるがどうゆう実装なのか。</p>
<pre class="code literal-block"><span class="n">vertices</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="c1"># x, y, z</span>

<span class="n">glBufferData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> 
        <span class="nb">len</span><span class="p">(</span><span class="n">vertices</span><span class="p">)</span><span class="o">*</span><span class="mi">4</span><span class="p">,</span>  <span class="c1"># byte size</span>
        <span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_float</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="n">vertices</span><span class="p">))(</span><span class="o">*</span><span class="n">vertices</span><span class="p">),</span> <span class="c1"># 謎のctypes</span>
        <span class="n">GL_STATIC_DRAW</span><span class="p">)</span>
</pre>
<p>非常に読み辛かったがVisualStudioでステップ実行して動きを追ってみた。</p>
<pre class="code literal-block"><span class="c1"># site-packages/OpenGL/GL/VERSION/GL_1_5.py</span>
<span class="nd">@_lazy</span><span class="p">(</span> <span class="n">glBufferData</span> <span class="p">)</span>
<span class="k">def</span> <span class="nf">glBufferData</span><span class="p">(</span> <span class="n">baseOperation</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">usage</span><span class="o">=</span><span class="kc">None</span> <span class="p">):</span>
    <span class="sd">"""Copy given data into the currently bound vertex-buffer-data object</span>

<span class="sd">    target -- the symbolic constant indicating which buffer type is intended</span>
<span class="sd">    size -- if provided, the count-in-bytes of the array</span>
<span class="sd">    data -- data-pointer to be used, may be None to initialize without</span>
<span class="sd">        copying over a data-set</span>
<span class="sd">    usage -- hint to the driver as to how to set up access to the buffer</span>

<span class="sd">    Note: parameter "size" can be omitted, which makes the signature</span>
<span class="sd">        glBufferData( target, data, usage )</span>
<span class="sd">    instead of:</span>
<span class="sd">        glBufferData( target, size, data, usage )</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="n">usage</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">usage</span> <span class="o">=</span> <span class="n">data</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">size</span>
        <span class="n">size</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">ArrayDatatype</span><span class="o">.</span><span class="n">asArray</span><span class="p">(</span> <span class="n">data</span> <span class="p">)</span> <span class="c1"># &lt;- ここでPythonの型をOpenGLに渡せるように変換</span>
    <span class="k">if</span> <span class="n">size</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">size</span> <span class="o">=</span> <span class="n">ArrayDatatype</span><span class="o">.</span><span class="n">arrayByteCount</span><span class="p">(</span> <span class="n">data</span> <span class="p">)</span>
    <span class="k">return</span> <span class="n">baseOperation</span><span class="p">(</span> <span class="n">target</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">usage</span> <span class="p">)</span>
</pre>
<p>難関。デバッガ無しでは追えませんでした。</p>
<pre class="code literal-block"><span class="c1"># site-packages/OpenGL/arrays/arraydatatype.py</span>
<span class="k">class</span> <span class="nc">HandlerRegistry</span><span class="p">(</span> <span class="nb">dict</span> <span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">plugin_match</span> <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">match</span> <span class="o">=</span> <span class="n">plugin_match</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">value</span> <span class="p">):</span> <span class="c1"># 4</span>
        <span class="sd">"""Lookup of handler for given value"""</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">typ</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="vm">__class__</span>
        <span class="k">except</span> <span class="ne">AttributeError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
            <span class="n">typ</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="n">handler</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span> <span class="n">typ</span> <span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">handler</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span> <span class="n">typ</span><span class="p">,</span> <span class="s1">'__mro__'</span> <span class="p">):</span>
                <span class="k">for</span> <span class="n">base</span> <span class="ow">in</span> <span class="n">typ</span><span class="o">.</span><span class="vm">__mro__</span><span class="p">:</span>
                    <span class="n">handler</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span> <span class="n">base</span> <span class="p">)</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">handler</span><span class="p">:</span>
                        <span class="n">handler</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">match</span><span class="p">(</span> <span class="n">base</span> <span class="p">)</span> <span class="c1"># 5</span>
                        <span class="k">if</span> <span class="n">handler</span><span class="p">:</span>
                            <span class="n">handler</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
                            <span class="k">if</span> <span class="n">handler</span><span class="p">:</span>
                                <span class="n">handler</span> <span class="o">=</span> <span class="n">handler</span><span class="p">()</span>
                    <span class="k">if</span> <span class="n">handler</span><span class="p">:</span>
                        <span class="bp">self</span><span class="p">[</span> <span class="n">typ</span> <span class="p">]</span> <span class="o">=</span> <span class="n">handler</span>
                        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span> <span class="n">handler</span><span class="p">,</span> <span class="s1">'registerEquivalent'</span> <span class="p">):</span>
                            <span class="n">handler</span><span class="o">.</span><span class="n">registerEquivalent</span><span class="p">(</span> <span class="n">typ</span><span class="p">,</span> <span class="n">base</span> <span class="p">)</span>
                        <span class="k">return</span> <span class="n">handler</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                    <span class="sd">"""No array-type handler for type %s.%s (value: %s) registered"""</span><span class="o">%</span><span class="p">(</span>
                        <span class="n">typ</span><span class="o">.</span><span class="vm">__module__</span><span class="p">,</span> <span class="nb">type</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="n">value</span><span class="p">)[:</span><span class="mi">50</span><span class="p">]</span>
                        <span class="p">)</span>
                    <span class="p">)</span>
            <span class="k">return</span> <span class="n">handler</span>

<span class="n">GLOBAL_REGISTRY</span> <span class="o">=</span> <span class="n">HandlerRegistry</span><span class="p">(</span>
    <span class="n">plugins</span><span class="o">.</span><span class="n">FormatHandler</span><span class="o">.</span><span class="n">match</span> <span class="c1"># 6 -&gt; plugins.pyに進む</span>
    <span class="p">)</span> <span class="c1"># 3</span>
<span class="k">class</span> <span class="nc">ArrayDatatype</span><span class="p">(</span> <span class="nb">object</span> <span class="p">):</span>
    <span class="n">getHandler</span> <span class="o">=</span> <span class="n">GLOBAL_REGISTRY</span><span class="o">.</span><span class="fm">__call__</span> <span class="c1"># 2</span>
    <span class="k">def</span> <span class="nf">asArray</span><span class="p">(</span> <span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">typeCode</span><span class="o">=</span><span class="kc">None</span> <span class="p">):</span> <span class="c1"># 0 &lt;- glBufferDataから呼ばれる</span>
        <span class="sd">"""Given a value, convert to preferred array representation"""</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">getHandler</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">asArray</span><span class="p">(</span> <span class="n">value</span><span class="p">,</span> <span class="n">typeCode</span> <span class="ow">or</span> <span class="bp">cls</span><span class="o">.</span><span class="n">typeConstant</span> <span class="p">)</span> <span class="c1"># 1</span>
    <span class="n">asArray</span> <span class="o">=</span> <span class="nb">classmethod</span><span class="p">(</span> <span class="n">logs</span><span class="o">.</span><span class="n">logOnFail</span><span class="p">(</span> <span class="n">asArray</span><span class="p">,</span> <span class="n">_log</span> <span class="p">)</span> <span class="p">)</span>
</pre>
<pre class="code literal-block"><span class="c1"># site-packages/OpenGL/plugins.py</span>
<span class="k">class</span> <span class="nc">Plugin</span><span class="p">(</span> <span class="nb">object</span> <span class="p">):</span>
    <span class="sd">"""Base class for plugins to be loaded"""</span>
    <span class="n">loaded</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">import_path</span><span class="p">,</span> <span class="n">check</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">named</span> <span class="p">):</span>
        <span class="sd">"""Register the plug-in"""</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">registry</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="c1"># &lt;-  FormatHandlerのインスタンスが登録される</span>

<span class="k">class</span> <span class="nc">FormatHandler</span><span class="p">(</span> <span class="n">Plugin</span> <span class="p">):</span>
    <span class="sd">"""Data-type storage-format handler"""</span>
    <span class="n">registry</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># &lt;- OpenGL/__init__.pyで初期化される</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">match</span><span class="p">(</span> <span class="bp">cls</span><span class="p">,</span> <span class="n">value</span> <span class="p">):</span> <span class="c1"># 7</span>
        <span class="sd">"""Lookup appropriate handler based on value (a type)"""</span>
        <span class="n">key</span> <span class="o">=</span> <span class="s1">'</span><span class="si">%s</span><span class="s1">.</span><span class="si">%s</span><span class="s1">'</span><span class="o">%</span><span class="p">(</span> <span class="n">value</span><span class="o">.</span><span class="vm">__module__</span><span class="p">,</span> <span class="n">value</span><span class="o">.</span><span class="vm">__name__</span> <span class="p">)</span>
        <span class="k">for</span> <span class="n">plugin</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">registry</span><span class="p">:</span> <span class="c1"># &lt;- ここにハンドラのリストがある</span>
            <span class="nb">set</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span> <span class="n">plugin</span><span class="p">,</span> <span class="s1">'check'</span><span class="p">,</span> <span class="p">())</span>
            <span class="k">if</span> <span class="nb">set</span> <span class="ow">and</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">set</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">plugin</span>
        <span class="k">return</span> <span class="kc">None</span>
</pre>
<p>これらがimport時にFormatHandlerとして登録される。</p>
<pre class="code literal-block"><span class="c1"># site-packages/OpenGL/__init__.py</span>
<span class="n">FormatHandler</span><span class="p">(</span> <span class="s1">'none'</span><span class="p">,</span> <span class="s1">'OpenGL.arrays.nones.NoneHandler'</span><span class="p">,</span> <span class="p">[</span> <span class="n">_bi</span><span class="o">+</span><span class="s1">'.NoneType'</span><span class="p">],</span><span class="n">isOutput</span><span class="o">=</span><span class="kc">False</span> <span class="p">)</span>

<span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">version_info</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">:</span>
    <span class="n">FormatHandler</span><span class="p">(</span> <span class="s1">'str'</span><span class="p">,</span> <span class="s1">'OpenGL.arrays.strings.StringHandler'</span><span class="p">,[</span><span class="n">_bi</span><span class="o">+</span><span class="s1">'.str'</span><span class="p">],</span> <span class="n">isOutput</span><span class="o">=</span><span class="kc">False</span> <span class="p">)</span>
    <span class="n">FormatHandler</span><span class="p">(</span> <span class="s1">'unicode'</span><span class="p">,</span> <span class="s1">'OpenGL.arrays.strings.UnicodeHandler'</span><span class="p">,[</span><span class="n">_bi</span><span class="o">+</span><span class="s1">'.unicode'</span><span class="p">],</span> <span class="n">isOutput</span><span class="o">=</span><span class="kc">False</span> <span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">FormatHandler</span><span class="p">(</span> <span class="s1">'bytes'</span><span class="p">,</span> <span class="s1">'OpenGL.arrays.strings.StringHandler'</span><span class="p">,[</span><span class="n">_bi</span><span class="o">+</span><span class="s1">'.bytes'</span><span class="p">],</span> <span class="n">isOutput</span><span class="o">=</span><span class="kc">False</span> <span class="p">)</span>
    <span class="n">FormatHandler</span><span class="p">(</span> <span class="s1">'str'</span><span class="p">,</span> <span class="s1">'OpenGL.arrays.strings.UnicodeHandler'</span><span class="p">,[</span><span class="n">_bi</span><span class="o">+</span><span class="s1">'.str'</span><span class="p">],</span> <span class="n">isOutput</span><span class="o">=</span><span class="kc">False</span> <span class="p">)</span>

<span class="n">FormatHandler</span><span class="p">(</span> <span class="s1">'list'</span><span class="p">,</span> <span class="s1">'OpenGL.arrays.lists.ListHandler'</span><span class="p">,</span> <span class="p">[</span>
    <span class="n">_bi</span><span class="o">+</span><span class="s1">'.list'</span><span class="p">,</span>
    <span class="n">_bi</span><span class="o">+</span><span class="s1">'.tuple'</span><span class="p">,</span>
<span class="p">],</span> <span class="n">isOutput</span><span class="o">=</span><span class="kc">False</span> <span class="p">)</span>
<span class="n">FormatHandler</span><span class="p">(</span> <span class="s1">'numbers'</span><span class="p">,</span> <span class="s1">'OpenGL.arrays.numbers.NumberHandler'</span><span class="p">,</span> <span class="p">[</span>
    <span class="n">_bi</span><span class="o">+</span><span class="s1">'.int'</span><span class="p">,</span>
    <span class="n">_bi</span><span class="o">+</span><span class="s1">'.float'</span><span class="p">,</span>
    <span class="n">_bi</span><span class="o">+</span><span class="s1">'.long'</span><span class="p">,</span>
<span class="p">],</span> <span class="n">isOutput</span><span class="o">=</span><span class="kc">False</span> <span class="p">)</span>
<span class="n">FormatHandler</span><span class="p">(</span>
    <span class="s1">'ctypesarrays'</span><span class="p">,</span> <span class="s1">'OpenGL.arrays.ctypesarrays.CtypesArrayHandler'</span><span class="p">,</span>
    <span class="p">[</span>
        <span class="s1">'_ctypes.ArrayType'</span><span class="p">,</span>
        <span class="s1">'_ctypes.PyCArrayType'</span><span class="p">,</span>
        <span class="s1">'_ctypes.Array'</span><span class="p">,</span>
        <span class="s1">'_ctypes.array.Array'</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">isOutput</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">FormatHandler</span><span class="p">(</span>
    <span class="s1">'ctypesparameter'</span><span class="p">,</span>
    <span class="s1">'OpenGL.arrays.ctypesparameters.CtypesParameterHandler'</span><span class="p">,</span>
    <span class="p">[</span>
        <span class="n">_bi</span><span class="o">+</span><span class="s1">'.CArgObject'</span><span class="p">,</span>
        <span class="s1">'ctypes.c_uint'</span><span class="p">,</span>
        <span class="s1">'ctypes.c_int'</span><span class="p">,</span>
        <span class="s1">'ctypes.c_float'</span><span class="p">,</span>
        <span class="s1">'ctypes.c_double'</span><span class="p">,</span>
        <span class="s1">'ctypes.c_ulong'</span><span class="p">,</span>
        <span class="s1">'ctypes.c_long'</span><span class="p">,</span>
        <span class="s1">'ctypes.c_longlong'</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">isOutput</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">FormatHandler</span><span class="p">(</span> <span class="s1">'ctypespointer'</span><span class="p">,</span> <span class="s1">'OpenGL.arrays.ctypespointers.CtypesPointerHandler'</span><span class="p">,[</span>
    <span class="s1">'ctypes.c_void_p'</span><span class="p">,</span>
    <span class="s1">'_ctypes._Pointer'</span><span class="p">,</span>
    <span class="s1">'ctypes.c_char_p'</span><span class="p">,</span>
    <span class="s1">'_ctypes.pointer._Pointer'</span><span class="p">,</span>
<span class="p">],</span><span class="n">isOutput</span><span class="o">=</span><span class="kc">False</span> <span class="p">)</span>
<span class="n">FormatHandler</span><span class="p">(</span> <span class="s1">'numpy'</span><span class="p">,</span> <span class="s1">'OpenGL.arrays.numpymodule.NumpyHandler'</span><span class="p">,</span> <span class="p">[</span>
    <span class="s1">'numpy.ndarray'</span><span class="p">,</span>
    <span class="s1">'numpy.core.memmap.memmap'</span><span class="p">,</span>
<span class="p">],</span><span class="n">isOutput</span><span class="o">=</span><span class="kc">True</span> <span class="p">)</span>
<span class="n">FormatHandler</span><span class="p">(</span> <span class="s1">'buffer'</span><span class="p">,</span> <span class="s1">'OpenGL.arrays.buffers.BufferHandler'</span><span class="p">,</span> <span class="p">[</span>
    <span class="s1">'OpenGL.arrays._buffers.Py_buffer'</span><span class="p">,</span>
    <span class="n">_bi</span><span class="o">+</span><span class="s1">'.memoryview'</span><span class="p">,</span>
    <span class="n">_bi</span><span class="o">+</span><span class="s1">'.bytearray'</span><span class="p">,</span>
<span class="p">],</span><span class="n">isOutput</span><span class="o">=</span><span class="kc">True</span> <span class="p">)</span>
<span class="n">FormatHandler</span><span class="p">(</span> <span class="s1">'vbo'</span><span class="p">,</span> <span class="s1">'OpenGL.arrays.vbo.VBOHandler'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'OpenGL.arrays.vbo.VBO'</span><span class="p">,</span><span class="s1">'OpenGL_accelerate.vbo.VBO'</span><span class="p">],</span><span class="n">isOutput</span><span class="o">=</span><span class="kc">False</span> <span class="p">)</span>
<span class="n">FormatHandler</span><span class="p">(</span> <span class="s1">'vbooffset'</span><span class="p">,</span> <span class="s1">'OpenGL.arrays.vbo.VBOOffsetHandler'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'OpenGL.arrays.vbo.VBOOffset'</span><span class="p">,</span><span class="s1">'OpenGL_accelerate.vbo.VBOOffset'</span><span class="p">],</span><span class="n">isOutput</span><span class="o">=</span><span class="kc">False</span> <span class="p">)</span>
</pre>
<p>numpyとか定義されているね。なるほど。</p>
<p><code>(ctypes.c_float*len(vertices))(*vertices)</code> は <code>ctypes.c_float</code> にマッチして、<code>CtypesArrayHandler</code> によって処理される。
一方、単なるPythonのlistであるverticesは、<code>OpenGL.arrays.lists.ListHandler</code> によって処理されて <code>NotImplementedError</code> に落ちるのであった。</p>
<pre class="code literal-block"><span class="k">class</span> <span class="nc">ListHandler</span><span class="p">(</span> <span class="n">formathandler</span><span class="o">.</span><span class="n">FormatHandler</span> <span class="p">):</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">asArray</span><span class="p">(</span> <span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">typeCode</span><span class="o">=</span><span class="kc">None</span> <span class="p">):</span>
        <span class="sd">"""Convert given value to a ctypes array value of given typeCode</span>

<span class="sd">        This does a *lot* of work just to get the data into the correct</span>
<span class="sd">        format.  It's not going to be anywhere near as fast as a numpy</span>
<span class="sd">        or similar approach!</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="n">typeCode</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span> <span class="s2">"""Haven't implemented type-inference for lists yet"""</span> <span class="p">)</span>
</pre>
<p>確かにlistだと中身の型が決められんね。なるほど。</p>

<hr>
<ul class="pager hidden-print">
<li class="previous">
        <a href="../07/imgui_python/" rel="prev" title="PythonでImGuiする">
            PythonでImGuiする 👈
        </a>
    </li>
    <li style="flex-grow: 1">
    <li class="next">
        <a href="../08/distutils_msvccompiler/" rel="next" title="distutilsでcl.exeが見つからない">
            👉 distutilsでcl.exeが見つからない
        </a>
    </li>
</ul></main><footer id="footer"><p>
            Powered by
            <a href="https://getnikola.com" rel="nofollow">Nikola</a>
        </p>
    </footer>
</body>
</html>
