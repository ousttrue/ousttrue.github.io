<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="generator" content="Nikola (getnikola.com)">
<meta name="viewport" content="width=device-width">
<script src="../../../../assets/js/all-nocdn.js"></script><title>cmakeãƒãƒ¼ãƒˆã‚·ãƒ¼ãƒˆ | ä¸‰æ¬¡å…ƒæ—¥èªŒ</title>
<link href="../../../../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
</head>
<body>
    <h1 id="brand">
        <a href="../../../../" title="ä¸‰æ¬¡å…ƒæ—¥èªŒ" rel="home">
            <span id="blog-title">ä¸‰æ¬¡å…ƒæ—¥èªŒ</span>
        </a>
    </h1>

    <nav id="menu"><ul>
<li><a href="../../../../archive.html">Archives</a></li>
<li><a href="../../../../categories/index.html">Tags</a></li>
<li><a href="../../../../rss.xml">RSS feed</a></li>
<li><a href="../../../../about">About</a></li>
<li><a href="../../../../books">MemoBooks</a></li>

            
            
            
        </ul></nav><hr>
<main id="content"><h1 class="p-name entry-title" itemprop="headline name">
    <h1 class="p-name entry-title" itemprop="headline name">
    <a href="." class="u-url">cmakeãƒãƒ¼ãƒˆã‚·ãƒ¼ãƒˆ
    </a>
</h1>
<ul itemprop="keywords" class="tags">
<li>
        <time datetime="2017-05-28T00:00:00+09:00" title="2017-05-28">2017-05-28</time>
</li>
</ul>
</h1>

<div>
<p>ã™ãå¿˜ã‚Œã‚‹ã®ã§ã“ã“ã‚’ãƒãƒ¼ãƒˆã‚·ãƒ¼ãƒˆåŒ–ã—ã‚ˆã†ã€‚</p>
<p>æ§‹æˆ
solution
CMAKE_MINIMUM_REQUIRED(VERSION 2.8)
PROJECT(hello) # .sln</p>
<p>subdirectory</p>
<p>https://cmake.org/cmake/help/latest/command/add_subdirectory.html</p>
<p>ADD_SUBDIRECTORY(src)</p>
<h2>ã‚‚ã—ãã¯</h2>
<p>SUBDIRS(FOO BAR HOGE FUGA)</p>
<p>target
exe</p>
<p>https://cmake.org/cmake/help/latest/command/add_executable.html</p>
<p>ADD_EXECUTABLE(hello
    main.cpp
    renderer.cpp
    scene.cpp
    )</p>
<p>fileã‚’é›†ã‚ã‚‹ä¾‹
FILE(GLOB SRC
    <em>.cpp
    </em>.h
    )
ADD_EXECUTABLE(hello
    ${SRC}
    )</p>
<h2>fo winmain</h2>
<p>ADD_EXECUTABLE(hello_windows WIN32
    ${SRC}
    )</p>
<p>static lib</p>
<p>https://cmake.org/cmake/help/latest/command/add_library.html</p>
<p>ADD_LIBRARY(renderer STATIC
    renderer.cpp
    )</p>
<p>dll
ADD_LIBRARY(renderer SHARED
    renderer.cpp
    )</p>
<p>compile
compiler options
å…¨ä½“
SET(CMAKE_CXX_FLAGS "-Wall")</p>
<p>ã‚¿ãƒ¼ã‚²ãƒƒãƒˆæŒ‡å®š
TARGET_COMPILE_OPTIONS(foo PUBLIC "$&lt;$<debug>:${MY_DEBUG_OPTIONS}&gt;")
TARGET_COMPILE_OPTIONS(foo PUBLIC "$&lt;$<release>:${MY_RELEASE_OPTIONS}&gt;")</release></debug></p>
<p>include path
å…¨ä½“
ä»¥é™ã®ADD_XXXã«å¯¾ã—ã¦æœ‰åŠ¹ã«ãªã‚‹
INCLUDE_DIRECTORIES(libpath/include)</p>
<p>ã‚¿ãƒ¼ã‚²ãƒƒãƒˆæŒ‡å®š
PUBLICã®éƒ¨åˆ†ã¯ã‚ˆãã‚ã‹ã‚‰ã¬ã€‚
TARGET_INCLUDE_DIRECTORIES(HELLO PUBLIC
    ${BOOST_DIR}
    )</p>
<p>define
å…¨ä½“
ä»¥é™ã®ADD_XXXã«å¯¾ã—ã¦æœ‰åŠ¹ã«ãªã‚‹
ADD_DEFINITIONS(-DWITH_OPENCV2)</p>
<p>ã‚¿ãƒ¼ã‚²ãƒƒãƒˆæŒ‡å®š
PUBLICã®éƒ¨åˆ†ã¯ã‚ˆãã‚ã‹ã‚‰ã¬ã€‚</p>
<h2>-Dãªã—</h2>
<p>TARGET_COMPILE_DEFINITIONS(TARGET PUBLIC
    WITH_OPENCV2=1
    )</p>
<p>link
link path
LINK_DIRECTORIES(libpath/lib)</p>
<p>x86ã¨x64ã§é•ã†ãƒ‘ã‚¹ã«ã—ãŸã„æ™‚ã¯ï¼Ÿ
LINK_LIBRARIES
TARGET_LINK_LIBRARIES
TARGET_LINK_LIBRARIES(MediaSessionPlaybackExample
    Mf
    Mfplat
    Mfuuid
    strmiids
    )</p>
<p>Debug Releaseã®åˆ‡ã‚Šåˆ†ã‘
TARGET_LINK_LIBRARIES(Fuga
    DEBUG hoge_d
    OPTIMIZE hoge
    )</p>
<p>å¤‰æ•°
ã‚½ãƒ¼ã‚¹
cmake -G CMAKE_SOURCE_DIR
CMAKE_SOURCE_DIR</p>
<p>ãƒ“ãƒ«ãƒ‰ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
cmake -G CMAKE_SOURCE_DIRã‚’å®Ÿè¡Œã—ãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
CMAKE_BINARY_DIR</p>
<p>The path to the top level of the build tree</p>
<p>å‡ºåŠ›ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
exeã¨dllã®å‡ºåŠ›å…ˆã€‚
SET(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/bin)</p>
<p>example
CMakeLists.txt
CMAKE_MINIMUM_REQUIRED(VERSION 2.8)
PROJECT(hello) # hello.sln
ADD_EXECUTABLE(hello main.cpp) # hello.vcxproj</p>
<p>set(CMAKE_CXX_FLAGS "/WD4096")
set(CMAKE_C_FLAGS "/WD4096")
include_directories(libpath/include)
add_definitions(
    -DUNICODE
    -D_UNICODE
    )</p>
</div>

<hr>
<ul class="pager hidden-print">
<li class="previous">
        <a href="../cmake_exe/" rel="prev" title="msbuildã¨cmakeã®åœ¨ã‚Šã‹">
            msbuildã¨cmakeã®åœ¨ã‚Šã‹ ğŸ‘ˆ
        </a>
    </li>
    <li style="flex-grow: 1">
    <li class="next">
        <a href="../add_executable/" rel="next" title="cmakeã§å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹ä¾‹">
            ğŸ‘‰ cmakeã§å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹ä¾‹
        </a>
    </li>
</ul></main><footer id="footer"><p>
            Powered by
            <a href="https://getnikola.com" rel="nofollow">Nikola</a>
        </p>
    </footer>
</body>
</html>
