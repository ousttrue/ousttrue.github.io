<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="generator" content="Nikola (getnikola.com)">
<meta name="viewport" content="width=device-width">
<script src="../../../assets/js/all-nocdn.js"></script><title>w3m改造 | 三次元日誌</title>
<link href="../../../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
</head>
<body>
    <h1 id="brand">
        <a href="../../../" title="三次元日誌" rel="home">
            <span id="blog-title">三次元日誌</span>
        </a>
    </h1>

    <nav id="menu"><ul>
<li><a href="../../../archive.html">Archives</a></li>
<li><a href="../../../categories/index.html">Tags</a></li>
<li><a href="../../../rss.xml">RSS feed</a></li>
<li><a href="../../../about">About</a></li>
<li><a href="../../../books">MemoBooks</a></li>

            
            
            
        </ul></nav><hr>
<main id="content"><h1 class="p-name entry-title" itemprop="headline name">
    <h1 class="p-name entry-title" itemprop="headline name">
    <a href="." class="u-url">w3m改造
    </a>
</h1>
<ul itemprop="keywords" class="tags">
<li>
        <time datetime="2020-07-25T14:59:50+09:00" title="2020-07-25">2020-07-25</time>
</li>
    <li><a class="tag p-category" href="../../../categories/w3m/" rel="tag">w3m</a></li>
</ul>
</h1>

<p>以前にも何度かやったことがあるのだけど立ち消えになっていた、 <a href="http://w3m.sourceforge.net/index.ja.html">w3m</a> の改造を試みている。
w3m はわりと好きなテキストブラウザなのだが、 2011 年くらいの 0.5.3 で開発が終了している様子。</p>
<p>https://github.com/ousttrue/w3m</p>
<p>まずは <code>C++</code> 化してから、HTML処理などを再入可能にしてタブごとにスレッド独立する方向を目指す。
同時に、 <code>boehm-GC</code> を少しずつ <code>STL</code> のコンテナや <code>std::string</code> に置き換える。
どうも、<code>c++</code> と <code>boehm-GC</code> の共存するのに技がいるらしく、適当に置き換えていくとメモリ破壊で死ぬ。<code>boehm-GC</code> をすべて置き換える必要がありそう。<code>C++</code> クラスのメンバーに <code>GC</code> が要る、<code>GC struct</code> のメンバーに <code>C++</code> クラスが居るの両方に問題があるっぽい。一応、 <code>gc_cleanup</code> を継承したりしているのだけど、やり方がまずいぽい。</p>
<p>改造にあたってなるべく機能を維持しようとしていたのだけど、ある程度わりきって機能を落とさないと手に負えないところがある。</p>
<ul>
<li>http + https 以外の通信プロトコルは落とす。NNTP とか Gopher 使ったことないしなー、FTPもいったん落とす</li>
<li>backend, dump, halfload 等の出力に介入する機能は落とす。コードを読むのが大変</li>
<li>M17N, COLOR, IMAGE, MENU は残す</li>
<li>Mouse は微妙。削ってもよいかも</li>
<li>GetText も削る</li>
</ul>
<p>量を減らす。思ったよりコードが多かったのだ。</p>
<h2>下準備</h2>
<h3>msys2 でとりあえずビルド</h3>
<p>WSL Ubuntu だとビルドできなかった。
しかし、msys2 ならわりと簡単にビルドできることを発見。</p>
<div class="code"><pre class="code literal-block">$ pacman -S make gcc libgc-devel openssl-devel ncurses-devel
$ x86_64-pc-msys-gcc --version
x86_64-pc-msys-gcc <span class="o">(</span>GCC<span class="o">)</span> <span class="m">9</span>.3.0
Copyright <span class="o">(</span>C<span class="o">)</span> <span class="m">2019</span> Free Software Foundation, Inc.
This is free software<span class="p">;</span> see the <span class="nb">source</span> <span class="k">for</span> copying conditions.  There is NO
warranty<span class="p">;</span> not even <span class="k">for</span> MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
$ ./configure
</pre></div>

<p>コンパイル環境の方が昔と変わってしまってビルドでエラーになる。</p>
<p>修正方法👇</p>
<p><a href="https://qiita.com/imkitchen/items/02a9df7baaaf434fee66">[CentOS7] emacs24にemacs-w3mインストール</a></p>
<p><code>#ifdef</code> の調整</p>
<div class="code"><pre class="code literal-block">// config.h
//#define USE_BINMODE_STREAM 1
//#define USE_EGD
</pre></div>

<div class="code"><pre class="code literal-block">$ make
$ ./w3m www.google.com // 動いた
</pre></div>

<h3>WSL で GC がクラッシュする問題</h3>
<p><code>boehm-GC</code> がランタイムにエラーになることで、 <code>make</code> 中のコード生成 <code>mktable</code> がクラッシュするのが原因でビルドステップが途中で止まるのが原因だった。なので、たとえビルド済みの <code>w3m</code> を <code>apt get</code> しても、ランタイムも同じ原因でクラッシュする。</p>
<p>エラー。</p>
<div class="code"><pre class="code literal-block"><span class="n">Wrong</span><span class="w"> </span><span class="n">__data_start</span><span class="o">/</span><span class="n">_end</span><span class="w"> </span><span class="n">pair</span><span class="w"></span>
<span class="n">fish</span><span class="p">:</span><span class="w"> </span><span class="s1">'./build/w3m'</span><span class="w"> </span><span class="n">terminated</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="k">signal</span><span class="w"> </span><span class="n">SIGABRT</span><span class="w"> </span><span class="p">(</span><span class="n">Abort</span><span class="p">)</span><span class="w"></span>
</pre></div>

<p>https://hitkey.nekokan.dyndns.info/diary2004.php#D200424</p>
<p>によると、stack size の制限が原因らしい。</p>
<div class="code"><pre class="code literal-block">$ <span class="nb">ulimit</span> -s
<span class="m">8192</span>
</pre></div>

<p>WSL でこれを変えるには・・・。</p>
<p>https://github.com/microsoft/WSL/issues/633</p>
<p>無理。</p>
<p><code>WSL2</code> ならできる？</p>
<div class="code"><pre class="code literal-block">&gt; wsl -l -v
  NAME            STATE           VERSION
* Ubuntu-20.04    Running         2
</pre></div>

<p>やってみる。</p>
<div class="code"><pre class="code literal-block">$ <span class="nb">ulimit</span> -s unlimited
&gt; <span class="nb">ulimit</span> -s
unlimited
</pre></div>

<p>できた。</p>
<div class="code"><pre class="code literal-block">$ w3m
Wrong __data_start/_end pair
</pre></div>

<p>うーむ。</p>
<div class="code"><pre class="code literal-block">$ <span class="nb">ulimit</span> -s <span class="m">81920</span>
&gt; <span class="nb">ulimit</span> -s
<span class="m">81920</span>
</pre></div>

<p>動いた。
8192KB では足りなく、 unlimited では多すぎるらしい。これは、難しいな。</p>
<p>ちなみに、 <code>gdb</code> 上ならスタック問題を解決しなくても動いた。
<code>gdb</code> がスタックを覆い隠すのかな？
開発だけならできなくもない。</p>
<h3>ビルドシステム</h3>
<p>とりあえず慣れたツールに変更。
WSL 上の vscode で作業しているのもあり、autotools から CMake に変更。
クロスプラットフォームは後退させて、新しめの gcc(c++20) でビルドできればいいや。
config.h や funcname 系のコード生成結果はコミットしちゃう。
libwc が static ライブラリにわかれているのも、ひとまとめにしてしまった。
あと、適当にソースをフォルダに移動する。</p>
<p>生成コード一覧</p>
<table>
<thead><tr>
<th>ファイル</th>
<th>生成方法</th>
<th>入力</th>
<th>備考</th>
</tr></thead>
<tbody>
<tr>
<td>config.h</td>
<td>configure</td>
<td></td>
<td>各種 #define など</td>
</tr>
<tr>
<td>entity.h</td>
<td>Makefile(mktable)</td>
<td>entity.tab</td>
<td>./mktable 100 entity.tab &gt; entity.h</td>
</tr>
<tr>
<td>funcname.tab</td>
<td>Makefile(awk)</td>
<td>main.c, menu.c</td>
<td></td>
</tr>
<tr>
<td>funcname.c</td>
<td>Makefile(awk)</td>
<td>funcname.tab</td>
<td>sort funcname.tab ｜ awk -f funcname0.awk &gt; funcname.c</td>
</tr>
<tr>
<td>funcname1.h</td>
<td>Makefile(awk)</td>
<td>funcname.tab</td>
<td></td>
</tr>
<tr>
<td>funcname2.h</td>
<td>Makefile(awk)</td>
<td>funcname.tab</td>
<td></td>
</tr>
<tr>
<td>functable.c</td>
<td>Makefile(mktable)</td>
<td>funcname.tab</td>
<td></td>
</tr>
<tr>
<td>tagtable.c</td>
<td>Makefile(mktable)</td>
<td>funcname.tab</td>
<td></td>
</tr>
</tbody>
</table>
<h3>警告からエラーに引き上げ</h3>
<p>改造していくのに <code>C</code> の緩い型制限が危険(コンパイルが通るのに型が不一致になりやすい)なので、
以下のオプションを追加。</p>
<div class="code"><pre class="code literal-block">-Werror=implicit-function-declaration
-Werror=int-conversion
-Werror=conversion-null
</pre></div>

<p>これで、型宣言を補強しながら進める。</p>
<h2>第1段階</h2>
<ul>
<li>extern "C" を追加してソースの拡張子を <code>.cpp</code> に変更</li>
<li>extern "C" をまとめて取り除く</li>
<li>typedef struct tag を取り除く</li>
</ul>
<p>ここまでやると、自由に <code>c++</code> のコードを混ぜることができる。
<code>std::string</code>、<code>std::vector</code>, <code>std::shared_ptr</code>, <code>std::function</code>, <code>std::string_view</code>, <code>template</code>, <code>class</code>, 前方宣言, <code>auto</code>, <code>inline</code> 等使い放題 👍</p>
<p>特に <code>std::string_view</code> の使い勝手を試したい。
所有しない文字列はすべて、 <code>std::string_view</code> でいけると思うのだが。
<code>split</code> の <code>std::string_view</code> 版は具合がよかった。</p>
<h3>c++ 化 (extern "C")</h3>
<p>手法としては、各ソースの拡張子を <code>.c</code> から <code>.cpp</code> に変更する。
<code>CMakeLists.txt</code> を修正。
<code>#include</code> を <code>extern "C"</code> で囲む、で <code>c++</code> 化することができる。</p>
<div class="code"><pre class="code literal-block"><span class="k">extern</span><span class="w"> </span><span class="s">"C"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">"xxx.h"</span><span class="cp"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>

<p>ただ、 <code>cpp</code> で定義する関数の宣言が <code>extern "C"</code> の中に入らないとリンクエラーになるので、
そうなるようにソースごとにヘッダを分配してやる。
<code>w3m</code> は関数宣言が少数のファイル <code>proto.h</code>, <code>fm.h</code> とかに集中しているのだが、いっぱいあるので雑にやる。
コンパイルが通ればよい。</p>
<p>分配するときに未定義の型を前方宣言ですませたいのだけど、 <code>c</code> の <code>struct</code> 定義が、<code>struct tag</code> と <code>typedef</code> に分かれているのがやっかいだった。</p>
<div class="code"><pre class="code literal-block"><span class="c1">// C</span>
<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">hogeTag</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>

<span class="p">}</span><span class="w"> </span><span class="n">Hoge</span><span class="p">;</span><span class="w"></span>
</pre></div>

<div class="code"><pre class="code literal-block"><span class="kt">void</span><span class="w"> </span><span class="nf">DoHoge</span><span class="p">(</span><span class="n">Hoge</span><span class="w"> </span><span class="o">*</span><span class="n">p</span><span class="p">);</span><span class="w"></span>

<span class="c1">// に対する前方宣言は、</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">hogeTag</span><span class="p">;</span><span class="w"></span>
<span class="k">typedef</span><span class="w"> </span><span class="n">hogeTag</span><span class="w"> </span><span class="n">Hoge</span><span class="p">;</span><span class="w"></span>
</pre></div>

<p><code>C</code> の状態で、前方宣言を導入できずヘッダの分割が難航。
型ごとに別のヘッダに分割することは断念して、
ほとんど全部の <code>struct</code> 定義の入ったヘッダを <code>fm.h</code> から分離して作るのに留めた。</p>
<h3>DEFUN</h3>
<p><code>w3m</code> は <code>DEFUN</code> でキーアサインできる関数を定義している。</p>
<p><a href="../../../w3m/doc-jp/readme.func/">readme.func</a></p>
<p>以下のように、キーボードなどのイベントをトリガーにアクションを実行するというイメージ。</p>
<div class="code"><pre class="code literal-block">Key
    KeyMap
        DEFUN
    Menu
        DEFUN
MouseAction
    ActionMap
        DEFUN
    Menu
        DEFUN
Alarm
    DEFUN
</pre></div>

<p>ソースは、<code>main.c</code> と <code>menu.c</code> に <code>DEFUN</code> とそれの使う補助関数がまとめて定義されていて、
ヘッダは <code>proto.h</code> に全部入れとなっている。</p>
<p>c++ で下記のようなディスパッチャを作った。</p>
<div class="code"><pre class="code literal-block"><span class="k">typedef</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">Command</span><span class="p">)();</span><span class="w"></span>
<span class="n">std</span><span class="o">::</span><span class="n">unordered_map</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span><span class="w"> </span><span class="n">Command</span><span class="o">&gt;</span><span class="w"> </span><span class="n">g_commandMap</span><span class="p">;</span><span class="w"></span>
</pre></div>

<p>使い捨ての python で関数に登録するコードを生成した。</p>
<h2>第２段階</h2>
<ul>
<li>PODじゃない型が動くようにする<ul>
<li>constructor/destructor</li>
</ul>
</li>
<li>脱GC<ul>
<li>コレクションをSTLに置き換える</li>
<li>std::string</li>
<li>std::shared_ptr</li>
</ul>
</li>
<li>機能ごとにモジュール化</li>
<li>再入可能</li>
</ul>
<h3>GC_MALLOC から gc_cleanup 継承へ</h3>
<p>boehm-GC を <code>c++</code> のクラスで使う方法を調べた。</p>
<p>http://www.namikilab.tuat.ac.jp/~sasada/prog/boehmgc.html#i-0-5</p>
<p><code>w3m</code> では、 <code>GC</code> を多用している。</p>
<p>おもに、</p>
<ul>
<li>struct Str</li>
<li>コレクション</li>
<li>struct の field</li>
</ul>
<p>という感じに。
このうち、 struct の field で使われるタイプの単発の <code>GC_MALLOC</code> している型を <code>gc_cleanup</code> 継承にして、 <code>new</code> で初期化するようにする。</p>
<ul>
<li>bzero, bcopy, memcpy, sizeof</li>
</ul>
<p>等でメモリクリアしているところに注意する。
これで、その型は <code>constructor/destructor</code> が動くようになり、
メンバーに <code>std::string</code> 等を配置できるようになる。
あとで、 <code>gc_cleanup</code> から <code>std::shared_ptr</code> に変更することも視野に入れている。</p>
<h3>GC文字列 Str</h3>
<p>アプリ全体で使われていて一挙になくすことはできないのだけど、構造体の末端のメンバーから <code>std::string</code> に変える。
あと、がんばって <code>const char *</code> の範囲を増やす。
<code>libwc</code> から <code>Str</code> を剥そうと思っていたのだが、逆に <code>libwc</code> に <code>Str</code> を封じ込める方向に軌道修正。
<code>indep.c</code> の便利文字列関数も少しずつ変えてく。</p>
<h3>グローバル変数を減らす</h3>
<p>関数の中でグローバル変数にアクセスしている場合(CurrentBufferなど)、これを関数の引数経由とか、クラスのメンバー経由でもらう。面倒でも Getter と Setter を区別して、どこで変更されうるかわかりやすくする。
クラスのメンバーは、 <code>private</code> 化を試みる。</p>
<h3>Stream処理</h3>
<p>多分、最難関の <code>loadGeneralFile</code> 関数。700行くらいだったか。
goto とか longjmp があってよくわからなかったのだが、慣れてきた。
<code>http</code>, <code>https</code>, <code>NNTP ?</code>, <code>gopher</code>, <code>ftp</code>, <code>pipe</code> 等、<code>http</code> のプロキシーやリダイレクト、 <code>www-auth</code> などを一手に処理していて容易に手を付けられない。
何度か整理しようとして悉く撃退されたので、雑にやることにした。
機能を <code>http(https)</code> に絞ってそれ以外をコメントアウトしてとにかく量を減らす。
プロキシーとか、 <code>dump</code>, <code>halfload</code> などのよく知らない機能もどんどん削る。
としてなんとか改造できるようになってきた。</p>
<p>ここを <code>HttpClient</code>, <code>LocalFile</code>, <code>PipeReader</code> あたりに整理したい。</p>
<h2>第３段階</h2>
<p>Tab, Buffer, Line のリンクリストを STL のコレクションに置き換えた。</p>
<div class="code"><pre class="code literal-block"><span class="k">auto</span><span class="w"> </span><span class="n">buf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">load</span><span class="p">(</span><span class="n">url</span><span class="p">);</span><span class="w"></span>
<span class="n">tab</span><span class="o">-&gt;</span><span class="n">push</span><span class="p">(</span><span class="n">buf</span><span class="p">);</span><span class="w"></span>
</pre></div>

<p>という形を目指す。</p>
<p><code>loadGeneralFile</code> を解きほぐして、 <code>HTTP</code> 機能を抽出、リダイレクトまで動くようにできた。
<code>loadGeneralFile</code> は、</p>
<div class="code"><pre class="code literal-block"><span class="o">*</span><span class="w"> </span><span class="nv">OpenStream</span><span class="o">/</span><span class="k">Send</span><span class="w"> </span><span class="nv">HTTP</span><span class="w"> </span><span class="nv">Request</span><span class="w"></span>
<span class="o">*</span><span class="w"> </span><span class="nv">HTTP</span><span class="w"> </span><span class="nv">Response</span><span class="w"></span>
<span class="w">    </span><span class="o">*</span><span class="w"> </span><span class="mi">3</span><span class="nv">xx</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nv">Redirect</span><span class="w"></span>
<span class="o">*</span><span class="w"> </span><span class="nv">content</span><span class="o">-</span><span class="nv">type</span><span class="w"> </span>で分岐<span class="w"></span>
<span class="w">    </span><span class="o">*</span><span class="w"> </span><span class="nv">BufferLoader</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nv">Buffer</span><span class="w"></span>
</pre></div>

<p>という感じに整理できそう。
HttpとBufferローダーを副作用の無い関数に整理できれば再入可能が見えてくる。
早めに分岐させて、分岐したら合流しない。同じ処理は関数で共有するという方向性で整理。</p>
<p>Buffer が多機能なので、Document, HttpResponse, FileInfo とかに分割したい。</p>
<h2>第４段階</h2>
<p>mainloop の再実装。libuv, libevent 等を検討していたのだけど、 c++ との親和性の高い asio を使うことにした。
<code>tty read (keyboard input)</code>, <code>signal callback (sigint, winresize)</code>, <code>alarm</code> の割り込みを asio 経由にする。
アプリの終了をloop の終了にして、自然に destructor がコールされるようになる。</p>
<h2>第５段階</h2>
<p>html parse から term へのレンダリング部分の分解。
やっと解読できて１パス目</p>
<ul>
<li>内部文字コード(wtf-8)に変換</li>
<li>tokenize</li>
<li>tag をパースして属性取得 =&gt; パースに成功したら行バッファに書き戻す。フォームの情報を蓄積する。テーブルのレイアウト</li>
</ul>
<p>結果として、行のリストと、フォーム情報を得る。</p>
<p>２パス目</p>
<ul>
<li>行のリストを再度パース</li>
<li>非タグ部分をBufferに出力</li>
<li>Aタグやフォームを Anchor などに出力</li>
</ul>
<p>という感じだった。
１パス目で html 化するときに知らない属性を捨てたり、内部属性を追加したりしている様子。
この、内部属性がよくわからなくて難しい。</p>
<h2>文字コード</h2>
<p><code>content-charset</code> =&gt; <code>wtf</code> =&gt; <code>DisplayCharset</code> と文字コードを変換して動作していることがわかった。
試しに、<code>utf-8</code> であることが分かっている <code>html</code> で <code>wtf</code> 変換を飛ばしてみたところ表示が壊れた。
<code>wtf</code> は <code>utf-8</code> と互換性がないらしい。
http://simonsapin.github.io/wtf-8/
なのかと思ったのだが、違う独自形式かもしれない。</p>
<p>w3m は、この <code>wtf</code> エンコーディングで、html タグのパース、文字のバイト幅の判定、文字のカラム幅の判定をしているのだが、
<code>utf-8</code> では、文字のバイト幅、カラム幅の判定が狂う。
ということで、 <code>utf-8</code> でのバイト幅判定を自作して <code>wcwidth</code> を組み合わせてみた。
<code>*#12345;</code> 形式の <code>unicode</code> 埋め込みに対応するために、追加で <code>unicode</code> =&gt; <code>utf-8</code> 変換も作った。
正しく表示することができた。</p>
<p>ということで、<code>euc-jp</code> と <code>shift-jis</code> と <code>iso-2022-jp</code> から <code>utf-8</code> への変換を作れば日本語は対応できそう。
<code>std::string_view</code>, <code>char32_t</code>, <code>char8_t</code> あたりの新しい型を使った <code>\0</code> 終端に頼らないライブラリを作ってみる。</p>
<h2>メモ</h2>
<h3>モジュールに分割</h3>
<p>機能ごとにモジュールに分割する。</p>
<ul>
<li>UI(frontend)<ul>
<li>Term<ul>
<li>低レベル描画<ul>
<li>termcap の関数を直接呼ぶ。curses の自前実装的な</li>
<li>マルチバイト、マルチカラムの文字列と密接に関連していて libwc と不可分</li>
</ul>
</li>
<li>キーボード入力</li>
<li>マウス入力</li>
<li>リサイズイベント</li>
<li>SIGNALハンドリング<ul>
<li>SIGINT =&gt; longjmp でキャンセル処理を実現している。c++ のデストラクタとかまずそう</li>
</ul>
</li>
</ul>
</li>
<li>高レベル描画<ul>
<li>Lineの構築(byte ごとに char と Lineprop がペアになる)</li>
</ul>
</li>
<li>Tab</li>
<li>Buffer</li>
<li>Message</li>
<li>Menu</li>
<li>Keymap</li>
<li>LineInput<ul>
<li>SearchKey</li>
<li>History</li>
</ul>
</li>
</ul>
</li>
<li>
<p>IO(transport)</p>
<ul>
<li>IStream<ul>
<li>union =&gt; class polymorphism化</li>
<li>file descriptor</li>
<li>FILE*</li>
<li>ssl</li>
<li>memory</li>
<li>Compression</li>
</ul>
</li>
<li>LocalCGI</li>
</ul>
</li>
<li>
<p>http</p>
<ul>
<li>HttpSession<ul>
<li>HttpRequest</li>
<li>HttpResponse</li>
</ul>
</li>
<li>cookie</li>
<li>redirect</li>
<li>referer</li>
<li>https</li>
<li>ftp</li>
<li>URL</li>
</ul>
</li>
<li>
<p>HTML</p>
<ul>
<li>HTMLtagproc1</li>
<li>HTMLlineproc2body<ul>
<li>process_form</li>
<li>process_form_int</li>
</ul>
</li>
<li>form</li>
<li>table</li>
<li>frame</li>
<li>term rendering</li>
</ul>
</li>
<li>
<p>String</p>
<ul>
<li>文字コード</li>
<li>quote</li>
<li>url escape</li>
<li>html escape</li>
<li>html entity</li>
<li>char_util<ul>
<li>myctype</li>
</ul>
</li>
<li>string_view_util<ul>
<li>strip</li>
</ul>
</li>
<li>string_util<ul>
<li>malloc</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3>リンクをたどる(followLink)</h3>
<p>followA();
loadLink();
loadGeneralFile();</p>
<p>cmd_loadURL();
loadGeneralFile();</p>
<p>cmd_loadURL();
loadGeneralFile();</p>
<h3>描画する</h3>
<p>displayBuffer
redrawBuffer
redrawNLine</p>
<h3>key入力</h3>

<hr>
<ul class="pager hidden-print">
<li class="previous">
        <a href="../hugo-reinstall/" rel="prev" title="Hugo再インストール">
            Hugo再インストール 👈
        </a>
    </li>
    <li style="flex-grow: 1">
    <li class="next">
        <a href="../../../github/char8/" rel="next" title="char8">
            👉 char8
        </a>
    </li>
</ul></main><footer id="footer"><p>
            Powered by
            <a href="https://getnikola.com" rel="nofollow">Nikola</a>
        </p>
    </footer>
</body>
</html>
