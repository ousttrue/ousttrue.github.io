<!DOCTYPE html>
<html><body>
    <h1 id="brand">
        <a href="../../../../../" title="三次元日誌" rel="home">
            <span id="blog-title">三次元日誌</span>
        </a>
    </h1>
    <hr>
<main id="content"><h1 class="p-name entry-title" itemprop="headline name">
    <a href="." class="u-url">python製のビルドツールgypを使ってみる</a>
</h1>
<div>
<p>python製のビルドツールgypを使ってみる
gyp(Generate Your Projects) は、
pythonで記述されたプロジェクト生成ツールで設定からVC向けプロジェクトや、GCC向けMakefileを生成するツールである。
chromeやnode.jsのビルドツールとして採用されているそうな。
機能的にはpremake4やcmakeと同じ範囲をカバーするがそれぞれ以下のような問題があった。</p>
<p>premake4はわりと気に入っているのだが布教困難。luaで宣言的に記述するのが分かりづらい
cmakeはcmake語が解読不能でちょっとしたプロジェクトのカスタマイズが困難すぎる(OpenCVとかのことだ)</p>
<p>そこで、python製のgypを試してみた。
gyp導入
環境は、Windows7 + python3。</p>
<blockquote>
<p>python setup.py install
:
中略
:
SyntaxError: invalid syntax</p>
</blockquote>
<p>File "c:\python33\lib\site-packages\gyp-0.1-py3.3.egg\gyp\generator\ninja.py",
 line 475
    print "Warning: Actions/rules writing object files don't work with " \
                                                                       ^
SyntaxError: invalid syntax</p>
<p>File "c:\python33\lib\site-packages\gyp-0.1-py3.3.egg\gyp\generator\xcode.py",
 line 126
    except OSError, e:
                  ^
SyntaxError: invalid syntax</p>
<p>python3非対応だった。まぁpython2で。
とりあえずc++の”hello world”をビルドするところから
hello_gyp
    + main.cpp
    + projects.gyp</p>
<p>main.cpp
projects.gyp
プロジェクト生成。</p>
<blockquote>
<p>gyp projects.gyp --depth .</p>
</blockquote>
<p>これで、projects.slnとhello_gyp.vcxprojが生成された。
hello_gyp
    + main.cpp
    + projects.gyp
    + projects.sln(generated)
    + hello_gyp.vcxproj(generated)</p>
<p>vc2010 express editionでprojects.slnを開いてビルドできた。
hello_gyp
    + main.cpp
    + projects.gyp
    + projects.sln
    + hello_gyp.vcxproj
    + Default/hello_gyp.exe(build)</p>
<p>構成がDebug,
ReleaseではなくDefault一本立てなのでカスタマイズの必要あり。</p>
</div>
    </main>
</body></html>
