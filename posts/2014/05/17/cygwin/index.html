<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="generator" content="Nikola (getnikola.com)">
<meta name="viewport" content="width=device-width">
<script src="../../../../../assets/js/all-nocdn.js"></script><title>cygwinの導入とgit最新版のビルドまで | 三次元日誌</title>
<link href="../../../../../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../../../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
</head>
<body>
    <h1 id="brand">
        <a href="../../../../../" title="三次元日誌" rel="home">
            <span id="blog-title">三次元日誌</span>
        </a>
    </h1>

    <nav id="menu"><ul>
<li><a href="../../../../../archive.html">Archives</a></li>
<li><a href="../../../../../categories/index.html">Tags</a></li>
<li><a href="../../../../../rss.xml">RSS feed</a></li>
<li><a href="../../../../../about">About</a></li>
<li><a href="../../../../../books">MemoBooks</a></li>

            
            
            
        </ul></nav><hr>
<main id="content"><h1 class="p-name entry-title" itemprop="headline name">
    <a href="." class="u-url">cygwinの導入とgit最新版のビルドまで</a>
</h1>
<div>
<p>cygwinの導入とgit最新版のビルドまで
しばらくWindows上のメインのshellをmsysgitのbashにしていたのだが、
久しぶりにcygwinに回帰した。
知らない間に環境が良くなっているじゃないの、ということで初期導入手順メモ。
既存のcygwinを掃除
“C:/cygwin”にインストール済みだが、
download済みのパッケージくらいは置いておこうということで以下のファイル/ディレクトリ
以外を削除した。
c:/cygwin
    + setup-x86.exe
    + http%3a%2f%2f... (パッケージのダウンロードディレクトリ)
    + etc/</p>
<p>あとetc/setupも削除。 これでクリーンな状態になるっぽい。
以降、 http://tar.blogru.me/entry/2014/03/20/004156
の通りにgitのビルドまで遂行。
cygwinセットアップ
setup-x86.exeを実行。wgetとgitを追加インストール。
apt-cyg導入
$ mkdir -p /usr/local/src
$ cd /usr/local/src
$ git clone https://github.com/transcode-open/apt-cyg.git
$ cp apt-cyg/apt-cyg /usr/local/bin/</p>
<p>最新版gitのビルド
ビルドに必要なもの
install.sh
set -x
apt-cyg install gcc-core
apt-cyg install make patch vim
apt-cyg install libncurses-devel openssl-devel readline libsqlite3-devel libxml2-devel libxslt-devel
apt-cyg install autoconf zlib zlib-devel libiconv python openssh tcl
apt-cyg install gettext-devel
apt-cyg install curl libcurl-devel</p>
<p>ビルド
$ cd /usr/local/src
$ git clone git://github.com/git/git.git
$ cd git
$ make configure
$ ./configure --prefix=/usr/local --with-curl --with-expat
$ make all &amp; make install</p>
<p>トラブルシューティング
“make install”で
make: execvp: install: Permission denied cygwin</p>
<p>というエラーが出てはまる。どうやらgitに含まれるINSTALLがmake
installのターゲットに 誤認されるという現象っぽい。
INSTALLを撤去したらうまく動いた。
$ rm INSTALL gitweb/INSTALL</p>
<p>別のマシンでは起きなかったのだがなんだこれは。
トラブルシューティング2
Windows8固有の問題のようだがmake中のforkに失敗する件について。
対策は、”rebaseall”ではなく
$ export LANG=C</p>
<p>とすることだった。
windows8-上で-cygwin-版の-git-で-pullpushfetch-に失敗するhttp://kamiyn.wordpress.com/2012/10/18/windows8-%E4%B8%8A%E3%81%A7-cygwin-%E7%89%88%E3%81%AE-git-%E3%81%A7-pullpushfetch-%E3%81%AB%E5%A4%B1%E6%95%97%E3%81%99%E3%82%8B/
のコメントに書いてあった。
かくして、gitが最新版になった。
$ git --version
git version 2.0.0.rc3.4.g6308767.dirty</p>
<p>思えば、cygwinをやめたのはgitがうまく動かなかったのを解決できなかったのが原因だった
ような気がするので、最新版がさくっとビルドできるのはありがたい。</p>
</div>
    </main><footer id="footer"><p>
            Powered by
            <a href="https://getnikola.com" rel="nofollow">Nikola</a>
        </p>
    </footer>
</body>
</html>
