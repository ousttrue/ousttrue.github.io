<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="generator" content="Nikola (getnikola.com)">
<meta name="viewport" content="width=device-width">
<script src="../../../assets/js/all-nocdn.js"></script><title>zola のテンプレートを整備する | 三次元日誌</title>
<link href="../../../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
</head>
<body>
    <h1 id="brand">
        <a href="../../../" title="三次元日誌" rel="home">
            <span id="blog-title">三次元日誌</span>
        </a>
    </h1>

    <nav id="menu"><ul>
<li><a href="../../../archive.html">Archives</a></li>
<li><a href="../../../categories/index.html">Tags</a></li>
<li><a href="../../../rss.xml">RSS feed</a></li>
<li><a href="../../../about">About</a></li>
<li><a href="../../../books">MemoBooks</a></li>

            
            
            
        </ul></nav><hr>
<main id="content"><h1 class="p-name entry-title" itemprop="headline name">
    <h1 class="p-name entry-title" itemprop="headline name">

    <a href="." class="u-url">zola のテンプレートを整備する</a>
</h1>
<ul itemprop="keywords" class="tags">
<li>
        <time datetime="2021-06-14T00:00:00+09:00" title="2021-06-14">2021-06-14</time>
</li>
    <li><a class="tag p-category" href="../../../categories/css/" rel="tag">css</a></li>
    <li><a class="tag p-category" href="../../../categories/ssg/" rel="tag">ssg</a></li>
    <li><a class="tag p-category" href="../../../categories/zola/" rel="tag">zola</a></li>
</ul>
</h1>

<div>
<p>サイト整備のメモ。共通化して部品を少なくした。</p>
<ul>
<li>zola 設定</li>
<li>template 構築</li>
<li>場合によっては zola の改造</li>
</ul>
<h2>共通</h2>
<ul>
<li>[x] title</li>
<li>[x] 日付</li>
<li>[x] 見出しの見た目</li>
</ul>
<h2>Markdown</h2>
<ul>
<li>[x] url 文字列を自動でリンクにしたい。markdownで <code>&lt;url&gt;</code> と記述するべし</li>
</ul>
<h2>20210716: masonry 入れてみた</h2>
<p><a href="https://masonry.desandro.com/">https://masonry.desandro.com/</a></p>
<h2>20210717: TOC</h2>
<ul>
<li>[x] 目次
だいたいできた。
github が増えすぎてカオスなので不要なものを整理せねば・・・</li>
</ul>
<h2>20210725: 色</h2>
<p>作業用に区域ごとに色分けしていたのをやめて、地味な色に変更。</p>
<pre class="code literal-block"><span></span><span class="k">@mixin</span><span class="nf"> MAIN_COLOR</span> <span class="p">{</span>
    <span class="nt">color</span><span class="nd">:</span> <span class="nt">black</span><span class="o">;</span>
    <span class="nt">background-color</span> <span class="nt">white</span><span class="o">;</span>
<span class="p">}</span>
</pre>

<p>のような方法を試してみた。</p>
<h2>20210725: TOC 固定</h2>
<pre class="code literal-block"><span></span><span class="nt">position</span><span class="o">:</span> <span class="nt">fixed</span><span class="o">;</span>
</pre>

<h2>20210725: 画像を入れれるようにしてみた</h2>
<p><code>page.assets</code> や <code>section.assets</code> に想定した形で入ってこないので、
無理やりパスを操作したのだが、さすがにこれはちょっと・・・</p>
<pre class="code literal-block"><span></span>  {% if page.extra.image %}
  {% set s = page.relative_path | split(pat="/") %}
  {% set len = s | length %}
  {% set sl = s | slice(start=0, end=len-1) %}
  {% set j = sl | join(sep="/") %}
  {% set image_url = resize_image(path=j ~ "/" ~ page.extra.image, width=600, op="fit_width") %}
  <span class="p">&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">"{{ image_url }}"</span><span class="err">"</span><span class="p">&gt;</span>
  {% endif %}
</pre>

<p>なんか、 <code>zola</code> がわりと融通が利かないことが分かってきた。
<code>resize_image</code> で明示的に画像を加工するという設計は理解。なるほど。
当方、 <code>md</code> ファイルと同じフォルダに <code>png, jpg</code> を放り込んでそれを記事内で使いたいのです。
画像を中央の <code>static</code> フォルダにまとめて入れておくの嫌なので。
改造して page.assets に放り込んでしまおう。</p>
<p><code>hugo</code> ほど多機能複雑でなく、 <code>zola</code> ほど strict でない、そんなほどほどなツールが望まれる。</p>
<h2>20210815: pagination</h2>
<p><a href="https://www.getzola.org/documentation/templates/pagination/">https://www.getzola.org/documentation/templates/pagination/</a></p>
<p>ドキュメントよりもソースを読もう w
5分もかからぬ。</p>
<pre class="code literal-block"><span></span>      {% if paginator.current_index == 1 %}
</pre>

<h2>20210829: 内部リンク記法</h2>
<p><code>.md</code> の記法。</p>
<p><a href="https://www.getzola.org/documentation/content/linking/#internal-links">https://www.getzola.org/documentation/content/linking/#internal-links</a></p>
<p><code>[NvimTexture](@/posts/2021/summer/nvimtexture.md)</code></p>
<p><code>@</code> と <code>.md</code> が必要。</p>
<h2>20210831: search</h2>
<p><a href="https://www.getzola.org/documentation/content/search/">https://www.getzola.org/documentation/content/search/</a></p>
<p>設定は <code>build_search_index = true</code> するだけなのだが、
template 作るのは大変。</p>
<p><a href="https://github.com/aaranxu/adidoks">https://github.com/aaranxu/adidoks</a> から部品を頂いてきた。</p>
</div>

<ul class="pager hidden-print">
<li class="previous">
        <a href="../init_zola/" rel="prev" title="サイトジェネレーターを Zola に変更">
            サイトジェネレーターを Zola に変更 👈
        </a>
    </li>
    <li style="flex-grow: 1">
    <li class="next">
        <a href="../mdbook/" rel="next" title="mdBook もやってみる">
            👉 mdBook もやってみる
        </a>
    </li>
</ul></main><footer id="footer"><p>
            Powered by
            <a href="https://getnikola.com" rel="nofollow">Nikola</a>
        </p>
    </footer>
</body>
</html>
