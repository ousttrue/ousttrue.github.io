<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="generator" content="Nikola (getnikola.com)">
<meta name="viewport" content="width=device-width">
<script src="../../../assets/js/all-nocdn.js"></script><title>サイトジェネレーターを Zola に変更 | 三次元日誌</title>
<link href="../../../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
</head>
<body>
    <h1 id="brand">
        <a href="../../../" title="三次元日誌" rel="home">
            <span id="blog-title">三次元日誌</span>
        </a>
    </h1>

    <nav id="menu"><ul>
<li><a href="../../../archive.html">Archives</a></li>
<li><a href="../../../categories/index.html">Tags</a></li>
<li><a href="../../../rss.xml">RSS feed</a></li>
<li><a href="../../../about">About</a></li>
<li><a href="../../../books">MemoBooks</a></li>

            
            
            
        </ul></nav><hr>
<main id="content"><h1 class="p-name entry-title" itemprop="headline name">
    <a href="." class="u-url">サイトジェネレーターを Zola に変更</a>
</h1>
<div>
<p>最近、 rust を再開したので、
<code>Static Site Generator</code> を go 製の hugo から rust 製の zola に変更してみた。</p>
<p><a href="https://www.getzola.org/">https://www.getzola.org/</a></p>
<h2>hugo のからの引っ越し</h2>
<h3>zola インストール</h3>
<h3>初期化</h3>
<h3>config.toml を hugo 版から zola 版に書き換える。</h3>
<p>最低限 base_url。</p>
<h3>プレビューしてみる</h3>
<pre class="code literal-block"><span></span>$ zola serve
</pre>

<p>一部の記事でエラーが出る。</p>
<pre class="code literal-block"><span></span><span class="n">Reason</span><span class="o">:</span> <span class="n">There</span> <span class="k">is</span> <span class="n">a</span> <span class="n">link</span> <span class="n">that</span> <span class="k">is</span> <span class="n">missing</span> <span class="n">a</span> <span class="n">URL</span>
</pre>

<p>どの記事がまずいかはわかるが、何行目とか場所はわからないのかしら。
適当になおす。</p>
<pre class="code literal-block"><span></span>$ zola check
</pre>

<p>の方がデバッグ向け。
いくつかなおしたら、エラーは出なくなった。</p>
<h2>テンプレートを用意する</h2>
<p>https://www.getzola.org/documentation/getting-started/overview/</p>
<p>に従って基本的なテンプレートを作成。
index.html, section.html, page.html の3種類のテンプレートがサーチされる。
section.html と page.html は、section のフロントマター、 <code>template</code>, <code>page_template</code> で変更できる。</p>
<h2>zola の content 構成</h2>
<p>section(フォルダ) に page が所属するという構成みたい。
section とうのは単なるフォルダではなくて、folder/index.md もしくは folder/_index.md をさす。</p>
<ul>
<li>root =&gt; index.html<ul>
<li>section<ul>
<li>_index.md (セクションになる) =&gt; section.html</li>
<li>page1.md =&gt; page.html</li>
<li>page2.md =&gt; page.html</li>
<li>subsection (_index.md が無いのでセクションでは無い) =&gt; レンダリングされない<ul>
<li>page3.md (orphan page) =&gt; page.html</li>
<li>page4.md (orphan page) =&gt; page.html</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>セクションに所属しない page は orphan page となり、 <code>section.pages</code> のように列挙することができなくなる。
すべてのフォルダに <code>_index.md</code> を配置してセクション化するという設計思想のようだ。</p>
<p>セクションが木構造になっていて、page が leaf になる。</p>
<ul>
<li>section<ul>
<li>subsections</li>
<li>pages</li>
</ul>
</li>
</ul>
<p>が再帰的に続く。</p>
<h3>zola を改造してみた。</h3>
<p>orphan page が section.pages に入るようになる。
https://github.com/ousttrue/zola/commit/7842d0b2d05eb15400dbe20b20791b57af077de1</p>
<h2>zola 設定 config.toml</h2>
<p>https://www.getzola.org/documentation/getting-started/configuration/</p>
<h2>Tera テンプレート</h2>
<p>https://tera.netlify.app/docs</p>
<h3>extends</h3>
<p>別ファイルを部分的に override する
https://tera.netlify.app/docs/#inheritance</p>
<h3>include</h3>
<p>別ファイルの部品を読み込む
https://tera.netlify.app/docs/#include</p>
<h3>date format</h3>
<p>https://tera.netlify.app/docs/#include</p>
<h2>とりあえずメンテナンス中・・・</h2>
<p>hugo に比べて template の構成がシンプルでわかりやすいような気がする
(hugo に慣れているせいかもしれない)。
そもそも hugo の時点でちゃんと管理してなかったので、
ぼちぼち続きをやる。</p>
</div>
    </main><footer id="footer"><p>
            Powered by
            <a href="https://getnikola.com" rel="nofollow">Nikola</a>
        </p>
    </footer>
</body>
</html>
