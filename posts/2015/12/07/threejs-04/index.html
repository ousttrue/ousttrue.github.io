<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <title>三次元日誌</title>

    

  <script src="https://ousttrue.github.io/plugins/elasticlunr.min.js" defer></script>
  <script src="https://ousttrue.github.io/search_index.en.js" defer></script>
  <script src="https://ousttrue.github.io/js/search.js" defer></script>

    

     
    <link rel="stylesheet" href="https://ousttrue.github.io/main.css">
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css"
      />
    
  </head>

  <body class="container">
    <a class="site_title" href="https:&#x2F;&#x2F;ousttrue.github.io&#x2F;">
      <div>三次元日誌</div>
    </a>

    <nav class="nav">
      <a class="item" href="/tags/">tags</a>
      <a class="item" href="https://github.com/ousttrue" aria-label="github">
        <i class="fab fa-github fa-lg"></i>
      </a>
      

        
            <form class="navbar-form">
                <input id="userinput" class="form-control is-search" type="search" placeholder="Search docs..."
                    aria-label="Search docs..." autocomplete="off">
                <div id="suggestions" class="shadow bg-white rounded"></div>
            </form>
        
    </nav>

    <main class="main">
<div class="page">
<div class="content">
  <div class="headline">
  
  

  
  <a class="headline_title" href="https:&#x2F;&#x2F;ousttrue.github.io&#x2F;posts&#x2F;2015&#x2F;12&#x2F;07&#x2F;threejs-04&#x2F;"> Three.jsのJSONモデルフォーマット 
  

  
  </a>

  

  <div>
    <ul class="tags">
      <li class="headline_date">
        <div class="year">2015</div>
        <div class="md">1207</div>
      </li>
      
      


    <li class="tag"><a href="https:&#x2F;&#x2F;ousttrue.github.io&#x2F;tags&#x2F;threejs&#x2F;">threejs</a></li>




    </ul>
  </div>
</div>
 <p>source
外部のJSONに記述されたモデルを読み込む機能がある。
External models in Three.js
を見てやってみた。
OnLoad(geometry: THREE.Geometry, materials: THREE.Material[]) {
// create a mesh with models geometry and material
var material = new THREE.MeshPhongMaterial(materials[0]);
var mesh = new THREE.Mesh(
geometry,
material
);</p>
<pre style="background-color:#2b303b;">
<code>mesh.rotation.y = -Math.PI / 5;

this.scene.add(mesh);
this.Render();
</code></pre>
<p>}</p>
<p>OnProgress(event: any) {
console.log('OnProgress: ', event);
}</p>
<p>OnError(event: any) {
console.log('OnError: ', event);
}</p>
<p>AddModelFromJson(path: string) {
var loader = new THREE.JSONLoader(); // init the loader util</p>
<pre style="background-color:#2b303b;">
<code>// init loading
loader.load(path, this.OnLoad.bind(this)
    , this.OnProgress.bind(this)
    , this.OnError.bind(this));
</code></pre>
<p>}</p>
<p>JSONLoaderクラスを初期化してloadをコール、loadは非同期に完了してOnLoadコールバックでMeshを組み立ててシーンに追加するという流れ。
OnLoadにMeshが返ってくればいいと思うのだが・・・
モデルはサンプルファイルを探したのだが見つからなかったので、
Three.js の JSONLoader のメモ
を見てBlenderのThree.js exporterでお猿さんを作ってみました。
一応、茶色いマテリアルをつけたのだけどうまくいかず。
フォーマットはどうなっているのか？
cubeもエクスポートしてみた。
cube.json
{
&quot;faces&quot;: [35,2,0,1,3,0,0,1,2,3,35,3,7,6,2,0,3,4,5,0,35,7,5,4,6,0,4,6,7,5,35,0,4,5,1,0,1,7,6,2,35,0,2,6,4,0,1,0,5,7,35,5,7,3,1,0,6,4,3,2],
&quot;name&quot;: &quot;CubeGeometry.1&quot;,
&quot;metadata&quot;: {
&quot;generator&quot;: &quot;io_three&quot;,
&quot;vertices&quot;: 8,
&quot;type&quot;: &quot;Geometry&quot;,
&quot;uvs&quot;: 0,
&quot;version&quot;: 3,
&quot;faces&quot;: 6,
&quot;materials&quot;: 1,
&quot;normals&quot;: 8
},
&quot;vertices&quot;: [-1,-1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,-1,1,1,1,1,1,-1,-1,1,1,-1],
&quot;materials&quot;: [{
&quot;depthWrite&quot;: true,
&quot;colorDiffuse&quot;: [0,0.64,0.040691],
&quot;depthTest&quot;: true,
&quot;specularCoef&quot;: 50,
&quot;blending&quot;: &quot;NormalBlending&quot;,
&quot;shading&quot;: &quot;phong&quot;,
&quot;colorEmissive&quot;: [0,0,0],
&quot;opacity&quot;: 1,
&quot;transparent&quot;: false,
&quot;DbgIndex&quot;: 0,
&quot;visible&quot;: true,
&quot;wireframe&quot;: false,
&quot;colorSpecular&quot;: [0.5,0.5,0.5],
&quot;colorAmbient&quot;: [0,0.64,0.040691],
&quot;DbgName&quot;: &quot;Material&quot;,
&quot;DbgColor&quot;: 15658734
}],
&quot;uvs&quot;: [],
&quot;normals&quot;: [-0.577349,-0.577349,-0.577349,-0.577349,-0.577349,0.577349,-0.577349,0.577349,0.577349,-0.577349,0.577349,-0.577349,0.577349,0.577349,-0.577349,0.577349,-0.577349,-0.577349,0.577349,0.577349,0.577349,0.577349,-0.577349,0.577349]
}</p>
<p>JSON Model format 3 (Soon to be deprecated)
これっぽいですな。
なるほど。なるほど。</p>

</div>

<nav class="toc">


</nav>
</div>
</main>

    <footer class="footer">Powered by <a href="https://www.getzola.org/">Zola</a> <a href="https://github.com/ousttrue/zola/tree/custom">custom</a></footer>

  </body>
</html>
