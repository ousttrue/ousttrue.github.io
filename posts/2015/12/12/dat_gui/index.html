<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="generator" content="Nikola (getnikola.com)">
<meta name="viewport" content="width=device-width">
<script src="../../../../../assets/js/all-nocdn.js"></script><title>dat-guiを試してみる | 三次元日誌</title>
<link href="../../../../../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../../../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
</head>
<body>
    <h1 id="brand">
        <a href="../../../../../" title="三次元日誌" rel="home">
            <span id="blog-title">三次元日誌</span>
        </a>
    </h1>

    <nav id="menu"><ul>
<li><a href="../../../../../archive.html">Archives</a></li>
<li><a href="../../../../../categories/index.html">Tags</a></li>
<li><a href="../../../../../rss.xml">RSS feed</a></li>
<li><a href="../../../../../about">About</a></li>
<li><a href="../../../../../books">MemoBooks</a></li>

            
            
            
        </ul></nav><hr>
<main id="content"><h1 class="p-name entry-title" itemprop="headline name">
    <h1 class="p-name entry-title" itemprop="headline name">
    <a href="." class="u-url">dat-guiを試してみる
    </a>
</h1>
<ul itemprop="keywords" class="tags">
<li>
        <time datetime="2015-12-12T00:00:00+09:00" title="2015-12-12">2015-12-12</time>
</li>
</ul>
</h1>

<p>view typescript
view javascript</p>
<p>たまにthree.jsのデモと連動して使われているGUIライブラリdat-guiを試してみる。</p>
<p>https://code.google.com/p/dat-gui/
http://workshop.chromeexperiments.com/examples/gui/#1--Basic-Usage
https://stemkoski.github.io/Three.js/#gui</p>
<p>ライブラリを導入</p>
<blockquote>
<p>bower install dat.gui
tsd query dat-gui -rosa install</p>
</blockquote>
<p>dat.GuiControllerのnameプロパティがtypings/dat-gui/dat-gui.d.tsで未定義だった。
bower_components/dat.gui/dat.gui.jsでは定義されていた。
    /*<em>
    * The name of <code>GUI</code>. Used for folders. i.e
    * a folder's name
    * @type String
    </em>/
    name: {
    get: function() {
        return params.name;
    },
    set: function(v) {
        // TODO Check for collisions among sibling folders
        params.name = v;
        if (title_row_name) {
        title_row_name.innerHTML = params.name;
        }
    }
    },</p>
<p>既存のd.tsにプロパティを追加する(C# partial class的な)方法があるかどうかわからないので、
dat-gui.d.tsを改造することにした。
dat-gui.d.tsにnameプロパティを追加
declare module dat {</p>
<pre class="code literal-block"><span class="o">//</span> <span class="err">省略</span>

<span class="k">export</span> <span class="k">class</span> <span class="n">Controller</span> <span class="p">{</span> <span class="o">//</span> <span class="o">&lt;-</span> <span class="n">dat</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">jsに合わせて名前変えてみた</span>
    <span class="n">destroy</span><span class="p">():</span> <span class="n">void</span><span class="p">;</span>
    <span class="n">fire</span><span class="p">():</span> <span class="n">Controller</span><span class="p">;</span>
    <span class="n">getValue</span><span class="p">():</span> <span class="n">any</span><span class="p">;</span>
    <span class="n">isModified</span><span class="p">():</span> <span class="n">boolean</span><span class="p">;</span>
    <span class="n">listen</span><span class="p">():</span> <span class="n">Controller</span><span class="p">;</span>
    <span class="nb">min</span><span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="n">number</span><span class="p">):</span> <span class="n">Controller</span><span class="p">;</span>
    <span class="n">remove</span><span class="p">(</span><span class="n">target</span><span class="p">:</span> <span class="n">Controller</span><span class="p">):</span> <span class="n">void</span><span class="p">;</span>
    <span class="n">setValue</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="n">any</span><span class="p">):</span> <span class="n">Controller</span><span class="p">;</span>
    <span class="n">step</span><span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="n">number</span><span class="p">):</span> <span class="n">Controller</span><span class="p">;</span>
    <span class="n">updateDisplay</span><span class="p">():</span> <span class="n">void</span><span class="p">;</span>
    <span class="n">name</span><span class="p">(</span><span class="n">newName</span><span class="err">?</span><span class="p">:</span> <span class="n">string</span><span class="p">):</span> <span class="n">string</span><span class="p">;</span> <span class="o">//</span> <span class="o">&lt;-</span> <span class="err">これ追加した</span>
    <span class="n">onChange</span><span class="p">:</span> <span class="p">(</span><span class="n">value</span><span class="err">?</span><span class="p">:</span> <span class="n">any</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="n">void</span><span class="p">;</span>
    <span class="n">onFinishChange</span><span class="p">:</span> <span class="p">(</span><span class="n">value</span><span class="err">?</span><span class="p">:</span> <span class="n">any</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="n">void</span><span class="p">;</span>
<span class="p">}</span>
</pre>
<p>}</p>
<p>サンプルコードを元にtypescript化してみる
https://stemkoski.github.io/Three.js/GUI-Controller.html
をベースにした。
javscriptのコードをまるっとtsファイルにコピーして淡々と型を指定していく。
dat.guiの場所調整の件</p>
<p>http://stackoverflow.com/questions/25653639/how-do-i-change-the-location-of-the-dat-gui-dropdown</p>
<p>autoPlace: falseがポインツ。そのうえでdomにposition:abusolute
var  gui = new dat.GUI( { autoPlace: false } );</p>

<hr>
<ul class="pager hidden-print">
<li class="previous">
        <a href="../threejs_control/" rel="prev" title="Three.jsのトランスフォームコントロールでメッシュをマウスで移動">
            Three.jsのトランスフォームコントロールでメッシュをマウスで移動 👈
        </a>
    </li>
    <li style="flex-grow: 1">
    <li class="next">
        <a href="../../17/toggle/" rel="next" title="特定のHtmlElementを画面いっぱいにするToggleの実験">
            👉 特定のHtmlElementを画面いっぱいにするToggleの実験
        </a>
    </li>
</ul></main><footer id="footer"><p>
            Powered by
            <a href="https://getnikola.com" rel="nofollow">Nikola</a>
        </p>
    </footer>
</body>
</html>
