<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="generator" content="Nikola (getnikola.com)">
<meta name="viewport" content="width=device-width">
<script src="../../../../../assets/js/all-nocdn.js"></script><title>gulpで静的サイト生成その２ | 三次元日誌</title>
<link href="../../../../../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../../../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
</head>
<body>
    <h1 id="brand">
        <a href="../../../../../" title="三次元日誌" rel="home">
            <span id="blog-title">三次元日誌</span>
        </a>
    </h1>

    <nav id="menu"><ul>
<li><a href="../../../../../archive.html">Archives</a></li>
<li><a href="../../../../../categories/index.html">Tags</a></li>
<li><a href="../../../../../rss.xml">RSS feed</a></li>
<li><a href="../../../../../about">About</a></li>
<li><a href="../../../../../books">MemoBooks</a></li>

            
            
            
        </ul></nav><hr>
<main id="content"><h1 class="p-name entry-title" itemprop="headline name">
    <h1 class="p-name entry-title" itemprop="headline name">
    <a href="." class="u-url">gulpで静的サイト生成その２
    </a>
</h1>
<ul itemprop="keywords" class="tags">
<li>
        <time datetime="2015-11-14T00:00:00+09:00" title="2015-11-14">2015-11-14</time>
</li>
</ul>
</h1>

<p>gulpで静的サイト生成その２
引き続き、サイト生成作業を続行中。見た目は置いておいて(bootstrap入れたけど)機能を優先して作ろう。
「次へ」と「前へ」のリンクを作れば内部リンクは揃う。
gulpは自由度が高いのでなんとでもなるな。
強まったmakeのようで非常にポテンシャルを感じる。
中期的なも目標としてはローカルもしくはLAN内のnode.jsがホストとなるGUIをさくっと作れるようになるというものがあるのだが、
関連項目が多すぎてひたすら拡がっていくのが危険だ。
特に、インターネットで調べながらだと収束せずにひたすら拡散する傾向がある。
anglar, backboneは避けようと思ったのだがmithrilは気になっているし、electronも気になっている。
あと、typescriptもはやめに使いこなしたい。
だいぶgulpがわかってきた
「前へ」と「次へ」は全部のファイルをリストに投入してソートして隣通しのパスを得る必要がある。
一度リストに投入してから前へと次へを処理した後で、再度リストの中身を一個ずつ後ろに渡せばいいじゃない。
ということでやってみたらあっさりできた。
野良プラグインの作り方が分かるとgulp面白いな。
make-toc.js
var through = require('through2');
var gutil = require('gulp-util');
var path = require('path');</p>
<p>module.exports = function (outputFileName, options) {</p>
<pre class="code literal-block"><span class="n">options</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">options</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="err">{}</span><span class="p">;</span><span class="w"></span>
<span class="nf">var</span><span class="w"> </span><span class="n">dest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">options</span><span class="p">.</span><span class="n">dest</span><span class="p">;</span><span class="w"></span>
<span class="nf">var</span><span class="w"> </span><span class="n">filelist</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">[]</span><span class="p">;</span><span class="w"></span>

<span class="k">function</span><span class="w"> </span><span class="n">transform</span><span class="p">(</span><span class="k">file</span><span class="p">,</span><span class="w"> </span><span class="n">encoding</span><span class="p">,</span><span class="w"> </span><span class="n">callback</span><span class="p">)</span><span class="w"> </span><span class="err">{</span><span class="w"></span>

<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">ファイルを集める</span><span class="w"></span>
<span class="w">    </span><span class="n">filelist</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="k">file</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">callback</span><span class="p">()</span><span class="n">は必ず実行</span><span class="w"></span>
<span class="w">    </span><span class="n">callback</span><span class="p">();</span><span class="w"></span>
<span class="err">}</span><span class="w"></span>

<span class="k">function</span><span class="w"> </span><span class="n">flush</span><span class="p">(</span><span class="n">callback</span><span class="p">)</span><span class="w"> </span><span class="err">{</span><span class="w"></span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">filelist</span><span class="p">.</span><span class="n">length</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="err">{</span><span class="w"></span>

<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">sortすることで日付順に並ぶ</span><span class="w"></span>
<span class="w">        </span><span class="n">filelist</span><span class="p">.</span><span class="n">sort</span><span class="p">(</span><span class="k">function</span><span class="w"> </span><span class="n">compareNumbers</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="k">path</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="k">path</span><span class="p">)</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="err">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="err">}</span><span class="w"></span>
<span class="w">        </span><span class="err">}</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="nf">var</span><span class="w"> </span><span class="k">file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">filelist</span><span class="o">[</span><span class="n">0</span><span class="o">]</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">目次</span><span class="w"></span>
<span class="w">        </span><span class="nf">var</span><span class="w"> </span><span class="n">output_map</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">            </span><span class="nl">cwd</span><span class="p">:</span><span class="w"> </span><span class="k">file</span><span class="p">.</span><span class="n">cwd</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nl">base</span><span class="p">:</span><span class="w"> </span><span class="k">file</span><span class="p">.</span><span class="n">base</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="k">path</span><span class="err">:</span><span class="w"> </span><span class="k">file</span><span class="p">.</span><span class="n">base</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">outputFileName</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="err">}</span><span class="p">;</span><span class="w"></span>
<span class="w">       </span><span class="o">//</span><span class="w"> </span><span class="n">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="n">output_map</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="nf">var</span><span class="w"> </span><span class="k">output</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">gutil</span><span class="p">.</span><span class="k">File</span><span class="p">(</span><span class="n">output_map</span><span class="p">);</span><span class="w"></span>

<span class="w">        </span><span class="nf">var</span><span class="w"> </span><span class="n">html</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'&lt;ul&gt;\n'</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="o">//</span><span class="n">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="n">filelist</span><span class="p">.</span><span class="n">length</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="nf">var</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">filelist</span><span class="p">.</span><span class="n">length</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">            </span><span class="nf">var</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">filelist</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="nf">var</span><span class="w"> </span><span class="n">rel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dest</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="ss">"/"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">f</span><span class="p">.</span><span class="k">path</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="n">f</span><span class="p">.</span><span class="n">base</span><span class="p">.</span><span class="n">length</span><span class="p">).</span><span class="nf">replace</span><span class="p">(</span><span class="o">/</span><span class="err">\\</span><span class="o">/</span><span class="n">g</span><span class="p">,</span><span class="w"> </span><span class="s1">'/'</span><span class="p">);</span><span class="w"></span>
<span class="w">            </span><span class="o">//</span><span class="n">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="n">rel</span><span class="p">);</span><span class="w">              </span>
<span class="w">            </span><span class="n">html</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="s1">'&lt;li&gt;&lt;a href="'</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">rel</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">'"&gt;'</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">f</span><span class="p">.</span><span class="n">frontMatter</span><span class="p">.</span><span class="n">title</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">'&lt;/a&gt;&lt;/li&gt;\n'</span><span class="p">;</span><span class="w"></span>

<span class="w">            </span><span class="o">//</span><span class="w"> </span><span class="n">各アイテムのfrontMatterにnextとprevを付ける</span><span class="w"></span>
<span class="w">            </span><span class="o">//</span><span class="w"> </span><span class="n">降順に並んでいる</span><span class="w"></span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">                </span><span class="o">//</span><span class="w"> </span><span class="n">先頭</span><span class="w"></span>
<span class="w">                </span><span class="n">f</span><span class="p">.</span><span class="n">frontMatter</span><span class="p">.</span><span class="k">next</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">""</span><span class="p">;</span><span class="w"></span>
<span class="w">                </span><span class="n">f</span><span class="p">.</span><span class="n">frontMatter</span><span class="p">.</span><span class="n">prev</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">path</span><span class="p">.</span><span class="k">relative</span><span class="p">(</span><span class="k">path</span><span class="p">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">f</span><span class="p">.</span><span class="k">path</span><span class="p">),</span><span class="w"> </span><span class="n">filelist</span><span class="o">[</span><span class="n">i + 1</span><span class="o">]</span><span class="p">.</span><span class="k">path</span><span class="p">).</span><span class="nf">replace</span><span class="p">(</span><span class="o">/</span><span class="err">\\</span><span class="o">/</span><span class="n">g</span><span class="p">,</span><span class="w"> </span><span class="s1">'/'</span><span class="p">);</span><span class="w"></span>
<span class="w">            </span><span class="err">}</span><span class="w"></span>
<span class="w">            </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="n">filelist</span><span class="p">.</span><span class="n">length</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">                </span><span class="o">//</span><span class="w"> </span><span class="n">終端</span><span class="w"></span>
<span class="w">                </span><span class="n">f</span><span class="p">.</span><span class="n">frontMatter</span><span class="p">.</span><span class="k">next</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">path</span><span class="p">.</span><span class="k">relative</span><span class="p">(</span><span class="k">path</span><span class="p">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">f</span><span class="p">.</span><span class="k">path</span><span class="p">),</span><span class="w"> </span><span class="n">filelist</span><span class="o">[</span><span class="n">i - 1</span><span class="o">]</span><span class="p">.</span><span class="k">path</span><span class="p">).</span><span class="nf">replace</span><span class="p">(</span><span class="o">/</span><span class="err">\\</span><span class="o">/</span><span class="n">g</span><span class="p">,</span><span class="w"> </span><span class="s1">'/'</span><span class="p">);</span><span class="w"></span>
<span class="w">                </span><span class="n">f</span><span class="p">.</span><span class="n">frontMatter</span><span class="p">.</span><span class="n">prev</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">""</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="err">}</span><span class="w"></span>
<span class="w">            </span><span class="k">else</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">                </span><span class="n">f</span><span class="p">.</span><span class="n">frontMatter</span><span class="p">.</span><span class="k">next</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">path</span><span class="p">.</span><span class="k">relative</span><span class="p">(</span><span class="k">path</span><span class="p">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">f</span><span class="p">.</span><span class="k">path</span><span class="p">),</span><span class="w"> </span><span class="n">filelist</span><span class="o">[</span><span class="n">i - 1</span><span class="o">]</span><span class="p">.</span><span class="k">path</span><span class="p">).</span><span class="nf">replace</span><span class="p">(</span><span class="o">/</span><span class="err">\\</span><span class="o">/</span><span class="n">g</span><span class="p">,</span><span class="w"> </span><span class="s1">'/'</span><span class="p">);</span><span class="w"></span>
<span class="w">                </span><span class="n">f</span><span class="p">.</span><span class="n">frontMatter</span><span class="p">.</span><span class="n">prev</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">path</span><span class="p">.</span><span class="k">relative</span><span class="p">(</span><span class="k">path</span><span class="p">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">f</span><span class="p">.</span><span class="k">path</span><span class="p">),</span><span class="w"> </span><span class="n">filelist</span><span class="o">[</span><span class="n">i + 1</span><span class="o">]</span><span class="p">.</span><span class="k">path</span><span class="p">).</span><span class="nf">replace</span><span class="p">(</span><span class="o">/</span><span class="err">\\</span><span class="o">/</span><span class="n">g</span><span class="p">,</span><span class="w"> </span><span class="s1">'/'</span><span class="p">);</span><span class="w"></span>
<span class="w">            </span><span class="err">}</span><span class="w"></span>
<span class="w">        </span><span class="err">}</span><span class="w"></span>
<span class="w">        </span><span class="n">html</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="s1">'&lt;/ul&gt;\n'</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="k">output</span><span class="p">.</span><span class="n">contents</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Buffer</span><span class="p">(</span><span class="n">html</span><span class="p">);</span><span class="w"></span>

<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">filelistをoutputにくっつける</span><span class="w"></span>
<span class="w">        </span><span class="k">output</span><span class="p">.</span><span class="n">filelist</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">filelist</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="n">this</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="k">output</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="err">}</span><span class="w"></span>

<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">callback</span><span class="p">()</span><span class="n">は必ず実行</span><span class="w"></span>
<span class="w">    </span><span class="n">callback</span><span class="p">();</span><span class="w"></span>
<span class="err">}</span><span class="w"></span>

<span class="k">return</span><span class="w"> </span><span class="n">through</span><span class="p">.</span><span class="n">obj</span><span class="p">(</span><span class="n">transform</span><span class="p">,</span><span class="w"> </span><span class="n">flush</span><span class="p">);</span><span class="w"></span>
</pre>
<p>};</p>
<p>resplit.js
var through = require('through2');
var gutil = require('gulp-util');
var path = require('path');</p>
<p>module.exports = function () {</p>
<pre class="code literal-block"><span class="k">function</span><span class="w"> </span><span class="n">transform</span><span class="p">(</span><span class="k">file</span><span class="p">,</span><span class="w"> </span><span class="n">encoding</span><span class="p">,</span><span class="w"> </span><span class="n">callback</span><span class="p">)</span><span class="w"> </span><span class="err">{</span><span class="w"></span>

<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">ファイルがnullの場合</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">file</span><span class="p">.</span><span class="nf">isNull</span><span class="p">())</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">次のプラグインに処理を渡すためにthis</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="k">file</span><span class="p">)</span><span class="n">しておく</span><span class="w"></span>
<span class="w">        </span><span class="n">this</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="k">file</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">callback</span><span class="p">()</span><span class="n">は必ず実行</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">callback</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="err">}</span><span class="w"></span>

<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">ファイルがstreamの場合</span><span class="err">（</span><span class="n">このサンプルプラグインはstreamに対応しない</span><span class="err">）</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">file</span><span class="p">.</span><span class="n">isStream</span><span class="p">())</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">emit</span><span class="p">(</span><span class="s1">'error'</span><span class="p">)</span><span class="n">を使って</span><span class="err">、</span><span class="n">プラグイン呼び出し側に</span><span class="s1">'error'</span><span class="n">イベントを発生させる</span><span class="w"></span>
<span class="w">        </span><span class="n">this</span><span class="p">.</span><span class="n">emit</span><span class="p">(</span><span class="s1">'error'</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">gutil</span><span class="p">.</span><span class="n">PluginError</span><span class="p">(</span><span class="s1">'gulp-diff'</span><span class="p">,</span><span class="w"> </span><span class="s1">'Streaming not supported'</span><span class="p">));</span><span class="w"></span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">callback</span><span class="p">()</span><span class="n">は必ず実行</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">callback</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="err">}</span><span class="w"></span>

<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">do</span><span class="w"> </span><span class="n">something</span><span class="w"></span>
<span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="nf">var</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="k">file</span><span class="p">.</span><span class="n">filelist</span><span class="p">)</span><span class="err">{</span><span class="w"></span>
<span class="w">        </span><span class="nf">var</span><span class="w"> </span><span class="k">output</span><span class="o">=</span><span class="k">file</span><span class="p">.</span><span class="n">filelist</span><span class="o">[</span><span class="n">key</span><span class="o">]</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="n">this</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="k">output</span><span class="p">);</span><span class="w">           </span>
<span class="w">    </span><span class="err">}</span><span class="w"></span>

<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">callback</span><span class="p">()</span><span class="n">は必ず実行</span><span class="w"></span>
<span class="w">    </span><span class="n">callback</span><span class="p">();</span><span class="w"></span>
<span class="err">}</span><span class="w"></span>

<span class="k">return</span><span class="w"> </span><span class="n">through</span><span class="p">.</span><span class="n">obj</span><span class="p">(</span><span class="n">transform</span><span class="p">);</span><span class="w"></span>
</pre>
<p>};</p>
<p>gulfile.js
gulp.task('posts', function () {
    gulp.src(config.posts)
    // frontMatter処理してhtml化する
        .pipe($.frontMatter({ remove: true }))
        .pipe(myFrontmatter())
        .pipe($.markdown())
    // まとめてsortしてメタ情報を付与して目次を出力する
        .pipe(makeToc('index.html', { dest: 'posts' }))
        .pipe(gulp.dest('build'))
    // 再び分解する
        .pipe(resplit())
    // 以降通常
        .pipe($.debug({ title: 'files:' }))
    // テンプレートを適用して
        .pipe(ejsApplyer({ filename: 'templates/page.ejs' }, { root_path: '../../../../' }))
    // 出力
        .pipe(gulp.dest('build/posts'))
    ;
});</p>

<hr>
<ul class="pager hidden-print">
<li class="previous">
        <a href="../../12/static_site_generator_by_gulp/" rel="prev" title="gulpで静的サイト生成">
            gulpで静的サイト生成 👈
        </a>
    </li>
    <li style="flex-grow: 1">
    <li class="next">
        <a href="../../15/websocket_upgrade/" rel="next" title="BrowserSyncのws設定を知らなかったせいでWebSocketのUpgradeがうまくいかなくてはまる">
            👉 BrowserSyncのws設定を知らなかったせいでWebSocketのUpgradeがうまくいかなくてはまる
        </a>
    </li>
</ul></main><footer id="footer"><p>
            Powered by
            <a href="https://getnikola.com" rel="nofollow">Nikola</a>
        </p>
    </footer>
</body>
</html>
