<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="generator" content="Nikola (getnikola.com)">
<meta name="viewport" content="width=device-width">
<script src="../../../../../assets/js/all-nocdn.js"></script><title>gulpã§é™çš„ã‚µã‚¤ãƒˆç”Ÿæˆãã®ï¼’ | ä¸‰æ¬¡å…ƒæ—¥èªŒ</title>
<link href="../../../../../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../../../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
</head>
<body>
    <h1 id="brand">
        <a href="../../../../../" title="ä¸‰æ¬¡å…ƒæ—¥èªŒ" rel="home">
            <span id="blog-title">ä¸‰æ¬¡å…ƒæ—¥èªŒ</span>
        </a>
    </h1>

    <nav id="menu"><ul>
<li><a href="../../../../../archive.html">Archives</a></li>
<li><a href="../../../../../categories/index.html">Tags</a></li>
<li><a href="../../../../../rss.xml">RSS feed</a></li>
<li><a href="../../../../../about">About</a></li>
<li><a href="../../../../../books">MemoBooks</a></li>

            
            
            
        </ul></nav><hr>
<main id="content"><h1 class="p-name entry-title" itemprop="headline name">
    <h1 class="p-name entry-title" itemprop="headline name">
    <a href="." class="u-url">gulpã§é™çš„ã‚µã‚¤ãƒˆç”Ÿæˆãã®ï¼’
    </a>
</h1>
<ul itemprop="keywords" class="tags">
<li>
        <time datetime="2015-11-14T00:00:00+09:00" title="2015-11-14">2015-11-14</time>
</li>
</ul>
</h1>

<p>gulpã§é™çš„ã‚µã‚¤ãƒˆç”Ÿæˆãã®ï¼’
å¼•ãç¶šãã€ã‚µã‚¤ãƒˆç”Ÿæˆä½œæ¥­ã‚’ç¶šè¡Œä¸­ã€‚è¦‹ãŸç›®ã¯ç½®ã„ã¦ãŠã„ã¦(bootstrapå…¥ã‚ŒãŸã‘ã©)æ©Ÿèƒ½ã‚’å„ªå…ˆã—ã¦ä½œã‚ã†ã€‚
ã€Œæ¬¡ã¸ã€ã¨ã€Œå‰ã¸ã€ã®ãƒªãƒ³ã‚¯ã‚’ä½œã‚Œã°å†…éƒ¨ãƒªãƒ³ã‚¯ã¯æƒã†ã€‚
gulpã¯è‡ªç”±åº¦ãŒé«˜ã„ã®ã§ãªã‚“ã¨ã§ã‚‚ãªã‚‹ãªã€‚
å¼·ã¾ã£ãŸmakeã®ã‚ˆã†ã§éå¸¸ã«ãƒãƒ†ãƒ³ã‚·ãƒ£ãƒ«ã‚’æ„Ÿã˜ã‚‹ã€‚
ä¸­æœŸçš„ãªã‚‚ç›®æ¨™ã¨ã—ã¦ã¯ãƒ­ãƒ¼ã‚«ãƒ«ã‚‚ã—ãã¯LANå†…ã®node.jsãŒãƒ›ã‚¹ãƒˆã¨ãªã‚‹GUIã‚’ã•ãã£ã¨ä½œã‚Œã‚‹ã‚ˆã†ã«ãªã‚‹ã¨ã„ã†ã‚‚ã®ãŒã‚ã‚‹ã®ã ãŒã€
é–¢é€£é …ç›®ãŒå¤šã™ãã¦ã²ãŸã™ã‚‰æ‹¡ãŒã£ã¦ã„ãã®ãŒå±é™ºã ã€‚
ç‰¹ã«ã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã§èª¿ã¹ãªãŒã‚‰ã ã¨åæŸã›ãšã«ã²ãŸã™ã‚‰æ‹¡æ•£ã™ã‚‹å‚¾å‘ãŒã‚ã‚‹ã€‚
anglar, backboneã¯é¿ã‘ã‚ˆã†ã¨æ€ã£ãŸã®ã ãŒmithrilã¯æ°—ã«ãªã£ã¦ã„ã‚‹ã—ã€electronã‚‚æ°—ã«ãªã£ã¦ã„ã‚‹ã€‚
ã‚ã¨ã€typescriptã‚‚ã¯ã‚„ã‚ã«ä½¿ã„ã“ãªã—ãŸã„ã€‚
ã ã„ã¶gulpãŒã‚ã‹ã£ã¦ããŸ
ã€Œå‰ã¸ã€ã¨ã€Œæ¬¡ã¸ã€ã¯å…¨éƒ¨ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒªã‚¹ãƒˆã«æŠ•å…¥ã—ã¦ã‚½ãƒ¼ãƒˆã—ã¦éš£é€šã—ã®ãƒ‘ã‚¹ã‚’å¾—ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚
ä¸€åº¦ãƒªã‚¹ãƒˆã«æŠ•å…¥ã—ã¦ã‹ã‚‰å‰ã¸ã¨æ¬¡ã¸ã‚’å‡¦ç†ã—ãŸå¾Œã§ã€å†åº¦ãƒªã‚¹ãƒˆã®ä¸­èº«ã‚’ä¸€å€‹ãšã¤å¾Œã‚ã«æ¸¡ã›ã°ã„ã„ã˜ã‚ƒãªã„ã€‚
ã¨ã„ã†ã“ã¨ã§ã‚„ã£ã¦ã¿ãŸã‚‰ã‚ã£ã•ã‚Šã§ããŸã€‚
é‡è‰¯ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ä½œã‚Šæ–¹ãŒåˆ†ã‹ã‚‹ã¨gulpé¢ç™½ã„ãªã€‚
make-toc.js
var through = require('through2');
var gutil = require('gulp-util');
var path = require('path');</p>
<p>module.exports = function (outputFileName, options) {</p>
<pre class="code literal-block"><span class="n">options</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">options</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="err">{}</span><span class="p">;</span><span class="w"></span>
<span class="nf">var</span><span class="w"> </span><span class="n">dest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">options</span><span class="p">.</span><span class="n">dest</span><span class="p">;</span><span class="w"></span>
<span class="nf">var</span><span class="w"> </span><span class="n">filelist</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">[]</span><span class="p">;</span><span class="w"></span>

<span class="k">function</span><span class="w"> </span><span class="n">transform</span><span class="p">(</span><span class="k">file</span><span class="p">,</span><span class="w"> </span><span class="n">encoding</span><span class="p">,</span><span class="w"> </span><span class="n">callback</span><span class="p">)</span><span class="w"> </span><span class="err">{</span><span class="w"></span>

<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é›†ã‚ã‚‹</span><span class="w"></span>
<span class="w">    </span><span class="n">filelist</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="k">file</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">callback</span><span class="p">()</span><span class="n">ã¯å¿…ãšå®Ÿè¡Œ</span><span class="w"></span>
<span class="w">    </span><span class="n">callback</span><span class="p">();</span><span class="w"></span>
<span class="err">}</span><span class="w"></span>

<span class="k">function</span><span class="w"> </span><span class="n">flush</span><span class="p">(</span><span class="n">callback</span><span class="p">)</span><span class="w"> </span><span class="err">{</span><span class="w"></span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">filelist</span><span class="p">.</span><span class="n">length</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="err">{</span><span class="w"></span>

<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">sortã™ã‚‹ã“ã¨ã§æ—¥ä»˜é †ã«ä¸¦ã¶</span><span class="w"></span>
<span class="w">        </span><span class="n">filelist</span><span class="p">.</span><span class="n">sort</span><span class="p">(</span><span class="k">function</span><span class="w"> </span><span class="n">compareNumbers</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="k">path</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="k">path</span><span class="p">)</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="err">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="err">}</span><span class="w"></span>
<span class="w">        </span><span class="err">}</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="nf">var</span><span class="w"> </span><span class="k">file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">filelist</span><span class="o">[</span><span class="n">0</span><span class="o">]</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">ç›®æ¬¡</span><span class="w"></span>
<span class="w">        </span><span class="nf">var</span><span class="w"> </span><span class="n">output_map</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">            </span><span class="nl">cwd</span><span class="p">:</span><span class="w"> </span><span class="k">file</span><span class="p">.</span><span class="n">cwd</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nl">base</span><span class="p">:</span><span class="w"> </span><span class="k">file</span><span class="p">.</span><span class="n">base</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="k">path</span><span class="err">:</span><span class="w"> </span><span class="k">file</span><span class="p">.</span><span class="n">base</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">outputFileName</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="err">}</span><span class="p">;</span><span class="w"></span>
<span class="w">       </span><span class="o">//</span><span class="w"> </span><span class="n">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="n">output_map</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="nf">var</span><span class="w"> </span><span class="k">output</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">gutil</span><span class="p">.</span><span class="k">File</span><span class="p">(</span><span class="n">output_map</span><span class="p">);</span><span class="w"></span>

<span class="w">        </span><span class="nf">var</span><span class="w"> </span><span class="n">html</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'&lt;ul&gt;\n'</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="o">//</span><span class="n">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="n">filelist</span><span class="p">.</span><span class="n">length</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="nf">var</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">filelist</span><span class="p">.</span><span class="n">length</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">            </span><span class="nf">var</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">filelist</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="nf">var</span><span class="w"> </span><span class="n">rel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dest</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="ss">"/"</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">f</span><span class="p">.</span><span class="k">path</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="n">f</span><span class="p">.</span><span class="n">base</span><span class="p">.</span><span class="n">length</span><span class="p">).</span><span class="nf">replace</span><span class="p">(</span><span class="o">/</span><span class="err">\\</span><span class="o">/</span><span class="n">g</span><span class="p">,</span><span class="w"> </span><span class="s1">'/'</span><span class="p">);</span><span class="w"></span>
<span class="w">            </span><span class="o">//</span><span class="n">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="n">rel</span><span class="p">);</span><span class="w">              </span>
<span class="w">            </span><span class="n">html</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="s1">'&lt;li&gt;&lt;a href="'</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">rel</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">'"&gt;'</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">f</span><span class="p">.</span><span class="n">frontMatter</span><span class="p">.</span><span class="n">title</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">'&lt;/a&gt;&lt;/li&gt;\n'</span><span class="p">;</span><span class="w"></span>

<span class="w">            </span><span class="o">//</span><span class="w"> </span><span class="n">å„ã‚¢ã‚¤ãƒ†ãƒ ã®frontMatterã«nextã¨prevã‚’ä»˜ã‘ã‚‹</span><span class="w"></span>
<span class="w">            </span><span class="o">//</span><span class="w"> </span><span class="n">é™é †ã«ä¸¦ã‚“ã§ã„ã‚‹</span><span class="w"></span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">                </span><span class="o">//</span><span class="w"> </span><span class="n">å…ˆé ­</span><span class="w"></span>
<span class="w">                </span><span class="n">f</span><span class="p">.</span><span class="n">frontMatter</span><span class="p">.</span><span class="k">next</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">""</span><span class="p">;</span><span class="w"></span>
<span class="w">                </span><span class="n">f</span><span class="p">.</span><span class="n">frontMatter</span><span class="p">.</span><span class="n">prev</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">path</span><span class="p">.</span><span class="k">relative</span><span class="p">(</span><span class="k">path</span><span class="p">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">f</span><span class="p">.</span><span class="k">path</span><span class="p">),</span><span class="w"> </span><span class="n">filelist</span><span class="o">[</span><span class="n">i + 1</span><span class="o">]</span><span class="p">.</span><span class="k">path</span><span class="p">).</span><span class="nf">replace</span><span class="p">(</span><span class="o">/</span><span class="err">\\</span><span class="o">/</span><span class="n">g</span><span class="p">,</span><span class="w"> </span><span class="s1">'/'</span><span class="p">);</span><span class="w"></span>
<span class="w">            </span><span class="err">}</span><span class="w"></span>
<span class="w">            </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="n">filelist</span><span class="p">.</span><span class="n">length</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">                </span><span class="o">//</span><span class="w"> </span><span class="n">çµ‚ç«¯</span><span class="w"></span>
<span class="w">                </span><span class="n">f</span><span class="p">.</span><span class="n">frontMatter</span><span class="p">.</span><span class="k">next</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">path</span><span class="p">.</span><span class="k">relative</span><span class="p">(</span><span class="k">path</span><span class="p">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">f</span><span class="p">.</span><span class="k">path</span><span class="p">),</span><span class="w"> </span><span class="n">filelist</span><span class="o">[</span><span class="n">i - 1</span><span class="o">]</span><span class="p">.</span><span class="k">path</span><span class="p">).</span><span class="nf">replace</span><span class="p">(</span><span class="o">/</span><span class="err">\\</span><span class="o">/</span><span class="n">g</span><span class="p">,</span><span class="w"> </span><span class="s1">'/'</span><span class="p">);</span><span class="w"></span>
<span class="w">                </span><span class="n">f</span><span class="p">.</span><span class="n">frontMatter</span><span class="p">.</span><span class="n">prev</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">""</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="err">}</span><span class="w"></span>
<span class="w">            </span><span class="k">else</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">                </span><span class="n">f</span><span class="p">.</span><span class="n">frontMatter</span><span class="p">.</span><span class="k">next</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">path</span><span class="p">.</span><span class="k">relative</span><span class="p">(</span><span class="k">path</span><span class="p">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">f</span><span class="p">.</span><span class="k">path</span><span class="p">),</span><span class="w"> </span><span class="n">filelist</span><span class="o">[</span><span class="n">i - 1</span><span class="o">]</span><span class="p">.</span><span class="k">path</span><span class="p">).</span><span class="nf">replace</span><span class="p">(</span><span class="o">/</span><span class="err">\\</span><span class="o">/</span><span class="n">g</span><span class="p">,</span><span class="w"> </span><span class="s1">'/'</span><span class="p">);</span><span class="w"></span>
<span class="w">                </span><span class="n">f</span><span class="p">.</span><span class="n">frontMatter</span><span class="p">.</span><span class="n">prev</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">path</span><span class="p">.</span><span class="k">relative</span><span class="p">(</span><span class="k">path</span><span class="p">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">f</span><span class="p">.</span><span class="k">path</span><span class="p">),</span><span class="w"> </span><span class="n">filelist</span><span class="o">[</span><span class="n">i + 1</span><span class="o">]</span><span class="p">.</span><span class="k">path</span><span class="p">).</span><span class="nf">replace</span><span class="p">(</span><span class="o">/</span><span class="err">\\</span><span class="o">/</span><span class="n">g</span><span class="p">,</span><span class="w"> </span><span class="s1">'/'</span><span class="p">);</span><span class="w"></span>
<span class="w">            </span><span class="err">}</span><span class="w"></span>
<span class="w">        </span><span class="err">}</span><span class="w"></span>
<span class="w">        </span><span class="n">html</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="s1">'&lt;/ul&gt;\n'</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="k">output</span><span class="p">.</span><span class="n">contents</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Buffer</span><span class="p">(</span><span class="n">html</span><span class="p">);</span><span class="w"></span>

<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">filelistã‚’outputã«ãã£ã¤ã‘ã‚‹</span><span class="w"></span>
<span class="w">        </span><span class="k">output</span><span class="p">.</span><span class="n">filelist</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">filelist</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="n">this</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="k">output</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="err">}</span><span class="w"></span>

<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">callback</span><span class="p">()</span><span class="n">ã¯å¿…ãšå®Ÿè¡Œ</span><span class="w"></span>
<span class="w">    </span><span class="n">callback</span><span class="p">();</span><span class="w"></span>
<span class="err">}</span><span class="w"></span>

<span class="k">return</span><span class="w"> </span><span class="n">through</span><span class="p">.</span><span class="n">obj</span><span class="p">(</span><span class="n">transform</span><span class="p">,</span><span class="w"> </span><span class="n">flush</span><span class="p">);</span><span class="w"></span>
</pre>
<p>};</p>
<p>resplit.js
var through = require('through2');
var gutil = require('gulp-util');
var path = require('path');</p>
<p>module.exports = function () {</p>
<pre class="code literal-block"><span class="k">function</span><span class="w"> </span><span class="n">transform</span><span class="p">(</span><span class="k">file</span><span class="p">,</span><span class="w"> </span><span class="n">encoding</span><span class="p">,</span><span class="w"> </span><span class="n">callback</span><span class="p">)</span><span class="w"> </span><span class="err">{</span><span class="w"></span>

<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">ãƒ•ã‚¡ã‚¤ãƒ«ãŒnullã®å ´åˆ</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">file</span><span class="p">.</span><span class="nf">isNull</span><span class="p">())</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">æ¬¡ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã«å‡¦ç†ã‚’æ¸¡ã™ãŸã‚ã«this</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="k">file</span><span class="p">)</span><span class="n">ã—ã¦ãŠã</span><span class="w"></span>
<span class="w">        </span><span class="n">this</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="k">file</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">callback</span><span class="p">()</span><span class="n">ã¯å¿…ãšå®Ÿè¡Œ</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">callback</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="err">}</span><span class="w"></span>

<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">ãƒ•ã‚¡ã‚¤ãƒ«ãŒstreamã®å ´åˆ</span><span class="err">ï¼ˆ</span><span class="n">ã“ã®ã‚µãƒ³ãƒ—ãƒ«ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¯streamã«å¯¾å¿œã—ãªã„</span><span class="err">ï¼‰</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">file</span><span class="p">.</span><span class="n">isStream</span><span class="p">())</span><span class="w"> </span><span class="err">{</span><span class="w"></span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">emit</span><span class="p">(</span><span class="s1">'error'</span><span class="p">)</span><span class="n">ã‚’ä½¿ã£ã¦</span><span class="err">ã€</span><span class="n">ãƒ—ãƒ©ã‚°ã‚¤ãƒ³å‘¼ã³å‡ºã—å´ã«</span><span class="s1">'error'</span><span class="n">ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç™ºç”Ÿã•ã›ã‚‹</span><span class="w"></span>
<span class="w">        </span><span class="n">this</span><span class="p">.</span><span class="n">emit</span><span class="p">(</span><span class="s1">'error'</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">gutil</span><span class="p">.</span><span class="n">PluginError</span><span class="p">(</span><span class="s1">'gulp-diff'</span><span class="p">,</span><span class="w"> </span><span class="s1">'Streaming not supported'</span><span class="p">));</span><span class="w"></span>
<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="n">callback</span><span class="p">()</span><span class="n">ã¯å¿…ãšå®Ÿè¡Œ</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">callback</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="err">}</span><span class="w"></span>

<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">do</span><span class="w"> </span><span class="n">something</span><span class="w"></span>
<span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="nf">var</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="k">file</span><span class="p">.</span><span class="n">filelist</span><span class="p">)</span><span class="err">{</span><span class="w"></span>
<span class="w">        </span><span class="nf">var</span><span class="w"> </span><span class="k">output</span><span class="o">=</span><span class="k">file</span><span class="p">.</span><span class="n">filelist</span><span class="o">[</span><span class="n">key</span><span class="o">]</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="n">this</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="k">output</span><span class="p">);</span><span class="w">           </span>
<span class="w">    </span><span class="err">}</span><span class="w"></span>

<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">callback</span><span class="p">()</span><span class="n">ã¯å¿…ãšå®Ÿè¡Œ</span><span class="w"></span>
<span class="w">    </span><span class="n">callback</span><span class="p">();</span><span class="w"></span>
<span class="err">}</span><span class="w"></span>

<span class="k">return</span><span class="w"> </span><span class="n">through</span><span class="p">.</span><span class="n">obj</span><span class="p">(</span><span class="n">transform</span><span class="p">);</span><span class="w"></span>
</pre>
<p>};</p>
<p>gulfile.js
gulp.task('posts', function () {
    gulp.src(config.posts)
    // frontMatterå‡¦ç†ã—ã¦htmlåŒ–ã™ã‚‹
        .pipe($.frontMatter({ remove: true }))
        .pipe(myFrontmatter())
        .pipe($.markdown())
    // ã¾ã¨ã‚ã¦sortã—ã¦ãƒ¡ã‚¿æƒ…å ±ã‚’ä»˜ä¸ã—ã¦ç›®æ¬¡ã‚’å‡ºåŠ›ã™ã‚‹
        .pipe(makeToc('index.html', { dest: 'posts' }))
        .pipe(gulp.dest('build'))
    // å†ã³åˆ†è§£ã™ã‚‹
        .pipe(resplit())
    // ä»¥é™é€šå¸¸
        .pipe($.debug({ title: 'files:' }))
    // ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’é©ç”¨ã—ã¦
        .pipe(ejsApplyer({ filename: 'templates/page.ejs' }, { root_path: '../../../../' }))
    // å‡ºåŠ›
        .pipe(gulp.dest('build/posts'))
    ;
});</p>

<hr>
<ul class="pager hidden-print">
<li class="previous">
        <a href="../../12/static_site_generator_by_gulp/" rel="prev" title="gulpã§é™çš„ã‚µã‚¤ãƒˆç”Ÿæˆ">
            gulpã§é™çš„ã‚µã‚¤ãƒˆç”Ÿæˆ ğŸ‘ˆ
        </a>
    </li>
    <li style="flex-grow: 1">
    <li class="next">
        <a href="../../15/websocket_upgrade/" rel="next" title="BrowserSyncã®wsè¨­å®šã‚’çŸ¥ã‚‰ãªã‹ã£ãŸã›ã„ã§WebSocketã®UpgradeãŒã†ã¾ãã„ã‹ãªãã¦ã¯ã¾ã‚‹">
            ğŸ‘‰ BrowserSyncã®wsè¨­å®šã‚’çŸ¥ã‚‰ãªã‹ã£ãŸã›ã„ã§WebSocketã®UpgradeãŒã†ã¾ãã„ã‹ãªãã¦ã¯ã¾ã‚‹
        </a>
    </li>
</ul></main><footer id="footer"><p>
            Powered by
            <a href="https://getnikola.com" rel="nofollow">Nikola</a>
        </p>
    </footer>
</body>
</html>
