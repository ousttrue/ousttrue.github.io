<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="generator" content="Nikola (getnikola.com)">
<meta name="viewport" content="width=device-width">
<script src="../../../../../assets/js/all-nocdn.js"></script><title>å¯å¤‰é•·ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå¼•æ•° | ä¸‰æ¬¡å…ƒæ—¥èªŒ</title>
<link href="../../../../../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../../../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
</head>
<body>
    <h1 id="brand">
        <a href="../../../../../" title="ä¸‰æ¬¡å…ƒæ—¥èªŒ" rel="home">
            <span id="blog-title">ä¸‰æ¬¡å…ƒæ—¥èªŒ</span>
        </a>
    </h1>

    <nav id="menu"><ul>
<li><a href="../../../../../archive.html">Archives</a></li>
<li><a href="../../../../../categories/index.html">Tags</a></li>
<li><a href="../../../../../rss.xml">RSS feed</a></li>
<li><a href="../../../../../about">About</a></li>
<li><a href="../../../../../books">MemoBooks</a></li>

            
            
            
        </ul></nav><hr>
<main id="content"><h1 class="p-name entry-title" itemprop="headline name">
    <h1 class="p-name entry-title" itemprop="headline name">
    <a href="." class="u-url">å¯å¤‰é•·ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå¼•æ•°
    </a>
</h1>
<ul itemprop="keywords" class="tags">
<li>
        <time datetime="2013-05-17T00:00:00+09:00" title="2013-05-17">2013-05-17</time>
</li>
</ul>
</h1>

<div>
<p>å¯å¤‰é•·ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå¼•æ•°
å¼•ãç¶šãmsgpack-rpc-asioã‚’å®Ÿè£…ã—ã¦ã„ã‚‹ã®ã ãŒã€å¯å¤‰é•·ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå¼•æ•°(valiadic
template)ã‚’ä½¿ã†ã¨é–¢æ•°ç™»éŒ²ã®ã‚ˆã†ãªå ´åˆã«ã†ã¾ãæ›¸ã‘ã‚‹ã“ã¨ãŒã‚ã‹ã£ãŸã€‚
æ˜¨æ—¥ã¯é–¢æ•°ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰std::functionã®å‹ã‚’å¾—ã‚‹ã®ã«ä¸‹è¨˜ã®ã‚ˆã†ã«ã—ã¦ã„ãŸã®ã ã‘ã©ã€
```c++ // ret template Ret helper0(Ret (F::<em>)(Restâ€¦));
template Ret helper0(Ret (F::</em>)(Restâ€¦) const);
// 1 template A1 helper1(Ret (F::<em>)(A1, Restâ€¦));
template A1 helper1(Ret (F::</em>)(A1, Restâ€¦) const);
// 2 template A2 helper2(Ret (F::<em>)(A1, A2, Restâ€¦));
template A2 helper2(Ret (F::</em>)(A1, A2, Restâ€¦) const);
template void add_handler(F handler, const std::string &amp;method) {
typedef decltype(handler) functor; typedef
decltype(helper0(&amp;functor::operator())) R; typedef
decltype(helper1(&amp;functor::operator())) A1; typedef
decltype(helper2(&amp;functor::operator())) A2;
// register function...
std::function<r a2> func(handler);</r></p>
<p>} æ¬¡ã®ã‚ˆã†ã«æ›¸ã‘ãŸã€‚c++ template void add_handler(F handler,
R(C::*)(A1, A2)const) { // register functionâ€¦ std::function
func(handler); }
template void add_handler(F handler, const std::string &amp;method) {
add_handler(handler, &amp;decltype(handler)::operator()); }
æ˜¨æ—¥å‚ç…§ã•ã›ã¦ã‚‚ã‚‰ã£ãŸ
<a href="http://d.hatena.ne.jp/osyo-manga/20121205/1354674180">http://d.hatena.ne.jp/osyo-manga/20121205/1354674180</a>
ã®ã‚³ãƒ¼ãƒ‰ãŒã‚„ã£ã¨ã‚ã‹ã‚‹ã‚ˆã†ã«ãªã£ã¦ããŸã€‚</p>
<p>ä¸Šè¨˜ã‚³ãƒ¼ãƒ‰ã¯ã•ã‚‰ã«å¯å¤‰é•·ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå¼•æ•°ã§</p>
<p>template void add_handler(F handler, R(C::*)(Aâ€¦)const) { // register
functionâ€¦ std::function func(handler); }
<code>`ã¨æ›¸ã‘ã‚‹ã®ã§ã™ã”ãä¾¿åˆ©ã«ãªã‚‹ã€‚ msgpack-rpcã®é–¢æ•°ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ç™»éŒ²ã‚„ã€luaã®ã‚ˆã†ãªçµ„ã¿è¾¼ã¿è¨€èªã¸ã®é–¢æ•°å…¬é–‹ã®å®Ÿè£…ãŒæ¥½ã«ãªã‚Šãã†ã ã€‚ ä¸Šè¨˜ã‚µã‚¤ãƒˆã§ã‚‚å–ã‚Šä¸Šã’ã‚‰ã‚Œã¦ã„ã‚‹ãŒ&amp;decltype(functor)::operator()</code>ã‚’é–¢æ•°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®å‹æ¨è«–ã«æŠ•ã’ã‚‹ã“ã¨ã§
é–¢æ•°ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰å‹æƒ…å ±ã‚’å–ã‚Œã‚‹ã‚‰ã—ã„ã€‚
æ°—ã‚’ã‚ˆãã—ã¦å„æ‰€ã‚’å¯å¤‰é•·ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå¼•æ•°ã‚’ä½¿ã†ã‚ˆã†ã«æ›¸ãæ›ãˆãŸã®ã ãŒã€
è‡´å‘½çš„ãªå•é¡Œã‚’ç™ºè¦‹ã€‚
vc2010ã¯ãªã‚“ã¨å¯å¤‰é•·ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå¼•æ•°ã‚’æœªå®Ÿè£…ã ã£ãŸã€‚
c++0xã®æ©Ÿèƒ½ãŒã‚ã‚Šã¨å…¥ã£ã¦ã„ã‚‹ã®ã§ã§ãã‚‹ã¨æ€ã£ã¦ã„ãŸã®ã«ã€‚
msgpack-rpc-asioã¯ã€æ˜ç­ã«vc2010ã‚’ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã«ã—ã¦ã„ã‚‹ã®ã§å¯å¤‰é•·ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå¼•æ•°ã®ä½¿ç”¨ã‚’æ–­å¿µã—ãŸã€‚
ï¼’å¼•æ•°é–¢æ•°ã®æ“ä½œã¾ã§ã—ã‹å®Ÿè£…ã—ã¦ã„ãªã„æ™‚ç‚¹ã§æ°—ä»˜ã„ã¦è‰¯ã‹ã£ãŸã€‚
ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ä¸è¶³ã¯boostä½¿ãˆã°æ¸ˆã‚€ãŒè¨€èªæ©Ÿèƒ½ãŒç„¡ã„ã®ã¯å›°ã‚‹ãªãƒ»ãƒ»ãƒ»ã€‚
vc2012ã«ä¹—ã‚Šæ›ãˆãŸããªã£ãŸã€‚</p>
</div>

<ul class="pager hidden-print">
<li class="previous">
        <a href="../../16/lambda/" rel="prev" title="lambdaã®å¼•æ•°ã®å‹ã‚’å¾—ãŸã„">
            lambdaã®å¼•æ•°ã®å‹ã‚’å¾—ãŸã„ ğŸ‘ˆ
        </a>
    </li>
    <li style="flex-grow: 1">
    <li class="next">
        <a href="../../19/call-with-tuple/" rel="next" title="msgpack-rpc-asioã®é–¢æ•°ç™»éŒ²ã¨å®Ÿè¡Œ">
            ğŸ‘‰ msgpack-rpc-asioã®é–¢æ•°ç™»éŒ²ã¨å®Ÿè¡Œ
        </a>
    </li>
</ul></main><footer id="footer"><p>
            Powered by
            <a href="https://getnikola.com" rel="nofollow">Nikola</a>
        </p>
    </footer>
</body>
</html>
