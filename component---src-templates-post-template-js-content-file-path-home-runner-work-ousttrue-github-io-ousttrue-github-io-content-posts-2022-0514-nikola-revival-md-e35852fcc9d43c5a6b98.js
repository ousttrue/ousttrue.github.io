"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8331],{4571:function(e,t,n){n.r(t),n.d(t,{default:function(){return m}});var a=n(1151),l=n(7294);function s(e){const t=Object.assign({h1:"h1",p:"p",a:"a",h2:"h2",span:"span",h3:"h3"},(0,a.ah)(),e.components);return l.createElement(l.Fragment,null,l.createElement(t.h1,null,"Nikola復活"),"\n",l.createElement(t.p,null,l.createElement(t.a,{href:"https://getnikola.com/"},"nikola")," 復活。"),"\n",l.createElement(t.p,null,l.createElement(t.a,{href:"https://github.com/ousttrue/dotfiles/blob/master/dodo.py"},"https://github.com/ousttrue/dotfiles/blob/master/dodo.py")),"\n",l.createElement(t.p,null,"を作りながら ",l.createElement(t.a,{href:"https://pydoit.org/"},"doit")," を学んだし、 ",l.createElement(t.a,{href:"https://jinja.palletsprojects.com/en/3.1.x/"},"jinja"),"\nも少しやったので、前よりは読めそう。\n使いながら、 nikola のコードを読んで、 doit のカスタムタスクの使い方を眺めてみたい。"),"\n",l.createElement(t.h2,null,"sphinx + ablog + myst との違い"),"\n",l.createElement(t.p,null,"nikola は ",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">frontmatter</code>'}})," で title を決めるが、 sphinx は 本文の先頭の見出しで決めるという違いがある。\nnikola の方も title と 先頭の見出しを同じにする運用にすれば、だいたい同じになると思う。"),"\n",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">conf.py # nikola の設定\ndocs\n  + conf.py # sphinx の設定\n  + posts # content. nikola と sphinx の ablog 両用\n    + post.md</code></pre></div>'}}),"\n",l.createElement(t.p,null,"みたいな感じにしてもだいたい動く。\n細かく違うところはあると思うが。"),"\n",l.createElement(t.h2,null,"動作"),"\n",l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python">    site <span class="token operator">=</span> Nikola<span class="token punctuation">(</span><span class="token operator">**</span>config<span class="token punctuation">)</span>\n    DN <span class="token operator">=</span> DoitNikola<span class="token punctuation">(</span>site<span class="token punctuation">,</span> quiet<span class="token punctuation">)</span>\n    <span class="token keyword">if</span> _RETURN_DOITNIKOLA<span class="token punctuation">:</span>\n        <span class="token keyword">return</span> DN\n    _ <span class="token operator">=</span> DN<span class="token punctuation">.</span>run<span class="token punctuation">(</span>oargs<span class="token punctuation">)</span></code></pre></div>'}}),"\n",l.createElement(t.h3,null,"DoitNikola(DoitMain)"),"\n",l.createElement(t.p,null,l.createElement(t.a,{href:"https://github.com/getnikola/nikola/blob/398d5722d78a27ac5233849e3057f9d787345561/nikola/__main__.py#L301"},"https://github.com/getnikola/nikola/blob/398d5722d78a27ac5233849e3057f9d787345561/nikola/__main__.py#L301")),"\n",l.createElement(t.p,null,"ここから入っていく。"),"\n",l.createElement(t.p,null,l.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">from doit.cmd_base import TaskLoader2</code>'}})),"\n",l.createElement(t.p,null,l.createElement(t.a,{href:"https://pydoit.org/extending.html?highlight=taskloader#doit.cmd_base.TaskLoader2"},"https://pydoit.org/extending.html?highlight=taskloader#doit.cmd_base.TaskLoader2")),"\n",l.createElement(t.h3,null,"NikolaTaskLoader(TaskLoader2)"),"\n",l.createElement(t.p,null,l.createElement(t.a,{href:"https://github.com/getnikola/nikola/blob/398d5722d78a27ac5233849e3057f9d787345561/nikola/__main__.py#L257"},"https://github.com/getnikola/nikola/blob/398d5722d78a27ac5233849e3057f9d787345561/nikola/__main__.py#L257")))}var o=function(e){void 0===e&&(e={});const{wrapper:t}=Object.assign({},(0,a.ah)(),e.components);return t?l.createElement(t,e,l.createElement(s,e)):s(e)},c=n(8678),r=n(1883),p=n(8838);const i={code:e=>{let{children:t,className:n}=e;return n?l.createElement(p.Z,{className:n},t):l.createElement("code",null,t)}};function u(e){let{data:t,children:n}=e;const s=t.mdx.frontmatter;return l.createElement(c.Z,null,l.createElement("h1",null,s.title),l.createElement("div",{className:"tags-index"},s.tags&&s.tags.length>0&&s.tags.map((e=>l.createElement(r.rU,{to:"/tags/"+e+"/",itemProp:"url"},l.createElement("button",null,e))))),l.createElement(a.Zo,{components:i},n))}function m(e){return l.createElement(u,e,l.createElement(o,e))}}}]);
//# sourceMappingURL=component---src-templates-post-template-js-content-file-path-home-runner-work-ousttrue-github-io-ousttrue-github-io-content-posts-2022-0514-nikola-revival-md-e35852fcc9d43c5a6b98.js.map