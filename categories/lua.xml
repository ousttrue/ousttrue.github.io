<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="../assets/xml/rss.xsl" media="all"?><rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>ä¸‰æ¬¡å…ƒæ—¥èªŒ (luaã«ã¤ã„ã¦ã®è¨˜äº‹)</title><link>https://ousttrue.github.io/</link><description></description><atom:link href="https://ousttrue.github.io/categories/lua.xml" rel="self" type="application/rss+xml"></atom:link><language>ja</language><copyright>Contents Â© 2021 &lt;a href="mailto:ousttrue@gmail.com"&gt;ousttrue&lt;/a&gt; </copyright><lastBuildDate>Sat, 04 Dec 2021 17:19:06 GMT</lastBuildDate><generator>Nikola (getnikola.com)</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>Lua Language Server è§£èª­</title><link>https://ousttrue.github.io/posts/2021/summer/lua_language_server/</link><dc:creator>ousttrue</dc:creator><description>&lt;div&gt;&lt;p&gt;&lt;a href="https://github.com/sumneko/lua-language-server"&gt;lua-language-server&lt;/a&gt; ãŒ luajit ffi ã®ã‚¤ãƒ³ãƒ†ãƒªã‚»ãƒ³ã‚¹ã‚’å‡ºã›ã‚‹ã‚ˆã†ã« emmylua annotation ã‚’ç”Ÿæˆã™ã‚‹ã‚ˆã‚Šã€
&lt;code&gt;ffi.cdef&lt;/code&gt; ã‚’èª­ã‚ã‚‹ã‚ˆã†ã«ã™ã‚Œã°ã‚ˆã„ã®ã§ã¯ã€‚
ã¨ã„ã†ã“ã¨ã§ã€lua-language-server ã‚’æ¢ã£ã¦ã¿ã‚‹ã€‚&lt;/p&gt;
&lt;h2&gt;æ§‹æˆ&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://github.com/sumneko/lua-language-server/wiki/Command-line"&gt;https://github.com/sumneko/lua-language-server/wiki/Command-line&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;BINRARY/lua-language-server LUA_LANGUAGE_SERVER/main.lua --logpath=D:/log --metapath=D:/meta --locale=en-us --configpath="config.json"&lt;/code&gt;&lt;/p&gt;
&lt;pre class="code literal-block"&gt;&lt;span&gt;&lt;/span&gt;&amp;gt; .\bin\Windows\lua-language-server.exe --help
lua-language-server.exe:unrecognized option '--help'usage: C:\Users\oustt\ghq\github.com\sumneko\lua-language-server\bin\Windows\lua-language-server.exe [options] [script [args]]
Available options are:
  -e stat  execute string 'stat'
  -i       enter interactive mode after executing 'script'
  -l name  require library 'name' into global 'name'
  -v       show version information
  -E       ignore environment variables
  -W       turn warnings on
  --       stop handling options
  -        stop handling options and execute stdin
&amp;gt; .\bin\Windows\lua-language-server.exe -v    
Lua 5.4.4  Copyright (C) 1994-2021 Lua.org, PUC-Rio  
&lt;/pre&gt;

&lt;p&gt;native ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’åŸ‹ã‚è¾¼ã‚“ã ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ—ãƒªã‚¿ãƒ¼ &lt;code&gt;lua-language-server.exe&lt;/code&gt; ã§ &lt;code&gt;main.lua&lt;/code&gt; ã‚’å®Ÿè¡Œã™ã‚‹ã€‚&lt;/p&gt;
&lt;h3&gt;setting&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;.vscode/settings.json&lt;/code&gt;&lt;/p&gt;
&lt;pre class="code literal-block"&gt;&lt;span&gt;&lt;/span&gt;     &lt;span class="s2"&gt;"Lua.runtime.version"&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;"LuaJIT"&lt;/span&gt;&lt;span class="err"&gt;,&lt;/span&gt;
     &lt;span class="s2"&gt;"Lua.workspace.preloadFileSize"&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;10000&lt;/span&gt;
&lt;/pre&gt;

&lt;h2&gt;LSP&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://microsoft.github.io/language-server-protocol/"&gt;https://microsoft.github.io/language-server-protocol/&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://microsoft.github.io/language-server-protocol/specifications/specification-current/#textDocument_signatureHelp"&gt;signatureHelp&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;main.lua&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;main.lua&lt;ul&gt;
&lt;li&gt;script/service/service.lua&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class="code literal-block"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kr"&gt;function&lt;/span&gt; &lt;span class="nc"&gt;m&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;start&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="n"&gt;util&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;enableCloseFunction&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="n"&gt;await&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setErrorHandle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;log&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;error&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;pub&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;recruitBraves&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="c1"&gt;-- transport&lt;/span&gt;
    &lt;span class="n"&gt;proto&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;listen&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

    &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;report&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pulse&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;reportStatus&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;testVersion&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

    &lt;span class="nb"&gt;require&lt;/span&gt; &lt;span class="s1"&gt;'provider'&lt;/span&gt;

    &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;startTimer&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="kr"&gt;end&lt;/span&gt;
&lt;/pre&gt;

&lt;h2&gt;script/parser&lt;/h2&gt;
&lt;p&gt;lua ã®ã‚³ãƒ¼ãƒ‰è§£æ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;script/parser/parse.lua&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;ast.init(state)&lt;/code&gt;&lt;/p&gt;
&lt;h3&gt;LPeg&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;script/parser/grammar.lua&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="http://www.inf.puc-rio.br/~roberto/lpeg/"&gt;LPeg&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="https://gist.github.com/tacigar/93b30931c879cd8a9b12380724b956aa"&gt;Luaè£½PEGã€ŒLPegã€ã‚’è§¦ã£ã¦ã¿ãŸ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://nymphium.github.io/2015/07/23/lpeg2.html"&gt;LPegã®ä½¿ã„æ–¹ patternãã®2&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://sceneryandfish.withnotes.net/blog/2014/07/22-lua-lpeg-how-to-use/"&gt;LPeg â€“ Parsing Expression Grammars For Luaã®ä½¿ã„æ–¹&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/div&gt;</description><category>lsp</category><category>lua</category><category>luajit</category><guid>https://ousttrue.github.io/posts/2021/summer/lua_language_server/</guid><pubDate>Thu, 05 Aug 2021 15:00:00 GMT</pubDate></item><item><title>Lua ã§ OpenGL</title><link>https://ousttrue.github.io/posts/2021/summer/lua_opengl/</link><dc:creator>ousttrue</dc:creator><description>&lt;figure&gt;&lt;img src="https://ousttrue.github.io/posts/2021/summer/glfw_sample.jpg"&gt;&lt;/figure&gt; &lt;div&gt;&lt;p&gt;imgui bind ãŒã ã„ãŸã„ã§ãã¦è»Œé“ã«ä¹—ã£ãŸã®ã§ã€glTF viewer ã®ä½œæˆã«ã¨ã‚Šã‹ã‹ã‚‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href="https://www.glfw.org/docs/latest/quick.html"&gt;https://www.glfw.org/docs/latest/quick.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ã®å›è»¢ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ä»¥å¤–ã§ããŸã€‚&lt;/p&gt;
&lt;h2&gt;luajit ã® cdef ã§é ‚ç‚¹é…åˆ—ã®å®šç¾©ãŒæ—ã‚‹&lt;/h2&gt;
&lt;pre class="code literal-block"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="k"&gt;struct&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;float&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;float&lt;/span&gt; &lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;g&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="n"&gt;vertices&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;0.6f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;0.4f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mf"&gt;1.f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mf"&gt;0.f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mf"&gt;0.f&lt;/span&gt; &lt;span class="p"&gt;},&lt;/span&gt;
    &lt;span class="p"&gt;{&lt;/span&gt;  &lt;span class="mf"&gt;0.6f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;0.4f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mf"&gt;0.f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mf"&gt;1.f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mf"&gt;0.f&lt;/span&gt; &lt;span class="p"&gt;},&lt;/span&gt;
    &lt;span class="p"&gt;{&lt;/span&gt;   &lt;span class="mf"&gt;0.f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mf"&gt;0.6f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mf"&gt;0.f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mf"&gt;0.f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mf"&gt;1.f&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;};&lt;/span&gt;
&lt;/pre&gt;

&lt;p&gt;ãŒã€&lt;/p&gt;
&lt;pre class="code literal-block"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;ffi&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cdef&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;[[&lt;/span&gt;
&lt;span class="s"&gt;struct Vertex2DRGB&lt;/span&gt;
&lt;span class="s"&gt;{&lt;/span&gt;
&lt;span class="s"&gt;    float x, y;&lt;/span&gt;
&lt;span class="s"&gt;    float r, g, b;&lt;/span&gt;
&lt;span class="s"&gt;};&lt;/span&gt;
&lt;span class="s"&gt;]]&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="kd"&gt;local&lt;/span&gt; &lt;span class="n"&gt;vertices&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ffi&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;new&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="s2"&gt;"struct Vertex2DRGB[3]"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;0.6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;0.4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mf"&gt;1.&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mf"&gt;0.&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mf"&gt;0.&lt;/span&gt; &lt;span class="p"&gt;},&lt;/span&gt;
    &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="mf"&gt;0.6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;0.4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mf"&gt;0.&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mf"&gt;1.&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mf"&gt;0.&lt;/span&gt; &lt;span class="p"&gt;},&lt;/span&gt;
    &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="mf"&gt;0.&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mf"&gt;0.6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mf"&gt;0.&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mf"&gt;0.&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mf"&gt;1.&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;

&lt;p&gt;ãªã©ã¨ã„ã†æ›¸ãæ–¹ãŒã§ãã¦ã—ã¾ã†ã€‚luajit ffi å¼·ã„ã€‚&lt;/p&gt;
&lt;h2&gt;ffi.metatype&lt;/h2&gt;
&lt;p&gt;luajit ã‚’æ´»ã‹ã—ãŸç·šå½¢ä»£æ•°ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’æ¢ç´¢ã—ã¦ã„ã¦ã€&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/bjornbytes/maf"&gt;https://github.com/bjornbytes/maf&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ã‚’è¦‹ã¤ã‘ãŸã€‚&lt;/p&gt;
&lt;p&gt;luajit ffi ã«ã¯ä¾¿åˆ©é–¢æ•°&lt;/p&gt;
&lt;pre class="code literal-block"&gt;&lt;span&gt;&lt;/span&gt;ffi.metatype(ct, metatable)
&lt;/pre&gt;

&lt;p&gt;ãŒã‚ã£ã¦ã€ã“ã‚Œã‚’ä½¿ã†ã¨ ffi.cdef ã—ãŸ C ã® struct ã« lua ã® metatable ã‚’åˆä½“ã§ãã‚‹ã€‚&lt;/p&gt;
&lt;p&gt;ç·šå½¢ä»£æ•°ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯ã€ &lt;code&gt;ffi.metatype&lt;/code&gt; ã‚’ä½¿ã£ã¦è‡ªä½œã—ã¦ã¿ã‚ˆã†(mafã«ã¯vec3 ã¨ quaternion ã—ã‹ãªã„ã®ã‚‚ã‚ã‚Š)ã€‚
ã¤ã„ã§ã«ã€lua ã® unittest ã‚’å–ã‚Šå…¥ã‚Œã¾ã—ã‚‡ã†ã€‚&lt;/p&gt;
&lt;h2&gt;20210830&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;mat4&lt;/code&gt; ã‚’å®Ÿè£…ã—ã¦ã¿ãŸã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/ousttrue/limgui/blob/master/lua/mafex.lua"&gt;https://github.com/ousttrue/limgui/blob/master/lua/mafex.lua&lt;/a&gt;&lt;/p&gt;
&lt;pre class="code literal-block"&gt;&lt;span&gt;&lt;/span&gt;    &lt;span class="k"&gt;typedef&lt;/span&gt; &lt;span class="k"&gt;union&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="kt"&gt;float&lt;/span&gt; &lt;span class="n"&gt;_11&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;_12&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;_13&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;_14&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="kt"&gt;float&lt;/span&gt; &lt;span class="n"&gt;_21&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;_22&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;_23&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;_24&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="kt"&gt;float&lt;/span&gt; &lt;span class="n"&gt;_31&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;_32&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;_33&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;_34&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="kt"&gt;float&lt;/span&gt; &lt;span class="n"&gt;_41&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;_42&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;_43&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;_44&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;};&lt;/span&gt;
        &lt;span class="kt"&gt;float&lt;/span&gt; &lt;span class="n"&gt;array&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;16&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="n"&gt;mat4&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;

&lt;p&gt;ã¨ã„ã†å®šç¾©ã§ OpenGL ã® uniform å¤‰æ•°ã«ç›´æ¥æ¸¡ã›ã‚‹ã®ã§ä½¿ã„ã‚„ã™ã„ã€‚&lt;/p&gt;&lt;/div&gt;</description><category>lua</category><category>luajit</category><category>opengl</category><guid>https://ousttrue.github.io/posts/2021/summer/lua_opengl/</guid><pubDate>Wed, 04 Aug 2021 15:00:00 GMT</pubDate></item><item><title>luada</title><link>https://ousttrue.github.io/github/luada/</link><dc:creator>ousttrue</dc:creator><description>&lt;div&gt;&lt;p&gt;&lt;a href="https://github.com/ousttrue/luada"&gt;https://github.com/ousttrue/luada&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Lua Debug Adapter&lt;/p&gt;&lt;/div&gt;</description><category>lua</category><category>repository</category><guid>https://ousttrue.github.io/github/luada/</guid><pubDate>Sat, 31 Jul 2021 09:33:29 GMT</pubDate></item><item><title>LuaDA</title><link>https://ousttrue.github.io/posts/2021/luada/</link><dc:creator>ousttrue</dc:creator><description>&lt;div&gt;&lt;p&gt;vscode ã® lua ãƒ‡ãƒãƒƒã‚¬ãƒ¼ã«&lt;/p&gt;
&lt;p&gt;&lt;a href="https://marketplace.visualstudio.com/items?itemName=tomblind.local-lua-debugger-vscode"&gt;https://marketplace.visualstudio.com/items?itemName=tomblind.local-lua-debugger-vscode&lt;/a&gt; ã‚’ä½¿ã£ã¦ã„ãŸã®ã ãŒã€&lt;/p&gt;
&lt;p&gt;&lt;code&gt;launch.json&lt;/code&gt; ã® &lt;code&gt;args&lt;/code&gt; ã« &lt;code&gt;\\&lt;/code&gt; ãŒå…¥ã‚‹ã¨ã‚¨ãƒ©ãƒ¼ã§èµ·å‹•ã§ããªã„ã€‚
Windows ã§ä½œæ¥­ã—ã¦ã„ã‚‹ã®ã§ã€ç¨€ã«ã‚ˆããƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã®æŒ‡å®šã« &lt;code&gt;\\&lt;/code&gt; ãŒå…¥ã‚‹ã€‚&lt;/p&gt;
&lt;h2&gt;DebugAdapter ã‚’ä½œã£ã¦ã„ãŸã‚‰ã€ç›´ã—æ–¹ãŒã‚ã‹ã£ãŸ&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://github.com/ousttrue/local-lua-debugger-vscode/commit/0f3974b73964b2e34f90a21de9757a57d6746eb4"&gt;https://github.com/ousttrue/local-lua-debugger-vscode/commit/0f3974b73964b2e34f90a21de9757a57d6746eb4&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;PR&lt;/h3&gt;
&lt;p&gt;&lt;a href="https://github.com/tomblind/local-lua-debugger-vscode/pull/37"&gt;https://github.com/tomblind/local-lua-debugger-vscode/pull/37&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Linux ã§ã¯å‹•ã‹ã‚“ã‹ã£ãŸã‚‰ã—ãã€åˆ¥ã®æ–¹æ³•ã§ä¿®æ­£ã—ã¦ãã‚ŒãŸã€‚&lt;/p&gt;
&lt;p&gt;ğŸ‘ &lt;code&gt;0.2.2&lt;/code&gt; &lt;a href="https://github.com/tomblind/local-lua-debugger-vscode/blob/master/CHANGELOG.md"&gt;https://github.com/tomblind/local-lua-debugger-vscode/blob/master/CHANGELOG.md&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;è‡ªå‰ã§ &lt;code&gt;DebugAdapter&lt;/code&gt; ä½œã£ã¦ã¿ã‚‹ã“ã¨ã«ã—ãŸã€‚&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://github.com/ousttrue/luada"&gt;https://github.com/ousttrue/luada&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;é€”ä¸­ã¾ã§å®Ÿè£…ã—ãŸã®ã ãŒã€&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;luajit.exe + luada.lua&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ã¨ã„ã†æ§‹æˆã‚ˆã‚Šã¯ã€&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;luada.exe&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ã®æ–¹ãŒå–ã‚Šå›ã—ãŒã‚ˆãã¦ã€ãã‚Œãªã‚‰ lua æˆåˆ†ã‚’ã‚‚ã£ã¨æ¸›ã‚‰ã—ã¦ JSON-RPC åˆ¶å¾¡ã‚‚ &lt;code&gt;c++&lt;/code&gt; ãªã‚Š &lt;code&gt;rust&lt;/code&gt; ãªã‚Šã«ã—ã¦
lua åŸ‹ã‚è¾¼ã¿å‹ã® exe ãŒä½œã‚Šã‚„ã™ãã†ã€‚
å…ƒã€…ã€ ã‚¹ã‚¿ãƒ³ãƒ‰ã‚¢ãƒ­ãƒ³ã® lua ã‚¤ãƒ³ã‚¿ãƒ—ãƒªã‚¿ã¨çµ„ã¿åˆã‚ã›ã¦ä½¿ã† lua ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¨ã„ã†æ–¹å‘æ€§ã§å®Ÿè£…ã—ã¦ã„ãŸã®ã ãŒã€
&lt;code&gt;luajit-2.1.0-beta3&lt;/code&gt; ä¸€è¾ºå€’ã«ãªã‚Šã¤ã¤ã‚ã‚‹ã®ã§æ°—åˆ†ãŒå¤‰ã‚ã£ã¦ããŸã®ã§ã‚ã£ãŸã€‚
ã“ã‚Œã«é–¢ã—ã¦ã¯ã€ä»Šã®æ§‹æˆã§ã§ãã‚‹ã¨ã“ã‚ã¾ã§ã‚„ã£ã¦ã¿ã‚ˆã†ã€‚&lt;/p&gt;
&lt;h2&gt;VSCode ã® Extension ã‚’ä½œã‚‹&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://code.visualstudio.com/api/get-started/your-first-extension"&gt;https://code.visualstudio.com/api/get-started/your-first-extension&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ‰‹é †é€šã‚Šã«åˆæœŸåŒ–ã—ãŸã€‚npm ã¯æœ€æ–°ç‰ˆã«æ›´æ–°ã—ãŸã»ã†ãŒã‚ˆã„ã½ã„ã€‚&lt;/p&gt;
&lt;h2&gt;MockDebug&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://code.visualstudio.com/api/extension-guides/debugger-extension"&gt;https://code.visualstudio.com/api/extension-guides/debugger-extension&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ã‚’èª­ã‚€ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/microsoft/vscode-mock-debug"&gt;https://github.com/microsoft/vscode-mock-debug&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ã¨ã„ã†ã‚µãƒ³ãƒ—ãƒ«ãŒã‚ã‚‹ã€‚&lt;/p&gt;
&lt;p&gt;ã„ãã¤ã‹ã®æ©Ÿèƒ½ã‚’ã¾ã¨ã‚ã¦æä¾›ã™ã‚‹å¿…è¦ãŒã‚ã‚Šãã†ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;launch.json ã®è¨­å®š&lt;/li&gt;
&lt;li&gt;DebugAdapter æœ¬ä½“&lt;/li&gt;
&lt;li&gt;DebugAdapter ã‚’èµ·å‹•ã™ã‚‹&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;å®Ÿè£…ã—ã¦ã¿ã‚‹&lt;/h2&gt;
&lt;h3&gt;Extension ã® activate&lt;/h3&gt;
&lt;p&gt;é©å½“ã«ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç™»éŒ²ã—ã¦&lt;/p&gt;
&lt;pre class="code literal-block"&gt;&lt;span&gt;&lt;/span&gt;    &lt;span class="err"&gt;//&lt;/span&gt; &lt;span class="err"&gt;package.json&lt;/span&gt;
    &lt;span class="s2"&gt;"activationEvents"&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
        &lt;span class="s2"&gt;"onDebug"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="s2"&gt;"onDebugInitialConfigurations"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="s2"&gt;"onDebugDynamicConfigurations"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="s2"&gt;"onDebugResolve:lua"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="s2"&gt;"onLanguage:lua"&lt;/span&gt;
    &lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="err"&gt;,&lt;/span&gt;
&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;activate&lt;/code&gt; ã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª&lt;/p&gt;
&lt;pre class="code literal-block"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;// src/extension.ts&lt;/span&gt;
&lt;span class="kr"&gt;export&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt; &lt;span class="nx"&gt;activate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;context&lt;/span&gt;: &lt;span class="kt"&gt;vscode.ExtensionContext&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nx"&gt;console&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;log&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'activate luada'&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;

&lt;h3&gt;Launch&lt;/h3&gt;
&lt;pre class="code literal-block"&gt;&lt;span&gt;&lt;/span&gt;    &lt;span class="s2"&gt;"contributes"&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="nt"&gt;"breakpoints"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
            &lt;span class="p"&gt;{&lt;/span&gt;
                &lt;span class="nt"&gt;"language"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;"lua"&lt;/span&gt;
            &lt;span class="p"&gt;}&lt;/span&gt;
        &lt;span class="p"&gt;],&lt;/span&gt;
        &lt;span class="nt"&gt;"debuggers"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
            &lt;span class="p"&gt;{&lt;/span&gt;
                &lt;span class="nt"&gt;"type"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;"luada"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                &lt;span class="nt"&gt;"label"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;"LuaDA"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                &lt;span class="nt"&gt;"languages"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
                    &lt;span class="s2"&gt;"lua"&lt;/span&gt;
                &lt;span class="p"&gt;],&lt;/span&gt;
                &lt;span class="err"&gt;//&lt;/span&gt; &lt;span class="err"&gt;launch.json&lt;/span&gt; &lt;span class="err"&gt;ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ&lt;/span&gt;
                &lt;span class="nt"&gt;"initialConfigurations"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
                    &lt;span class="p"&gt;{&lt;/span&gt;
                        &lt;span class="nt"&gt;"type"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;"luada"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                        &lt;span class="nt"&gt;"name"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;"launch luada"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                        &lt;span class="nt"&gt;"request"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;"launch"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                        &lt;span class="nt"&gt;"program"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;"${workspaceFolder}/main.lua"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                        &lt;span class="nt"&gt;"args"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;
                    &lt;span class="p"&gt;}&lt;/span&gt;
                &lt;span class="p"&gt;],&lt;/span&gt;
                &lt;span class="err"&gt;//&lt;/span&gt; &lt;span class="err"&gt;request:&lt;/span&gt; &lt;span class="err"&gt;launch&lt;/span&gt; &lt;span class="err"&gt;ã«å¯¾ã—ã¦å¯èƒ½ãª&lt;/span&gt; &lt;span class="err"&gt;property&lt;/span&gt; &lt;span class="err"&gt;ã®å®šç¾©&lt;/span&gt;
                &lt;span class="nt"&gt;"configurationAttributes"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
                    &lt;span class="nt"&gt;"launch"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
                        &lt;span class="nt"&gt;"properties"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
                            &lt;span class="nt"&gt;"program"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
                                &lt;span class="nt"&gt;"type"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;"string"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                                &lt;span class="nt"&gt;"markdownDescription"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;"Lua program to debug - set this to the path of the script"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                                &lt;span class="nt"&gt;"default"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;"${workspaceFolder}/main.lua"&lt;/span&gt;
                            &lt;span class="p"&gt;},&lt;/span&gt;                            
                            &lt;span class="nt"&gt;"arg"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
                                &lt;span class="nt"&gt;"type"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;"array"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                                &lt;span class="nt"&gt;"markdownDescription"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;"Command line argument, arg[1] ... arg[n]"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                                &lt;span class="nt"&gt;"default"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;
                            &lt;span class="p"&gt;}&lt;/span&gt;                            
                        &lt;span class="p"&gt;}&lt;/span&gt;
                    &lt;span class="p"&gt;}&lt;/span&gt;
                &lt;span class="p"&gt;}&lt;/span&gt;
            &lt;span class="p"&gt;}&lt;/span&gt;
        &lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="err"&gt;,&lt;/span&gt;
&lt;/pre&gt;

&lt;ul&gt;
&lt;li&gt;activate ã§ DebugAdapterDescriptorFactory ã‚’ç™»éŒ²&lt;/li&gt;
&lt;li&gt;launch ã§ createDebugAdapterDescriptor ã‚’å®Ÿè¡Œã™ã‚‹&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;src/extensions.ts&lt;/code&gt;&lt;/p&gt;
&lt;pre class="code literal-block"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kr"&gt;import&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="kr"&gt;as&lt;/span&gt; &lt;span class="nx"&gt;vscode&lt;/span&gt; &lt;span class="nx"&gt;from&lt;/span&gt; &lt;span class="s1"&gt;'vscode'&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;


&lt;span class="kd"&gt;function&lt;/span&gt; &lt;span class="nx"&gt;createDebugAdapterDescriptorFactory&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;context&lt;/span&gt;: &lt;span class="kt"&gt;vscode.ExtensionContext&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;vscode&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;DebugAdapterDescriptorFactory&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="nx"&gt;createDebugAdapterDescriptor&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
            &lt;span class="nx"&gt;session&lt;/span&gt;: &lt;span class="kt"&gt;vscode.DebugSession&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="nx"&gt;executable&lt;/span&gt;: &lt;span class="kt"&gt;vscode.DebugAdapterExecutable&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="kc"&gt;undefined&lt;/span&gt;
        &lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;vscode&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;ProviderResult&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nx"&gt;vscode&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;DebugAdapterDescriptor&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="nx"&gt;console&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;log&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'launch luada'&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="kr"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;runtime&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;"exe"&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="kr"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;runtimeArgs&lt;/span&gt;: &lt;span class="kt"&gt;string&lt;/span&gt;&lt;span class="p"&gt;[]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[];&lt;/span&gt;
            &lt;span class="c1"&gt;//&lt;/span&gt;
            &lt;span class="c1"&gt;// ãƒ‡ãƒãƒƒã‚°ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã‚’èµ·å‹•ã™ã‚‹&lt;/span&gt;
            &lt;span class="c1"&gt;// èµ·å‹•ã—ãŸã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã¨ vscode ã¯ã€æ¨™æº–å…¥å‡ºåŠ›ã§ JSON-RPC ã«ã‚ˆã‚Š DebugAdapterProtocol ã§é€šä¿¡ã™ã‚‹ã€‚&lt;/span&gt;
            &lt;span class="c1"&gt;//&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nx"&gt;vscode&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;DebugAdapterExecutable&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;runtime&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;runtimeArgs&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;};&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kr"&gt;export&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt; &lt;span class="nx"&gt;activate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;context&lt;/span&gt;: &lt;span class="kt"&gt;vscode.ExtensionContext&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nx"&gt;console&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;log&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'activate luada'&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="nx"&gt;context&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;subscriptions&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;push&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;vscode&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;debug&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;registerDebugAdapterDescriptorFactory&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'luada'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;createDebugAdapterDescriptorFactory&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;context&lt;/span&gt;&lt;span class="p"&gt;)));&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kr"&gt;export&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt; &lt;span class="nx"&gt;deactivate() {&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;

&lt;h3&gt;Debug Adapter ã®å®Ÿè£…&lt;/h3&gt;
&lt;p&gt;&lt;a href="https://microsoft.github.io/debug-adapter-protocol/specification"&gt;https://microsoft.github.io/debug-adapter-protocol/specification&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ã‚’è¦‹ã¦ç²›ã€…ã¨å®Ÿè£…ã™ã‚‹ã€‚&lt;/p&gt;
&lt;h4&gt;&lt;a href="https://microsoft.github.io/debug-adapter-protocol/specification#Events_Output"&gt;Output Event&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;vscode ã® DebugConsole ã«å‡ºåŠ›ã•ã‚Œã‚‹ã®ã§æ—©æœŸã«ä½œã‚‹ã¨ print debug ã®åŠ©ã‘ã«ãªã‚‹ã€‚&lt;/p&gt;
&lt;h4&gt;Logger&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;DebugAdapterProtocol ã®ã‚„ã‚Šã¨ã‚Šã™ã¹ã¦ã‚’è¨˜éŒ²ã™ã‚‹æ©Ÿèƒ½ã‚’ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼å´ã§ä½œã‚‹ã¹ã—ã€‚ç„¡ã„ã¨ãƒ‡ãƒãƒƒã‚°å›°é›£ã«ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¾‹&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/Microsoft/vscode-debugadapter-node/blob/main/adapter/src/loggingDebugSession.ts"&gt;https://github.com/Microsoft/vscode-debugadapter-node/blob/main/adapter/src/loggingDebugSession.ts&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;VSIX ã«å‡ºåŠ›&lt;/h3&gt;
&lt;p&gt;&lt;a href="https://code.visualstudio.com/api/working-with-extensions/publishing-extension"&gt;https://code.visualstudio.com/api/working-with-extensions/publishing-extension&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;vsce ã‚’ä½¿ã†ã€‚&lt;/p&gt;
&lt;p&gt;package.json ã«è¿½åŠ ã€‚&lt;/p&gt;
&lt;pre class="code literal-block"&gt;&lt;span&gt;&lt;/span&gt;    &lt;span class="s2"&gt;"publisher"&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;"ousttrue"&lt;/span&gt;&lt;span class="err"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;"repository"&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="nt"&gt;"type"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;"git"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="nt"&gt;"url"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;"https://github.com/ousttrue/luada.git"&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="err"&gt;,&lt;/span&gt;
&lt;/pre&gt;

&lt;pre class="code literal-block"&gt;&lt;span&gt;&lt;/span&gt;$ npx vsce package
&lt;/pre&gt;

&lt;h2&gt;å‚è€ƒ&lt;/h2&gt;
&lt;h3&gt;&lt;a href="https://github.com/actboy168/lua-debug"&gt;https://github.com/actboy168/lua-debug&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;vscode.DebugAdapterExecutable&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;&lt;a href="https://github.com/tomblind/local-lua-debugger-vscode"&gt;https://github.com/tomblind/local-lua-debugger-vscode&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;vscode.DebugAdapterServer&lt;/li&gt;
&lt;li&gt;TypeScript ã§ vscode.DebugAdapterServer ã‚’ new&lt;/li&gt;
&lt;li&gt;vscode ã¨ DebugAdapterServer ãŒ DAP ã§é€šä¿¡&lt;/li&gt;
&lt;li&gt;DebugAdapterServer ãŒ lua ã‚’ spawn ã‚‚ã—ã¦ã„ã‚‹&lt;/li&gt;
&lt;/ul&gt;&lt;/div&gt;</description><category>dap</category><category>lua</category><category>luajit</category><guid>https://ousttrue.github.io/posts/2021/luada/</guid><pubDate>Fri, 30 Jul 2021 15:00:00 GMT</pubDate></item><item><title>luv</title><link>https://ousttrue.github.io/posts/2021/luv/</link><dc:creator>ousttrue</dc:creator><description>&lt;div&gt;&lt;p&gt;main loop ãŒãƒ–ãƒ­ãƒƒã‚¯ã™ã‚‹ã®ã§ luv ã‚’å–ã‚Šå…¥ã‚Œã¦ã¿ã‚‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/luvit/luv"&gt;https://github.com/luvit/luv&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;cmake ã§ build&lt;/h2&gt;
&lt;p&gt;luv ã« CMake ãŒä»˜å±ã—ã¦ãŠã‚Šç°¡å˜ã€‚&lt;/p&gt;
&lt;pre class="code literal-block"&gt;&lt;span&gt;&lt;/span&gt;$ cmake -S &lt;span class="o"&gt;{&lt;/span&gt;LUV_DIR&lt;span class="o"&gt;}&lt;/span&gt; -B &lt;span class="o"&gt;{&lt;/span&gt;BUILD_DIR&lt;span class="o"&gt;}&lt;/span&gt;
$ cmake --build &lt;span class="o"&gt;{&lt;/span&gt;BUILD_DIR&lt;span class="o"&gt;}&lt;/span&gt; --config Release
&lt;/pre&gt;

&lt;h2&gt;main loop ã‚’ idle ã¸&lt;/h2&gt;
&lt;pre class="code literal-block"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;-- Main loop&lt;/span&gt;
&lt;span class="kr"&gt;while&lt;/span&gt; &lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;new_frame&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="kr"&gt;do&lt;/span&gt;
    &lt;span class="n"&gt;gui&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;update&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;render&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;gui&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;clear_color&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="kr"&gt;end&lt;/span&gt;
&lt;/pre&gt;

&lt;pre class="code literal-block"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kd"&gt;local&lt;/span&gt; &lt;span class="n"&gt;uv&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;require&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"luv"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;-- Main loop&lt;/span&gt;
&lt;span class="kd"&gt;local&lt;/span&gt; &lt;span class="n"&gt;idle&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;uv&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;new_idle&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;idle&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kr"&gt;function&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="kr"&gt;if&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;new_frame&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="kr"&gt;then&lt;/span&gt;
        &lt;span class="n"&gt;idle&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;stop&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="kr"&gt;end&lt;/span&gt;
    &lt;span class="n"&gt;gui&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;update&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;render&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;gui&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;clear_color&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="kr"&gt;end&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;uv&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"default"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;

&lt;h2&gt;é‡ã„å‡¦ç†ã‚’ thread ã¸&lt;/h2&gt;
&lt;pre class="code literal-block"&gt;&lt;span&gt;&lt;/span&gt;    &lt;span class="kd"&gt;local&lt;/span&gt; &lt;span class="n"&gt;ctx&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;uv&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;new_work&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
        &lt;span class="n"&gt;on_thread&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="c1"&gt;--work,in threadpool&lt;/span&gt;
        &lt;span class="n"&gt;on_end&lt;/span&gt; &lt;span class="c1"&gt;--after work, in loop thread&lt;/span&gt;
    &lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;uv&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;queue_work&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ctx&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mp&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pack&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt; &lt;span class="p"&gt;...&lt;/span&gt; &lt;span class="p"&gt;}))&lt;/span&gt;
&lt;/pre&gt;

&lt;pre class="code literal-block"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;Error&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;thread&lt;/span&gt; &lt;span class="n"&gt;arg&lt;/span&gt; &lt;span class="n"&gt;not&lt;/span&gt; &lt;span class="n"&gt;support&lt;/span&gt; &lt;span class="n"&gt;type&lt;/span&gt; &lt;span class="s1"&gt;'table'&lt;/span&gt; &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="n"&gt;Error&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;thread&lt;/span&gt; &lt;span class="n"&gt;arg&lt;/span&gt; &lt;span class="n"&gt;not&lt;/span&gt; &lt;span class="n"&gt;support&lt;/span&gt; &lt;span class="n"&gt;type&lt;/span&gt; &lt;span class="n"&gt;table&lt;/span&gt; &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="n"&gt;Uncaught&lt;/span&gt; &lt;span class="n"&gt;Error&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;attempt&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;call&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="n"&gt;nil&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;
&lt;/pre&gt;

&lt;p&gt;ã‚&lt;/p&gt;
&lt;h2&gt;thread é–“ã§å—ã‘æ¸¡ã—ã®ã§ãã‚‹å‹&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/luvit/luv/blob/master/docs.md#pseudo-types"&gt;https://github.com/luvit/luv/blob/master/docs.md#pseudo-types&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;threadargs: variable arguments (...) of type nil, boolean, number, string, or userdata&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;nvim ã§ã¯ãã“ã§ messagepack ãªã‚ã‘ã‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href="https://tullio.hatenablog.com/entry/20121112/1352732239"&gt;Kyoto Tycoon+Lua-JITæ‹¡å¼µ+MessagePack=ç„¡æ•µ&lt;/a&gt; çµŒç”±ã§ &lt;a href="https://gist.github.com/catwell/2971290"&gt;The state of MessagePack in Lua&lt;/a&gt; ã‚’ãŸã©ã‚Šç€ãã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;If you want pure LuaJIT -&amp;gt; luajit-msgpack-pure&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ãŸã—ã‹ã«ã€ã“ã‚Œã ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/catwell/luajit-msgpack-pure"&gt;https://github.com/catwell/luajit-msgpack-pure&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Windows ãªã®ã§ &lt;code&gt;malloc&lt;/code&gt;, &lt;code&gt;free&lt;/code&gt;, &lt;code&gt;realloc&lt;/code&gt; ãŒ cdef ã§ããªã‹ã£ãŸã®ã‚’ä¿®æ­£&lt;/li&gt;
&lt;li&gt;&lt;code&gt;function&lt;/code&gt; ã¨ &lt;code&gt;cdata&lt;/code&gt; ã‚’ nil ã«ã—ã¦ã‚¹ã‚­ãƒƒãƒ—ã™ã‚‹å‡¦ç†ã‚’è¿½åŠ ã—ã¦ã¿ãŸ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;çµæœã€å·¨å¤§ãªãƒ†ãƒ¼ãƒ–ãƒ«ã® pack/unpack ã§ãƒ–ãƒ­ãƒƒã‚¯ã—ã¦ã—ã¾ã†ã€‚
ã‚ã¨ã‚¹ãƒ¬ãƒƒãƒ‰å´ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚’ã—ã¦ãªã„ã®ã§ã€ãƒ‡ãƒãƒƒã‚¬ã¯ã‚¢ã‚¿ãƒƒãƒã§ããªã„ã—ã€ä½•ã‚‚ã‚ã‹ã‚‰ãªã„ã€‚
&lt;code&gt;pcall&lt;/code&gt; ãªã©ã§ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å–å¾—ã—ã¦ã€å¤±æ•—ã—ãŸå ´åˆã¯ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æŠ•ã’ã‚‹ã‚ˆã†ã«ã—ã¦ã‚ã’ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚&lt;/p&gt;
&lt;p&gt;ãªã‚“ã¨ãªãã€ä½¿ã„æ–¹ã¯ã‚ã‹ã£ãŸã€‚
å¾Œã§ã€ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã‚’å®Ÿè£…ã™ã‚‹ã¨ãã®ã‚¤ãƒ³ãƒ•ãƒ©ã«ã‚‚ä½¿ãˆã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã€‚
OpenGL ã®ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚¹ãƒ¬ãƒƒãƒ‰ã¨ã€ã‚·ãƒ¼ãƒ³æ›´æ–°ã‚’åˆ†é›¢ã™ã‚‹ã€‚&lt;/p&gt;
&lt;h2&gt;é–¢é€£&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://kimitok.hateblo.jp/entry/2014/04/16/223643"&gt;node.jsã‚’æ”¯ãˆã‚‹libuvã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«"uvbook" :ã‚¹ãƒ¬ãƒƒãƒ‰&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://nikhilm.github.io/uvbook/threads.html"&gt;https://nikhilm.github.io/uvbook/threads.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/div&gt;</description><category>lua</category><guid>https://ousttrue.github.io/posts/2021/luv/</guid><pubDate>Wed, 28 Jul 2021 15:00:00 GMT</pubDate></item><item><title>luaãƒ¡ãƒ¢</title><link>https://ousttrue.github.io/posts/2021/lua_info/</link><dc:creator>ousttrue</dc:creator><description>&lt;figure&gt;&lt;img src="https://ousttrue.github.io/posts/2021/lua.png"&gt;&lt;/figure&gt; &lt;div&gt;&lt;p&gt;&lt;a href="https://www.lua.org/docs.html"&gt;https://www.lua.org/docs.html&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;Interpreter&lt;/h2&gt;
&lt;p&gt;ã¨ã‚Šã‚ãˆãš &lt;code&gt;luajit-2.1.0-beta3&lt;/code&gt; æ¨ã—ã€‚&lt;/p&gt;
&lt;pre class="code literal-block"&gt;&lt;span&gt;&lt;/span&gt;+---+    +---+    +---+    +---+
|5.1| -&amp;gt; |5.2| -&amp;gt; |5.3| -&amp;gt; |5.4|
+---+    +---+    +---+    +---+
  |        |        |
  |        |        +- ravi
  |        |
  |        +- moonsharp
  |
  +- luajit(5.1 base)
  |   +- moonjit
  +- luau(5.1 base)
&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;lua-5.1&lt;/code&gt; ã‚’ãƒ™ãƒ¼ã‚¹ã«åˆ†å²ã—ãŸã‚‚ã®ãŒå¤šã„ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;a href="https://www.lua.org/versions.html"&gt;https://www.lua.org/versions.html&lt;/a&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th&gt;url&lt;/th&gt;
&lt;th&gt;memo&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Lua5.1&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;2012ã€‚ã“ã‚Œã‚ˆã‚Šå¤ã„ã‚‚ã®ã‚’ä½¿ã†ç†ç”±ã¯ç„¡ã•ãã†ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Lu15.2&lt;/td&gt;
&lt;td&gt;&lt;a href="https://www.lua.org/manual/5.2/readme.html#changes"&gt;since Lua5.1&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;2015ã€‚finalizer. é–¢æ•°ã® &lt;code&gt;_ENV&lt;/code&gt; ä»•æ§˜å¤‰æ›´&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Lua5.3&lt;/td&gt;
&lt;td&gt;&lt;a href="https://www.lua.org/manual/5.3/readme.html#changes"&gt;since Lua5.2&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;2020ã€‚integers&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Lua5.4&lt;/td&gt;
&lt;td&gt;&lt;a href="https://www.lua.org/manual/5.4/readme.html#changes"&gt;since Lua5.3&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;2021ã€‚const, to-be-closed&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;LuaJIT&lt;/td&gt;
&lt;td&gt;&lt;a href="https://luajit.org/"&gt;https://luajit.org/&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Lua5.1baseã€‚æœ€çµ‚ç‰ˆã¯ &lt;code&gt;2.1.0-beta3&lt;/code&gt;ã€‚neovimã‚‚ã“ã‚Œã€‚&lt;code&gt;FFI&lt;/code&gt; ã‚‚å¼·åŠ›ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Luau&lt;/td&gt;
&lt;td&gt;&lt;a href="https://luau-lang.org/"&gt;https://luau-lang.org/&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Lua5.1 ã® supersetã€‚Robloxå°‚ç”¨ã€‚ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã§ã¯ãªã„ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Ravi&lt;/td&gt;
&lt;td&gt;&lt;a href="http://ravilang.github.io/"&gt;http://ravilang.github.io/&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Lua5.3baseï¼Ÿã€‚limited optional static typing and MIR based JIT compiler&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3&gt;å¤‰ã‚ã‚Šç¨®&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;headeronly&lt;/code&gt;. include ã™ã‚‹ã ã‘ã§ä½¿ãˆã‚‹ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/edubart/minilua"&gt;https://github.com/edubart/minilua&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;LUA ã«æ›´ã«åŸ‹ã‚è¾¼ã‚€&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://terralang.org/"&gt;https://terralang.org/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Translator&lt;/h2&gt;
&lt;h3&gt;&lt;a href="https://moonscript.org/"&gt;MoonScript&lt;/a&gt;&lt;/h3&gt;
&lt;h3&gt;&lt;a href="https://typescripttolua.github.io/"&gt;TypescriptToLua&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å¾Œã§å‡ºã¦ãã‚‹ã€&lt;code&gt;local-lua-debugger&lt;/code&gt; ã¯ã“ã‚Œã§å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã½ã„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;&lt;a href="https://ifritjp.github.io/documents/lunescript/"&gt;LuneScript/&lt;/a&gt;&lt;/h3&gt;
&lt;h3&gt;&lt;a href="https://github.com/teal-language/tl"&gt;Teal&lt;/a&gt;&lt;/h3&gt;
&lt;h2&gt;Language server&lt;/h2&gt;
&lt;h3&gt;&lt;a href="https://github.com/EmmyLua/EmmyLua-LanguageServer"&gt;EmmyLua&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Javaè£½&lt;/li&gt;
&lt;li&gt;&lt;a href="https://emmylua.github.io/annotation.html"&gt;EmmyLua Annotation&lt;/a&gt; ã«å¯¾å¿œã€‚ã“ã‚Œã«ã‚ˆã‚Šã€çµ„ã¿è¾¼ã¿å‹ã®ã‚¤ãƒ³ãƒ†ãƒªã‚»ãƒ³ã‚¹ã‚’å‹•ä½œã•ã›ã‚‹ã“ã¨ãŒã§ãã¦ä½¿ã„å‹æ‰‹ãŒå‘ä¸Šã™ã‚‹&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;&lt;a href="https://github.com/sumneko/lua-language-server"&gt;lua-language-server&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;â­ &lt;a href="https://emmylua.github.io/annotation.html"&gt;EmmyLua Annotation&lt;/a&gt; ã«å¯¾å¿œã€‚ã“ã‚Œã«ã‚ˆã‚Šã€çµ„ã¿è¾¼ã¿å‹ã®ã‚¤ãƒ³ãƒ†ãƒªã‚»ãƒ³ã‚¹ã‚’å‹•ä½œã•ã›ã‚‹ã“ã¨ãŒã§ãã¦ä½¿ã„å‹æ‰‹ãŒå‘ä¸Šã™ã‚‹&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¨­å®šä¾‹&lt;/p&gt;
&lt;pre class="code literal-block"&gt;&lt;span&gt;&lt;/span&gt;    &lt;span class="s2"&gt;"Lua.runtime.version"&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;"LuaJIT"&lt;/span&gt;&lt;span class="err"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;"Lua.workspace.preloadFileSize"&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;10000&lt;/span&gt;&lt;span class="err"&gt;,&lt;/span&gt;
    &lt;span class="s2"&gt;"Lua.runtime.path"&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
        &lt;span class="s2"&gt;"?.lua"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="s2"&gt;"?/init.lua"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="s2"&gt;"?/?.lua"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="err"&gt;,&lt;/span&gt;
&lt;/pre&gt;

&lt;h3&gt;&lt;a href="https://github.com/Alloyed/lua-lsp"&gt;lua-lsp&lt;/a&gt;&lt;/h3&gt;
&lt;h2&gt;Debug adapter&lt;/h2&gt;
&lt;h3&gt;&lt;a href="https://github.com/tomblind/local-lua-debugger-vscode"&gt;local-lua-debugger-vscode&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Debugã•ã‚Œã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆå´ã«ä»•è¾¼ã¿ä¸è¦&lt;/li&gt;
&lt;li&gt;â­ luajit å¯¾å¿œ&lt;/li&gt;
&lt;li&gt;__tostring ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹ã¨å›ºã¾ã‚‹ã®ã§ã€__tostring ã®å®Ÿè£…ã§ä¾‹å¤–ãŒèµ·ããªã„ã‚ˆã†ã«æ³¨æ„&lt;/li&gt;
&lt;li&gt;èµ·å‹•æ™‚ã®å¼•æ•°ã« &lt;code&gt;\\&lt;/code&gt; ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã¨ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ =&amp;gt; &lt;code&gt;0.2.2&lt;/code&gt; ã§ä¿®æ­£&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;&lt;a href="https://github.com/actboy168/lua-debug"&gt;lua-debug&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Debugã•ã‚Œã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆå´ã«ä»•è¾¼ã¿ä¸è¦&lt;/li&gt;
&lt;li&gt;hook ãŒæ‹¡å¼µã—ã¦ã‚ã‚‹ã€‚é€”ä¸­ã§æ­¢ã‚ãŸã‚Šã¨ã‹ã§ãã‚‹ã½ã„&lt;/li&gt;
&lt;li&gt;æ®‹å¿µãªãŒã‚‰ luajit ã§ã¯å‹•ä½œã—ãªã„&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Formatter&lt;/h2&gt;
&lt;h3&gt;&lt;a href="https://github.com/johnnymorganz/stylua"&gt;stylua&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;â­ rust è£½ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã‚„ã™ã„&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;stylua.toml&lt;/p&gt;
&lt;pre class="code literal-block"&gt;&lt;span&gt;&lt;/span&gt;column_width = 120
line_endings = "Unix"
indent_type = "Spaces"
indent_width = 4
quote_style = "AutoPreferDouble"
no_call_parentheses = true
&lt;/pre&gt;

&lt;h2&gt;ã‚½ãƒ¼ã‚¹èª­ã¿&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://ousttrue.github.io/lua/"&gt;https://ousttrue.github.io/lua/&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description><category>dap</category><category>lsp</category><category>lua</category><category>luajit</category><guid>https://ousttrue.github.io/posts/2021/lua_info/</guid><pubDate>Mon, 26 Jul 2021 15:00:00 GMT</pubDate></item><item><title>libclang ã§ luajit å‘ã‘ã® FFI ã‚’ç”Ÿæˆã™ã‚‹</title><link>https://ousttrue.github.io/posts/2021/luajitffi/</link><dc:creator>ousttrue</dc:creator><description>&lt;div&gt;&lt;p&gt;lua ã«ã‚ˆã‚‹ imgui è¨ˆç”»ã®æº–å‚™ã¨ã—ã¦ã€ &lt;code&gt;libclang&lt;/code&gt; ã«ã‚ˆã‚‹ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ç”Ÿæˆå™¨ã‚’ &lt;code&gt;luajit&lt;/code&gt; ã«ç§»æ¤ã—ã¦ã¿ãŸã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/ousttrue/luajitffi"&gt;https://github.com/ousttrue/luajitffi&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;libclang&lt;/code&gt; ã«å¯¾ã—ã¦ã¯ã ã„ã ã„å‹•ãã‚ˆã†ã«ãªã£ã¦ã€è‡ªèº«ã§ç”Ÿæˆã—ãŸ &lt;code&gt;FFI&lt;/code&gt; ã§å‹•ä½œã™ã‚‹ã¨ã“ã‚ã¾ã§ã§ããŸã€‚
ã¾ãŸã€ &lt;code&gt;EmmyLua Annotation&lt;/code&gt; ã‚‚ã‚ã‚‹ç¨‹åº¦ä»˜ä¸ã§ããŸã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/ousttrue/luajitffi/blob/master/clang/mod.lua"&gt;https://github.com/ousttrue/luajitffi/blob/master/clang/mod.lua&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ã“ã„ã¤ã§ã€ &lt;code&gt;imgui.h&lt;/code&gt; ã‹ã‚‰ luajit FFI ã‚’ç”Ÿæˆã™ã‚‹ã€‚&lt;/p&gt;
&lt;h3&gt;libclang&lt;/h3&gt;
&lt;p&gt;c(c++)ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’ &lt;code&gt;clang_visitChildren&lt;/code&gt; ã«ã‚ˆã‚Šã€ã‚«ãƒ¼ã‚½ãƒ«ã®Tree ã¨ã—ã¦ãƒ‘ãƒ¼ã‚¹ã™ã‚‹ã€‚
ä»Šå›ã¯ã€ &lt;code&gt;CXChildVisit_Recurse&lt;/code&gt; ã§å…¨éƒ¨ã®ã‚«ãƒ¼ã‚½ãƒ«ã‚’ãƒ‘ãƒ¼ã‚¹ã™ã‚‹ã“ã¨ã«ã—ãŸã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åŒã˜ã‚«ãƒ¼ã‚½ãƒ«ãŒè¤‡æ•°å€‹æ‰€ã«ç¾ã‚Œã†ã‚‹&lt;/li&gt;
&lt;li&gt;å¾ªç’°ã—ã†ã‚‹(Link List ï¼Ÿ)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ãŒã‚ã‚Šã†ã‚‹ã“ã¨ã‚’è€ƒæ…®ã—ã¦ãŠãã€‚
&lt;code&gt;clang-c/Index.h&lt;/code&gt; ã¯ 6000 ã‚«ãƒ¼ã‚½ãƒ«ãã‚‰ã„ãªã®ã§å•é¡Œãªã„ãŒã€ &lt;code&gt;Windows.h&lt;/code&gt; ã¨ã‹ã¯ 150000 ã‚«ãƒ¼ã‚½ãƒ«ã¨ã‹çˆ†ç™ºã™ã‚‹ã€‚&lt;/p&gt;
&lt;h3&gt;ã‚ã‚Šã¨è‰²ã‚“ãªã¨ã“ã‚ã§å‹ãŒãƒã‚¹ãƒˆã—ã¦ã„ã¦ã¤ã‚‰ã„&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;struct ã®ä¸­ã¯ namespace ãªã®ã§ä½•ã§ã‚‚ã‚ã‚Š&lt;/li&gt;
&lt;li&gt;anonymous ãª union ã‚„ struct ã®ãã®å ´å®šç¾©&lt;/li&gt;
&lt;li&gt;typedef struct ãªã©ã®ãã®å ´å®šç¾©&lt;/li&gt;
&lt;li&gt;é–¢æ•°ãƒã‚¤ãƒ³ã‚¿ã®ãã®å ´å®šç¾©&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¦ã™ã‚‹ã«ã€Cã®ã‚³ãƒ¼ãƒ‰ã®æ›¸ãæ–¹ã«ã‚ˆã£ã¦ã©ã®ã‚ˆã†ãªã‚«ãƒ¼ã‚½ãƒ«æ§‹é€ ã«ãªã‚‹ã‹ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’çŸ¥ã£ã¦ã„ã‚‹å¿…è¦ãŒã‚ã£ã¦ã€
ãƒ‘ã‚¿ãƒ¼ãƒ³æ¯ã«åˆ†å²ã—ã¦æƒ…å ±ã‚’åé›†ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚
ã‚ã‚‹å‹ã®ãƒ¡ãƒ³ãƒãƒ¼ã®æƒ…å ±ã‚’é›†ã‚ã¦ã„ã‚‹ã¨ã€ãƒã‚¹ãƒˆã—ãŸåˆ¥ã®å‹æƒ…å ±ãŒç¾ã‚Œã‚‹å ´åˆãŒã‚ã‚‹ã®ã§åˆ‡ã‚Šåˆ†ã‘ã‚‹ã€‚&lt;/p&gt;
&lt;h3&gt;åŸºæœ¬çš„ãªãƒ‘ã‚¿ãƒ¼ãƒ³&lt;/h3&gt;
&lt;p&gt;FFI ã§ã¯ã€å¯¾è±¡ã¨ãªã‚‹é–¢æ•°ã‚’èµ·ç‚¹ã«ãã®é–¢æ•°ãŒä½¿ç”¨ã™ã‚‹ã™ã¹ã¦ã®å‹ã®å®šç¾©ã‚’å–ã‚Šè¾¼ã‚€ã€‚
ã‚«ãƒ¼ã‚½ãƒ«ã¯Cã®TranslationUnitã®æœ¨æ§‹é€ ã‚’ã‚ã‚‰ã‚ã—ã¦ã„ã¦ã€å‹ã‚’ã‚ã‚‰ã‚ã—ã¦ã„ãªã„ã€‚
ã‚«ãƒ¼ã‚½ãƒ«ã‹ã‚‰é ‘å¼µã£ã¦å‹ã‚’å¾—ã‚‹ã€‚
å‹ã‚’å¾—ã‚‰ã‚Œã‚‹ã‚«ãƒ¼ã‚½ãƒ«ã¯æ±ºã¾ã£ã¦ã„ã¦ã€&lt;code&gt;CXCursorType&lt;/code&gt; ãŒå®£è¨€Declã®ç³»åˆ—ã¨ãªã‚‹ã€‚&lt;/p&gt;
&lt;p&gt;TODO&lt;/p&gt;
&lt;h4&gt;ã‚«ãƒ¼ã‚½ãƒ« FunctionDecl&lt;/h4&gt;
&lt;h4&gt;ã‚«ãƒ¼ã‚½ãƒ« EnumDecl&lt;/h4&gt;
&lt;h4&gt;ã‚«ãƒ¼ã‚½ãƒ« TypedefDecl&lt;/h4&gt;
&lt;h4&gt;ã‚«ãƒ¼ã‚½ãƒ« StructDecl&lt;/h4&gt;
&lt;h4&gt;Type Pointer&lt;/h4&gt;
&lt;h4&gt;Type Array&lt;/h4&gt;
&lt;h4&gt;Type Elaborated&lt;/h4&gt;
&lt;h4&gt;Type Record&lt;/h4&gt;
&lt;h4&gt;Type FunctionProto é–¢æ•°ãƒã‚¤ãƒ³ã‚¿ pointer =&amp;gt; functionproto&lt;/h4&gt;
&lt;h4&gt;union&lt;/h4&gt;
&lt;h4&gt;typedef struct&lt;/h4&gt;
&lt;h4&gt;c++ name mangling&lt;/h4&gt;
&lt;h4&gt;ãƒã‚¯ãƒ­ã¨ã®æˆ¦ã„&lt;/h4&gt;
&lt;h3&gt;luajit ffi&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;ffi.cdef&lt;/code&gt; ã«ç´ ç›´ã«å®šç¾©ã™ã‚Œã°ã„ã„ã®ã§ã€ä»–ã®è¨€èªã® FFI ã«æ¯”ã¹ã¦ç°¡å˜ã€‚&lt;/p&gt;
&lt;p&gt;ã¯ã¾ã‚Šã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;ffi.load&lt;/code&gt; ã®è¿”ã‚Šå€¤ãŒ GC ã•ã‚Œã‚‹ã¨é–¢æ•°ãƒã‚¤ãƒ³ã‚¿ãŒæ­»ã¬&lt;/li&gt;
&lt;li&gt;pointer ã¯ &lt;code&gt;ffi.new('TYPE[1]')&lt;/code&gt; ã®ã‚ˆã†ã«ã‚µã‚¤ã‚ºï¼‘ã® array ã§é‹ç”¨ã™ã‚‹&lt;/li&gt;
&lt;li&gt;tostring ã¨ ffi.string ã¯é•ã†&lt;/li&gt;
&lt;li&gt;nullptr ã¯ nil ?&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ã ã„ãŸã„ã‚ˆãã«è¨ˆã‚‰ã£ã¦ãã‚Œã‚‹ã®ã§ã€ &lt;code&gt;rust&lt;/code&gt; ã® FFI ã«æ¯”ã¹ã¦ç°¡å˜ãªã®ã§ã‚ã£ãŸã€‚&lt;/p&gt;
&lt;p&gt;ã²ã¨ã¤ã ã‘ã¯ã¾ã‚ŠãŒã‚ã£ã¦ã€ &lt;code&gt;struct&lt;/code&gt; ã®å€¤æ¸¡ã—ãŒã§ããªã„å ´åˆãŒã‚ã‚‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href="http://wiki.luajit.org/FFI-Callbacks-with-pass-by-value-structs"&gt;http://wiki.luajit.org/FFI-Callbacks-with-pass-by-value-structs&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ãã†ã„ãˆã°ã€ &lt;code&gt;rust&lt;/code&gt; ã§ã‚‚ &lt;code&gt;struct&lt;/code&gt; ã®å€¤æ¸¡ã—ã§ã¯ã¾ã£ãŸè¨˜æ†¶ãŒã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href="https://forum.dlang.org/thread/dkamxcamwttszxwwxttv@forum.dlang.org"&gt;https://forum.dlang.org/thread/dkamxcamwttszxwwxttv@forum.dlang.org&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;rust ã®å ´åˆã¯ã€ &lt;code&gt;struct&lt;/code&gt; ã®å€¤è¿”ã—ãŒå‹•ã‹ãªã‹ã£ãŸã€‚
ã“ã‚Œã€C ã®æ–¹ã§ pointer çµŒç”±ã§å€¤ã‚’è¿”ã™ãƒ©ãƒƒãƒ‘ãƒ¼ã‚’å®šç¾©ã™ã‚‹å¿…è¦ãŒã‚ã£ã¦å›é¿æ–¹æ³•ã¯ãªã‹ã£ãŸã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ImVec2 ImGui::GetContentRegionAvail()&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;luajit ffi ã§ã‚‚ã§ãã‚‹ã‹æ³¨æ„ãŒå¿…è¦ã ãªã€‚&lt;/p&gt;
&lt;h3&gt;lfs ã¸ã®ä¾å­˜ã‚’ FFI ã—ãŸ Windows API ã§ç½®ãæ›ãˆã‚‹&lt;/h3&gt;
&lt;p&gt;ç¾çŠ¶ã€ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œ &lt;code&gt;isExists&lt;/code&gt;, &lt;code&gt;mkDir&lt;/code&gt; ã®ãŸã‚ã« lfs ã‚’ä½¿ã£ã¦ã„ã‚‹ã®ã ã‘ã©ã€
FFI ã§ Windows API ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ã—ãŸã‚‰ lfs ç„¡ã—ã«ã§ããã†ã€‚
ã¨ãªã‚Œã° luarocks ã‚‚ç„¡ã—ã«ã§ãã‚‹ã®ã§ã€ å¿…è¦ãªã®ã¯ luajit.exe ã ã‘ã«ãªã‚‹ã€‚&lt;/p&gt;&lt;/div&gt;</description><category>libclang</category><category>lua</category><guid>https://ousttrue.github.io/posts/2021/luajitffi/</guid><pubDate>Thu, 22 Jul 2021 15:00:00 GMT</pubDate></item><item><title>luajitffi</title><link>https://ousttrue.github.io/github/luajitffi/</link><dc:creator>ousttrue</dc:creator><description>&lt;div&gt;&lt;p&gt;&lt;a href="https://github.com/ousttrue/luajitffi"&gt;https://github.com/ousttrue/luajitffi&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ffi generator using libclang&lt;/p&gt;&lt;/div&gt;</description><category>lua</category><category>repository</category><guid>https://ousttrue.github.io/github/luajitffi/</guid><pubDate>Sun, 18 Jul 2021 09:35:20 GMT</pubDate></item><item><title>lua ã«ã‚ˆã‚‹ imgui è¨ˆç”»</title><link>https://ousttrue.github.io/posts/2021/lua_imgui_plan/</link><dc:creator>ousttrue</dc:creator><description>&lt;div&gt;&lt;h3&gt;rust ã§ D3D11 ãƒ¬ãƒ³ãƒ€ãƒ©ã‚’é€²ã‚ã¦ããŸãŒãƒ»ãƒ»ãƒ»&lt;/h3&gt;
&lt;p&gt;å½“åˆ &lt;code&gt;rust&lt;/code&gt; ã§ &lt;code&gt;d3d11&lt;/code&gt; ã®ãƒ¬ãƒ³ãƒ€ãƒ©ãƒ¼ã‚’ä½œã‚ã†ã¨ã—ã¦ä½œæ¥­ã‚’é€²ã‚ã¦ã„ãŸã€‚
&lt;code&gt;imgui&lt;/code&gt; ã‚’çµ„ã¿è¾¼ã‚“ã§ã€ &lt;code&gt;glTF&lt;/code&gt; ã‚’ãƒ­ãƒ¼ãƒ‰ã—ã¦ &lt;code&gt;unlit&lt;/code&gt; ã§æç”»ã™ã‚‹ã¨ã“ã‚ã¾ã§ä½œã£ãŸãŒã€
&lt;code&gt;GUI&lt;/code&gt; ã®ä½œã‚Šã“ã¿ãŒå¤§å¤‰ãã†ãªæ„Ÿã˜ã ã£ãŸã€‚
&lt;code&gt;rust&lt;/code&gt; ã¯é–¢æ•°ã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰ãŒç„¡ã„ã®ã§ã€€&lt;code&gt;imgui&lt;/code&gt; ã®ãƒ©ãƒƒãƒ‘ãƒ¼ã®ä½¿ã„å‹æ‰‹ãŒ &lt;code&gt;c++&lt;/code&gt; ã‚ˆã‚Šè½ã¡ã‚‹ãªã©ã€‚
ãƒã‚¤ãƒ³ã‚¿ãƒ¼ã‚’æ¸¡ã›ã‚‹ã®ã¯ç´ æ•µãªã®ã ãŒã€‚&lt;/p&gt;
&lt;h3&gt;nvim-0.5 ã¯ãŠã‚‚ã—ã‚ã„&lt;/h3&gt;
&lt;p&gt;ã“ã“ã§å¯„ã‚Šé“ã—ã¦ã€ &lt;code&gt;nvim&lt;/code&gt; ã‚’ã„ã˜ã‚Šå§‹ã‚ãŸã€‚
ã¡ã‚‡ã†ã©ãƒãƒ¼ã‚¸ãƒ§ãƒ³ &lt;code&gt;0.5&lt;/code&gt; ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã‚‹ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ã€&lt;code&gt;0.5&lt;/code&gt; ã«ãªã‚‹ã¨ lua ã‚µãƒãƒ¼ãƒˆãŒå¼·åŒ–ã•ã‚Œã¦ã€è¨­å®šãŒ lua ã§æ›¸ã‘ã‚‹ã¨ã®ã“ã¨ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://zenn.dev/hituzi_no_sippo/articles/871c06cdbc45b53181e3"&gt;Neovimã¨Lua&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ã¨ã„ã†ã“ã¨ã§ Windows å‘ã‘ã®ã‚½ãƒ¼ã‚¹ã‹ã‚‰ã®ãƒ“ãƒ«ãƒ‰ã‚·ã‚¹ãƒ†ãƒ ã‚’ä½œã£ã¦ &lt;code&gt;nvim&lt;/code&gt; ç’°å¢ƒã‚’æ•´å‚™ã—ã¦ã¿ãŸã€‚
lua ã§è¨˜è¿°ã•ã‚ŒãŸ plugin ã‚’ãªã‚‹ã¹ãæ¡ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/ousttrue/my_nvim"&gt;https://github.com/ousttrue/my_nvim&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æœ€è¿‘å¸¸ç”¨ã—ã¦ã„ãŸã€ &lt;code&gt;vscode&lt;/code&gt; ã®ä¾¿åˆ©ã•ã«ã©ã“ã¾ã§è¿½ã„ã¤ã‘ã‚‹ã‹ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Language Server Protocolã€‚nvim-0.5 ã‹ã‚‰ nvim-lsp (luaã§æ›¸ã„ã¦ã‚ã‚‹) ãŒã‚ã‚‹ã€‚çµ„ã¿è¾¼ã¿&lt;/li&gt;
&lt;li&gt;Debug Adapter Protocolã€‚nvim-0.5 ã‹ã‚‰ nvim-dap (lulã§æ›¸ã„ã¦ã‚ã‚‹) ãŒã‚ã‚‹ã€‚&lt;a href="https://github.com/mfussenegger/nvim-dap"&gt;https://github.com/mfussenegger/nvim-dap&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;vscode ã‹ã‚‰ &lt;code&gt;lsp&lt;/code&gt; ã¨ &lt;code&gt;dap&lt;/code&gt; ã¨ã„ã†é‡è¦ãªè³‡ç”£ã‚’æŒã£ã¦ã“ã‚Œã‚‹ã®ã§æ…£ã‚Œã‚Œã°ã„ã‘ãã†ã§ã‚ã‚‹ã€‚
èª¿ã¹ãŸã¨ã“ã‚ä¸‹è¨˜ã®ã‚ˆã†ã ã£ãŸã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;codelldb(native debugger c++ ã‚„ rust) ã¯ nvim-dap ã‚’æ”¹é€ ã™ã‚Œã°ä½¿ãˆãŸ &lt;a href="https://github.com/ousttrue/nvim-dap"&gt;https://github.com/ousttrue/nvim-dap&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;rust-analyzer å‹•ã„ãŸ&lt;/li&gt;
&lt;li&gt;python: lsp, dap ã¨ã‚‚ã«å‹•ããã†&lt;/li&gt;
&lt;li&gt;lua: lsp, dap ã¨ã‚‚ã«å‹•ããã†&lt;/li&gt;
&lt;li&gt;csharp: lsp, dap ã¨ã‚‚ã«å‹•ããã†(Unityã¯ã†ã¾ãã„ã‹ãš)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;nvim-lsp ã‚‚ nvim-dap ã‚‚ lua ã§ç°¡å˜ã«è¨˜è¿°ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€ã‚³ãƒ¼ãƒ‰ã‚’èª­ã‚ã°ã€ãŸã¶ã‚“ã‚ã‹ã‚‹ã€‚
ã‚ã¨ã¯ã€ã‚¿ã‚¹ã‚¯ãƒ©ãƒ³ãƒŠãƒ¼ã‚’æ•´å‚™ã™ã‚Œã°é–‹ç™ºç’°å¢ƒã«ä½¿ãˆãã†ã€‚&lt;/p&gt;
&lt;h3&gt;luarocks ã® Windows é‹ç”¨&lt;/h3&gt;
&lt;p&gt;lua ã§è¨˜è¿°ã•ã‚ŒãŸ nvim ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ &lt;a href="https://github.com/wbthomason/packer.nvim"&gt;https://github.com/wbthomason/packer.nvim&lt;/a&gt; ã‚’æ¡ç”¨ã—ãŸã®ã ãŒã€
Windows ã§ luarocks æ©Ÿèƒ½ãŒå‹•ã‹ãªã‹ã£ãŸã€‚&lt;a href="https://luarocks.org/"&gt;https://luarocks.org/&lt;/a&gt; ã¯ &lt;code&gt;lua&lt;/code&gt; ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã€‚
ã¡ã‚‡ã£ã¨ã€å¤ã‚(vc2017ã‚ˆã‚Šå‰)ã® vc ã§ãªã„ã¨ã ã‚ã½ã„ã€‚
æ”¹é€ ã—ãŸã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;https://github.com/ousttrue/packer.nvim&lt;/li&gt;
&lt;li&gt;https://github.com/ousttrue/hererocks&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;hererocks ã¯ã€luarocks ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ãƒ¼ã€‚
&lt;code&gt;LUA_PATH&lt;/code&gt; &lt;code&gt;package.path&lt;/code&gt; ã‚’ç†è§£ã—ãŸã€‚&lt;/p&gt;
&lt;h3&gt;ã‚¹ã‚¿ãƒ³ãƒ‰ã‚¢ãƒ­ãƒ³ã® lua ã‚¤ãƒ³ã‚¿ãƒ—ãƒªã‚¿ã«ã‚ˆã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ&lt;/h3&gt;
&lt;p&gt;luarocks ãŒç„¡äº‹ã« Windows ã§é‹ç”¨ã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸã®ã§ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ­ãƒ¼ã‚«ãƒ«ã«å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã€
ã‚¹ã‚¿ãƒ³ãƒ‰ã‚¢ãƒ­ãƒ³ã® lua ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ—ãƒªã‚¿ãƒ¼ã‚’èµ·ç‚¹ã«ã—ãŸã‚¢ãƒ—ãƒªé–‹ç™ºãŒã§ããªã„ã‹æ¢ã£ã¦ã¿ãŸã€‚
lua ã‚¤ãƒ³ã‚¿ãƒ—ãƒªã‚¿ãŒã‚¢ãƒ—ãƒªçµ„ã¿è¾¼ã¿ã ã¨ dap ã®é‹ç”¨ãŒã—ã¥ã‚‰ã„(port é–‹ã‘ã¦ attach ã¨ã‹ã«ãªã‚‹)ã®ã§ã‚¹ã‚¿ãƒ³ãƒ‰ã‚¢ãƒ­ãƒ³ã® lua ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ—ãƒªã‚¿ãƒ¼ã‚’æ¨ã™ã€‚&lt;/p&gt;
&lt;pre class="code literal-block"&gt;&lt;span&gt;&lt;/span&gt;# ãƒ•ã‚©ãƒ«ãƒ€æ§‹æˆ
project_root
  + lua(.gitignore) # hererocks ã§ãƒ­ãƒ¼ã‚«ãƒ«ãƒ“ãƒ«ãƒ‰ã™ã‚‹
  + main.lua
&lt;/pre&gt;

&lt;p&gt;ã“ã‚Œã§ã€ &lt;code&gt;lsp&lt;/code&gt; ã¨ &lt;code&gt;dap&lt;/code&gt; ãŒåˆ©ç”¨ã§ãã‚Œã°å¿«é©ã«ãªã‚‹ã®ã§ã¯ãªã„ã‹ã€‚&lt;/p&gt;
&lt;h4&gt;lua ã® LanguageServer&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://marketplace.visualstudio.com/items?itemName=sumneko.lua"&gt;https://marketplace.visualstudio.com/items?itemName=sumneko.lua&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/sumneko/lua-language-server"&gt;https://github.com/sumneko/lua-language-server&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ãŒã—ã£ã‹ã‚Šå‹•ãã€&lt;code&gt;EmmyLua&lt;/code&gt; ã®å‹ãƒ’ãƒ³ãƒˆã‚’æ´»ç”¨ã§ãã‚‹ã“ã¨ãŒåˆ†ã‹ã£ãŸã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/neovim/nvim-lspconfig/blob/a21a509417aa530fb7b54020f590fa5ccc67de77/CONFIG.md#sumneko_lua"&gt;https://github.com/neovim/nvim-lspconfig/blob/a21a509417aa530fb7b54020f590fa5ccc67de77/CONFIG.md#sumneko_lua&lt;/a&gt; ã«ä¾‹ãŒã‚ã£ã¦ã€&lt;/p&gt;
&lt;pre class="code literal-block"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;require&lt;/span&gt;&lt;span class="s1"&gt;'lspconfig'&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sumneko_lua&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setup&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;settings&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;Lua&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="n"&gt;workspace&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="c1"&gt;-- Make the server aware of Neovim runtime files&lt;/span&gt;
        &lt;span class="n"&gt;library&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
          &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;vim&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fn&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;expand&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'$VIMRUNTIME/lua'&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="c1"&gt;-- luaæ¨™æº–ã®å‹å®šç¾©ãŒã‚ã‚‹&lt;/span&gt;
          &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;vim&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fn&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;expand&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'$VIMRUNTIME/lua/vim/lsp'&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="c1"&gt;-- Vimã®å‹å®šç¾©ãŒã‚ã‚‹&lt;/span&gt;
        &lt;span class="p"&gt;},&lt;/span&gt;
      &lt;span class="p"&gt;},&lt;/span&gt;
    &lt;span class="p"&gt;},&lt;/span&gt;
  &lt;span class="p"&gt;},&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;

&lt;p&gt;ã‚¤ãƒ³ãƒ†ãƒªã‚»ãƒ³ã‚¹ãŒåŠ¹ãã—ã€çµ„ã¿è¾¼ã¿é–¢æ•°ã®å‹ãƒ’ãƒ³ãƒˆã‚‚è¿½åŠ ã§ãã‚‹ã€‚&lt;/p&gt;
&lt;h4&gt;lua ã® DebugAdapter&lt;/h4&gt;
&lt;p&gt;DebugAdapter ã‚‚å•é¡Œãªãå‹•ã„ãŸã€‚
luajit ã®å ´åˆã¯å¯¾å¿œã—ã¦ã„ã‚‹ã‚‚ã®ã‚’ä½¿ã†ã¹ã—ã€‚&lt;/p&gt;
&lt;h5&gt;Lua Debug&lt;/h5&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://marketplace.visualstudio.com/items?itemName=actboy168.lua-debug"&gt;https://marketplace.visualstudio.com/items?itemName=actboy168.lua-debug&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/actboy168/lua-debug"&gt;https://github.com/actboy168/lua-debug&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href="https://github.com/actboy168/bee.lua"&gt;https://github.com/actboy168/bee.lua&lt;/a&gt; ã®&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Add error hook (for debugger)&lt;/li&gt;
&lt;li&gt;Add resume/yield hook (for debugger)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¬ã®æ©Ÿèƒ½ã§å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã½ã„ã€‚&lt;/p&gt;
&lt;h5&gt;Local Lua Debugger&lt;/h5&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://marketplace.visualstudio.com/items?itemName=tomblind.local-lua-debugger-vscode"&gt;https://marketplace.visualstudio.com/items?itemName=tomblind.local-lua-debugger-vscode&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="https://github.com/tomblind/local-lua-debugger-vscode"&gt;https://github.com/tomblind/local-lua-debugger-vscode&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;luajit ã§ã‚‚å‹•ã&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;TypeScriptToLua ã§æ›¸ã‹ã‚Œã¦ã„ã‚‹&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;lua ã§ 3D&lt;/h3&gt;
&lt;p&gt;ã¡ã‚‡ã£ã¨è©¦ã—ãŸã¨ã“ã‚ã€ luajit ã® &lt;a href="https://luajit.org/ext_ffi.html"&gt;FFI&lt;/a&gt; ã‚’ä½¿ã†ã®ãŒæœ‰æœ›ãã†ã¨ã„ã†æ„Ÿè§¦ã‚’å¾—ãŸã€‚
d3d ã¯ lua ã§ã‚„ã£ã¦ã„ã‚‹äººãŒã‚ã¾ã‚Šã„ãªã‹ã£ãŸã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/sonoro1234/LuaJIT-GLFW"&gt;https://github.com/sonoro1234/LuaJIT-GLFW&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/sonoro1234/LuaJIT-ImGui"&gt;https://github.com/sonoro1234/LuaJIT-ImGui&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æœ€æ–°ã® luajit-2.1.0-beta3(lua-5.1ä»•æ§˜) ã§ã„ãã€‚&lt;/p&gt;
&lt;h3&gt;imgui ã® ffi&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;cimgui&lt;/code&gt; ã§ã¯ãªã ç´ ã® &lt;code&gt;imgui&lt;/code&gt; ã® luajit ffi ã§ãã‚‹ã‹å®Ÿé¨“ã—ãŸã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href="https://stackoverflow.com/questions/6691651/is-it-possible-to-use-functions-from-c-namespaces-with-luajit-ffi"&gt;https://stackoverflow.com/questions/6691651/is-it-possible-to-use-functions-from-c-namespaces-with-luajit-ffi&lt;/a&gt;&lt;/p&gt;
&lt;pre class="code literal-block"&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;ffi&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cdef&lt;/span&gt;&lt;span class="s"&gt;[[&lt;/span&gt;
&lt;span class="s"&gt;void Test1_Method1(void) asm("_ZN5Test17Method1Ev");&lt;/span&gt;
&lt;span class="s"&gt;]]&lt;/span&gt;
&lt;/pre&gt;

&lt;p&gt;ã®ã‚ˆã†ã« mangling ã«å¯¾å¿œã™ã‚Œã°ã§ããã†ã€‚&lt;/p&gt;
&lt;h3&gt;libclang ã«ã‚ˆã‚‹ ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ&lt;/h3&gt;
&lt;p&gt;ã¨ã„ã†ã“ã¨ã§ã€ &lt;code&gt;luajit&lt;/code&gt; + &lt;code&gt;FFI&lt;/code&gt; ã‚’ä¸­å¿ƒã« &lt;code&gt;imgui&lt;/code&gt; ãƒ©ãƒƒãƒ‘ãƒ¼ã‚’ä½œã£ã¦ãƒ¬ãƒ³ãƒ€ãƒ©ãƒ¼ã¨ã„ã†ã‹ 3D ãƒ„ãƒ¼ãƒ«ã®ã‚¤ãƒ³ãƒ•ãƒ©ã¨ãªã‚‹ã€
ç°¡å˜ãªãƒ¬ãƒ³ãƒ€ãƒ©ãƒ¼ã¨ &lt;code&gt;Gizmo&lt;/code&gt; ã«å¯¾å¿œã—ãŸãƒ„ãƒ¼ãƒ«ã‚­ãƒƒãƒˆã‚’ä½œã‚‹ã¨ã„ã†æ–¹å‘ã«ãªã£ã¦ããŸã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;imgui&lt;/code&gt; ã® &lt;code&gt;luajit&lt;/code&gt; &lt;code&gt;FFI&lt;/code&gt; ã®ä½¿ã„å‹æ‰‹ãŒé‡è¦ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/ousttrue/limgui"&gt;https://github.com/ousttrue/limgui&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;[ ] libclang ã§ &lt;code&gt;imgui.h&lt;/code&gt; ã‚’ãƒ‘ãƒ¼ã‚¹ã—ã¦ã€luajit FFI ç”Ÿæˆã¨ &lt;code&gt;lsp&lt;/code&gt; ã¸ã® EmmyLua ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ç”Ÿæˆã‚’åŒæ™‚ã«ã‚„ã‚‹ãƒ„ãƒ¼ãƒ«ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/div&gt;</description><category>imgui</category><category>lua</category><guid>https://ousttrue.github.io/posts/2021/lua_imgui_plan/</guid><pubDate>Fri, 16 Jul 2021 15:00:00 GMT</pubDate></item><item><title>limgui</title><link>https://ousttrue.github.io/github/limgui/</link><dc:creator>ousttrue</dc:creator><description>&lt;div&gt;&lt;p&gt;&lt;a href="https://github.com/ousttrue/limgui"&gt;https://github.com/ousttrue/limgui&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;luajit + ffi + imgui&lt;/p&gt;&lt;/div&gt;</description><category>imgui</category><category>lua</category><category>repository</category><guid>https://ousttrue.github.io/github/limgui/</guid><pubDate>Thu, 15 Jul 2021 09:01:59 GMT</pubDate></item></channel></rss>