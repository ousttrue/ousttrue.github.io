<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="../assets/xml/rss.xsl" media="all"?><rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>ä¸‰æ¬¡å…ƒæ—¥èªŒ (libclangã«ã¤ã„ã¦ã®è¨˜äº‹)</title><link>https://ousttrue.github.io/</link><description></description><atom:link href="https://ousttrue.github.io/categories/libclang.xml" rel="self" type="application/rss+xml"></atom:link><language>ja</language><copyright>Contents Â© 2022 &lt;a href="mailto:ousttrue@gmail.com"&gt;ousttrue&lt;/a&gt; </copyright><lastBuildDate>Sun, 20 Nov 2022 18:39:31 GMT</lastBuildDate><generator>Nikola (getnikola.com)</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>imgui ã® python ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã‚’ã¾ãŸä½œã‚‹</title><link>https://ousttrue.github.io/posts/2021/winter/python_imgui/</link><dc:creator>ousttrue</dc:creator><description>&lt;h2&gt;åä»˜ã‘ã¦ cydeer&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://github.com/ousttrue/cydeer"&gt;https://github.com/ousttrue/cydeer&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;python&lt;/code&gt;, &lt;code&gt;cython&lt;/code&gt;, &lt;code&gt;dear imgui&lt;/code&gt; ã®çµ„ã¿åˆã‚ã›ã§åå‰ã‚’ä»˜ã‘ã‚ˆã†ã¨æ€ã£ãŸã®ã ãŒã€æ—¢ã«å…ˆäººãŒã„ã£ã±ã„ã„ã¦åå‰ãŒè¢«ã‚‹ã®ã§é©å½“ã«æ±ºã‚ãŸã€‚ğŸ¦Œ&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/HankiDesign/awesome-dear-imgui#languages"&gt;https://github.com/HankiDesign/awesome-dear-imgui#languages&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æœ€åˆã€&lt;code&gt;DearPyGui&lt;/code&gt; ã®ã‚µã‚¤ãƒˆãŒå¼·ãã†ã ã£ãŸã®ã§è©¦ãã†ã¨æ€ã£ãŸã®ã ã‘ã©ç”¨é€”ãŒé•ã„ãã†ã ã£ãŸã€‚
æ¬¡ã«ã€ã—ã°ã‚‰ã &lt;code&gt;pyimgui&lt;/code&gt; ã‚’ä½¿ã£ã¦ã„ã„æ„Ÿã˜ã ã£ãŸã®ã§ã€ &lt;code&gt;docking&lt;/code&gt; ãƒ–ãƒ©ãƒ³ãƒå¯¾å¿œã‚’è¦‹ãŸã‚‰é–‹ç™ºãƒ–ãƒ©ãƒ³ãƒãªã‚‰ã°å‹•ã„ãŸã®ã§ã€è‡ªå‰ãƒ“ãƒ«ãƒ‰ã‚’æ”¹é€ ã—ã¦ä½¿ã£ã¦ã„ãŸã€‚
PR ã‚‚é€ã£ã¦ã¿ãŸã®ã ãŒã€
ã©ã†ã›ãªã‚‰è‡ªåˆ†ã§ä½œã‚ã†ã¨ã„ã†æ©Ÿé‹ãŒé«˜ã¾ã£ãŸã®ã§ã€ä½œã£ãŸã€‚
cydeer ã¯ pyOpenGL ã¨ã¨ã‚‚ã«ä½¿ã† &lt;code&gt;è–„ã„&lt;/code&gt; ImGui ãƒ©ãƒƒãƒ‘ãƒ¼ã¨ã„ã†è·¯ç·šã§ã‚ã‚‹ã€‚
&lt;code&gt;ctypes&lt;/code&gt; ã‚’ä½µç”¨ã™ã‚‹ã“ã¨ã§ãƒã‚¤ãƒ³ã‚¿ã‚’ç›´æ¥æ‰±ã†ã€‚ &lt;code&gt;camel case&lt;/code&gt; ã¨ &lt;code&gt;snake case&lt;/code&gt; ã®å¤‰æ›ã‚’å«ã‚ã¦ä½•ã‚‚å¤‰ãˆãªã„ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;lib&lt;/th&gt;
&lt;th&gt;binder&lt;/th&gt;
&lt;th&gt;imgui&lt;/th&gt;
&lt;th&gt;window &amp;amp; graphincs&lt;/th&gt;
&lt;th&gt;ã‚³ãƒ¡ãƒ³ãƒˆ&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;(python)cydeer&lt;/td&gt;
&lt;td&gt;cython + ctypes(generate using libclang.cindex )&lt;/td&gt;
&lt;td&gt;imgui docking branch&lt;/td&gt;
&lt;td&gt;glfw ãªã© + pyOpenGL ã§ãŒã‚“ã°ã‚‹&lt;/td&gt;
&lt;td&gt;å¯èƒ½ãªé™ã‚ŠAPIã®æ”¹å¤‰ã‚’ã—ãªã„ã€‚ãƒã‚¤ãƒ³ã‚¿ã¯ ctypes ã§ä½œã‚‹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;(python)pyimgui&lt;/td&gt;
&lt;td&gt;cython&lt;/td&gt;
&lt;td&gt;imgui&lt;/td&gt;
&lt;td&gt;glfw ãªã© + pyOpenGL ã§ãŒã‚“ã°ã‚‹&lt;/td&gt;
&lt;td&gt;ãƒã‚¤ãƒ³ã‚¿å¼•æ•°(p_openãªã©)ã«ã‚ˆã‚‹è¿”ã‚Šå€¤ã‚’ã€tuple ã«ã‚ˆã‚‹è¤‡å€¤ã§è¡¨ç¾&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;(python)DearPyGui&lt;/td&gt;
&lt;td&gt;æœªç¢ºèª&lt;/td&gt;
&lt;td&gt;æœªç¢ºèª&lt;/td&gt;
&lt;td&gt;DirectX11ã€‚python ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„ï¼Ÿ&lt;/td&gt;
&lt;td&gt;imgui ã‚’ãƒ©ãƒƒãƒ—ã—ã¦ç‹¬è‡ª APIã€‚python ã§ OpenGL ã™ã‚‹ã¨ã„ã†ç›®çš„ã«ã¯ä½¿ãˆã¬&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;(c)cimgui&lt;/td&gt;
&lt;td&gt;æœªç¢ºèª&lt;/td&gt;
&lt;td&gt;æœªç¢ºèª&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;imgui ã‚’ &lt;code&gt;extern C&lt;/code&gt; ã«ãƒ©ãƒƒãƒ—ã—ãŸã‚‚ã®ã€‚ä»–è¨€èªãƒã‚¤ãƒ³ãƒ‰å‘ã‘&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;(rust)imgui-rs&lt;/td&gt;
&lt;td&gt;æœªç¢ºèª&lt;/td&gt;
&lt;td&gt;æœªç¢ºèª&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;builder ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ Default å¼•æ•°ã‚’ä»£æ›¿&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;imgui ãƒ©ãƒƒãƒ—ã«ã¯ã€ &lt;code&gt;é–¢æ•°ã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰&lt;/code&gt; , &lt;code&gt;ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå¼•æ•°&lt;/code&gt; , &lt;code&gt;ãƒ¡ãƒ³ãƒãƒ¼é–¢æ•°&lt;/code&gt; ã¨ã„ã†é›£æ‰€ãŒã‚ã‚‹ã€‚
è¦ã™ã‚‹ã« &lt;code&gt;c++&lt;/code&gt; è¦ç´ ãªã®ã ã‘ã©ã€&lt;code&gt;c++&lt;/code&gt; è¦ç´ å«ã‚ã¦ã® imgui ã®ä½¿ã„å‹æ‰‹ãªã®ã§ã€‚å„è¨€èªãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã§æ‚©ã¾ã—ã„ã¨ã“ã‚ã§ã™ã€‚
ãŸã¨ãˆã°ã€ &lt;code&gt;rust&lt;/code&gt; ã¯é–¢æ•°ã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰ã‚„ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå¼•æ•°ãŒç„¡ã„ã®ã§ API ã‚’å¤‰ãˆã¦ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;C# ã¨ã‹ã§ã‚‚ã€ &lt;code&gt;const ImVec2 pos&amp;amp; = ImVec2(0, 0)&lt;/code&gt; ã®ã‚ˆã†ãªå¼•æ•°ã‚’è§£æ±ºã™ã‚‹ã®ã¯æ‰‹é–“ãŒã‹ã‹ã£ãŸã‚Šã™ã‚‹ã€‚
DLLImport å®šç¾©ã«å¯¾ã™ã‚‹ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå¼•æ•°ã§ã¯è§£æ±ºã§ããªã„ã®ã§ã€ C# å´ã§ä¸€æ™‚å¤‰æ•°ã‚’ä½œã£ã¦ãƒã‚¤ãƒ³ã‚¿ãƒ¼ã‚’å–å¾—ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå¼•æ•°&lt;/code&gt; ã¯ cython ã§æ™®é€šã«è§£æ±ºã—ãŸã€‚
clang.cindex ã‹ã‚‰å€¤ã‚’å–ã‚Œã‚Œã°é›£ã—ããªã„ã€‚
&lt;code&gt;ãƒ¡ãƒ³ãƒãƒ¼é–¢æ•°&lt;/code&gt; ã¯ &lt;code&gt;ctypes&lt;/code&gt; ã« &lt;code&gt;cython&lt;/code&gt; ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®šç¾©ã—ã¦ã€ &lt;code&gt;self&lt;/code&gt; ã‚’ &lt;code&gt;this pointer&lt;/code&gt; ã« cast ã—ã¦å‘¼ã³å‡ºã™ã‚³ãƒ¼ãƒ‰ã‚’ä½œã£ãŸ(ImGuiFontAtlas)ã€‚
&lt;code&gt;é–¢æ•°ã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰&lt;/code&gt; ã¯ &lt;code&gt;cython&lt;/code&gt; ã§ãƒ‡ã‚£ã‚¹ãƒ‘ãƒƒãƒã™ã‚‹ã®ã¯ã¤ã‚‰ã„ã®ã§ã€&lt;code&gt;MenuItem_2&lt;/code&gt; ã®ã‚ˆã†ãª suffix ã‚’ã¤ã‘ã¦äººé–“ãŒé¸ã¶ã‚ˆã†ã«ã—ãŸã€‚&lt;/p&gt;
&lt;p&gt;å¿˜ã‚Œã¦ã„ãŸãŒã€ã‚‚ã£ã¨ã‚‚å•é¡Œã«ãªã‚‹ã®ãŒ &lt;code&gt;æ§‹é€ ä½“ã®å€¤æ¸¡ã—ãƒ»è¿”ã—&lt;/code&gt; ã ã£ãŸ(C++ã«é™ã‚‰ãªã„ï¼Ÿ)ã€‚
&lt;code&gt;Dè¨€èª&lt;/code&gt; , &lt;code&gt;rust&lt;/code&gt; ã¨ã‚‚ã«ã“ã‚ŒãŒã§ããªã„(vcã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã¨äº’æ›æ€§ãŒãªã„ï¼Ÿ)ã®ã§æ³¨æ„ãŒå¿…è¦ã ã£ãŸã€‚ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã¯é€šã‚‹ãŒå‹•ä½œãŒãŠã‹ã—ã‹ã£ãŸã‚ˆã†ãªã€‚
ImGui ã® ImVec2 ã‚’å€¤è¿”ã—ã™ã‚‹é–¢æ•°ã§ãƒ’ãƒƒãƒˆã™ã‚‹ã€‚
&lt;code&gt;cydeer&lt;/code&gt; ã¯ã€ &lt;code&gt;cython&lt;/code&gt; ã‚’æ¡ç”¨ã—ãŸã®ã§ã€&lt;code&gt;cython&lt;/code&gt; é–¢æ•°ã®å‡ºå£ã§ python å‹ã«å…¥ã‚Œæ›¿ãˆã‚‹ã ã‘ã§ã‚ã‚‹ã€‚&lt;/p&gt;
&lt;p&gt;ã‚ã¨ã€ &lt;code&gt;cydeer&lt;/code&gt; ã¯ &lt;code&gt;pyi&lt;/code&gt; æ¨™æº–è£…å‚™ã§ã„ã„æ„Ÿã˜ã§ã‚ã‚‹(ä¸€éƒ¨å®Ÿéš›ã®pythonå‹ã¨é½Ÿé½¬ãŒã‚ã‚‹ãŒãƒ»ãƒ»ãƒ»)ã€‚&lt;/p&gt;
&lt;h3&gt;å®Ÿè£…ä¸Šã®èª²é¡Œ&lt;/h3&gt;
&lt;p&gt;cython ã® cimport ã®æ‰±ã„ãŒã‚„ã£ã‹ã„ã§ã€&lt;code&gt;imgui&lt;/code&gt;, &lt;code&gt;imgui.internal&lt;/code&gt; ã«åˆ†å‰²ã—ã‚ˆã†ã¨ã™ã‚‹ã¨ã†ã¾ãã„ã‹ãªã‹ã£ãŸã€‚
&lt;code&gt;cydeer&lt;/code&gt; ã«é–¢ã—ã¦ã¯å·¨å¤§ãªå˜ä¸€ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§è¡Œãã®ãŒç„¡é›£ã‹ã‚‚ã—ã‚Œãªã„ã€‚
&lt;code&gt;internal&lt;/code&gt; ã‚„ãƒãƒ¼ãƒ‰ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã¨ã‹è¿½åŠ ã™ã‚‹ã¨ãã«åˆ†ã‘ãŸã„ã®ã ã‘ã©ã€‚&lt;/p&gt;
&lt;p&gt;ç¾çŠ¶ã€Windows + python-3.10 ã—ã‹è©¦ã—ã¦ã„ãªã„ã€‚
Windows11 ã® wslg + wayland ã§å‹•ãã‚ˆã†ã«ã—ãŸã„ã€‚&lt;/p&gt;</description><category>cython</category><category>imgui</category><category>libclang</category><category>python</category><guid>https://ousttrue.github.io/posts/2021/winter/python_imgui/</guid><pubDate>Sun, 19 Dec 2021 15:00:00 GMT</pubDate></item><item><title>libclang ã§ è¨€èªãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã‚’ä½œã‚‹</title><link>https://ousttrue.github.io/posts/2021/winter/cindex/</link><dc:creator>ousttrue</dc:creator><description>&lt;h2&gt;ä»Šã¾ã§è©¦ä½œã—ãŸã‚‚ã®ãŸã¡&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;(2019)&lt;a href="https://github.com/ousttrue/pycpptool"&gt;https://github.com/ousttrue/pycpptool&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;pip install clang&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://ousttrue.github.io/posts/2019/python_clang/"&gt;pythonãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« clang ã§ C++ ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’å¤‰æ›ã™ã‚‹&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;é€”ä¸­ã§ãƒ‡ãƒãƒƒã‚°ãŒå›°é›£ã«ãªã£ãŸ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;(2020)&lt;a href="https://github.com/ousttrue/regenerator"&gt;https://github.com/ousttrue/regenerator&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;D&lt;/code&gt; + &lt;code&gt;lua&lt;/code&gt; (text template ã«ã‚ˆã‚‹ã‚³ãƒ¼ãƒ‰ç”Ÿæˆéƒ¨)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;(2020)&lt;a href="https://github.com/ousttrue/ClangCaster"&gt;https://github.com/ousttrue/ClangCaster&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;C#&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://qiita.com/ousttrue/items/d878ec97483cb8834793"&gt;libclangã§WindowsKitsã‚’DllImportã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½œã£ãŸ(ã¦ã„ã‚‹)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;(2020)&lt;a href="https://github.com/ousttrue/clalua"&gt;https://github.com/ousttrue/clalua&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;C++&lt;/code&gt; + &lt;code&gt;lua&lt;/code&gt; (text template ã«ã‚ˆã‚‹ã‚³ãƒ¼ãƒ‰ç”Ÿæˆéƒ¨)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;(2021)&lt;a href="https://github.com/ousttrue/frame_factory/tree/master/clanggen"&gt;https://github.com/ousttrue/frame_factory/tree/master/clanggen&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;rust&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;(2021)&lt;a href="https://github.com/ousttrue/luajitffi/tree/master/clang/cdef"&gt;https://github.com/ousttrue/luajitffi/tree/master/clang/cdef&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://ousttrue.github.io/posts/2019/luajitffi/"&gt;libclang ã§ luajit å‘ã‘ã® FFI ã‚’ç”Ÿæˆã™ã‚‹&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;imgui ã«ã‚ˆã‚‹ cindex ã®ãƒ‘ãƒ¼ã‚¹çµæœã®ãƒ“ãƒ¥ãƒ¼ãƒ¯ãƒ¼ã‚’ä½œã£ã¦ã¿ãŸãŒå‹•ä½œãŒé…ã‹ã£ãŸã€‚&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/ousttrue/luajitffi/tree/master/clangffi"&gt;https://github.com/ousttrue/luajitffi/tree/master/clangffi&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/ousttrue/limgui/blob/master/samples/clang_viewer.lua"&gt;https://github.com/ousttrue/limgui/blob/master/samples/clang_viewer.lua&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ã‚‚ã®ã«ã‚ˆã‚‹ã®ã ã‘ã©ã€ &lt;code&gt;d3d11.h&lt;/code&gt; ã‚’ãƒ‘ãƒ¼ã‚¹ã—ãŸã‚Šã™ã‚‹ã¨
è¦ç´ ãŒæ•°ä¸‡ã¨ã‹ã«ãªã‚‹å·¨å¤§ãªãƒ„ãƒªãƒ¼ã‚’æ§‹ç¯‰ã™ã‚‹ã®ã§ç·´ç¿’ã«è‰¯ã„ã€‚
åŒã˜ã‚‚ã®ã‚’ä½œã‚Šã™ãã§ã‚ã‚‹ã€‚&lt;/p&gt;
&lt;h3&gt;imgui.h&lt;/h3&gt;
&lt;p&gt;é™å®šçš„ã«ã ãŒ &lt;code&gt;c++&lt;/code&gt; ã®æ©Ÿèƒ½ã‚’ä½¿ã£ã¦ã„ã‚‹ã®ã§ã€è¨€èªã«ã‚ˆã£ã¦ã¯æ°—æŒã¡ã‚ˆããƒ©ãƒƒãƒ—ã§ããªã„ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é–¢æ•°ã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰ã¨ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå¼•ãæ•°&lt;ul&gt;
&lt;li&gt;mangling ã¯ libclang ã§å¯¾å‡¦ã§ãã‚‹&lt;/li&gt;
&lt;li&gt;&lt;code&gt;rust&lt;/code&gt; ãªã©ã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰ãŒç„¡ã„ã‚‚ã®ã¯å³ã—ã„ã€‚&lt;/li&gt;
&lt;li&gt;ã‚ã£ã¦ã‚‚ãƒ‡ã‚£ã‚¹ãƒ‘ãƒƒãƒã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã™ã‚‹ã®ãŒå³ã—ã„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;const ImVec2 &amp;amp;pos = ImVec2(0, 0)&lt;/code&gt; ã¿ãŸã„ãªã®ãŒå³ã—ã„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ãƒ•ã‚©ãƒ³ãƒˆè¨­å®šã¨ã‹ã®ãƒ¡ãƒ³ãƒãƒ¼é–¢æ•°&lt;ul&gt;
&lt;li&gt;&lt;code&gt;C&lt;/code&gt; ã®å‘¼ã³å‡ºã—é–¢æ•°ã‚’ç”¨æ„ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;d3d11.h&lt;/h3&gt;
&lt;p&gt;COM ã®ä»®æƒ³é–¢æ•°ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’å·¥å¤«ã™ã‚Œã°è¡Œã‘ã‚‹ã€‚
GCè¨€èªã ã¨ãƒ‡ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼ã®å‘¼ã³ã ã—ãŒåˆ¶å¾¡ã§ããªã„ã‹ã‚‚ã€‚&lt;/p&gt;
&lt;h2&gt;cython&lt;/h2&gt;
&lt;p&gt;æœ€è¿‘ã€ &lt;code&gt;C&lt;/code&gt; ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ¼ã‚’ &lt;code&gt;cython&lt;/code&gt; ã§ãƒ©ãƒƒãƒ—ã™ã‚‹ã®ã«ç€ç›®ã—ã¦ã„ã‚‹ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/seung-lab/DracoPy"&gt;https://github.com/seung-lab/DracoPy&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/pyimgui/pyimgui"&gt;https://github.com/pyimgui/pyimgui&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç·´ç¿’ã«ä½œã£ã¦ã¿ãŸã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/ousttrue/pymikktspace"&gt;https://github.com/ousttrue/pymikktspace&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;äºˆå®š&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;cindex&lt;/code&gt; ã§ &lt;code&gt;cython&lt;/code&gt; éƒ¨åˆ†ã®è‡ªå‹•ç”Ÿæˆã‚’ã‚„ã£ã¦ã¿ã‚‹ã€‚
æ›´ã«ã€ &lt;code&gt;.pyi&lt;/code&gt; ã‚’åŒæ™‚ã«ç”Ÿæˆã™ã‚Œã°ã‚³ãƒ¼ãƒ‰è£œå®Œã®åŠ¹ããƒã‚¤ãƒ†ã‚£ãƒ–ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒä½œã‚Œã‚‹ã®ã§ã¯ã€‚
ã‚ã¨ã€ &lt;code&gt;cindex&lt;/code&gt; ã®ä½¿ã„ã‹ãŸã«ã¤ã„ã¦ã®ãƒ¡ãƒ¢ã‚’ã¾ã¨ã‚ãŸã„ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/ousttrue/cywrap"&gt;https://github.com/ousttrue/cywrap&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;imgui&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/ousttrue/cydeer"&gt;https://github.com/ousttrue/cydeer&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;ã‚µãƒ–ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã ã‘ cython ã«ã™ã‚‹&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/AshleySetter/HowToPackageCythonAndCppFuncs"&gt;https://github.com/AshleySetter/HowToPackageCythonAndCppFuncs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.py4u.net/discuss/175142"&gt;https://www.py4u.net/discuss/175142&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</description><category>cython</category><category>libclang</category><category>python</category><guid>https://ousttrue.github.io/posts/2021/winter/cindex/</guid><pubDate>Fri, 03 Dec 2021 15:00:00 GMT</pubDate></item><item><title>imgui ã® FFI ãŒ luajit ã§å‹•ãã¨ã“ã‚ã¾ã§ä½œã£ãŸ</title><link>https://ousttrue.github.io/posts/2021/example_glfw_openg/</link><dc:creator>ousttrue</dc:creator><description>&lt;figure&gt;&lt;img src="https://ousttrue.github.io/posts/2021/imgui_from_luajit.jpg"&gt;&lt;/figure&gt; &lt;p&gt;&lt;a href="https://github.com/ousttrue/limgui/blob/master/imgui_ffi/cdef/imgui.lua"&gt;https://github.com/ousttrue/limgui/blob/master/imgui_ffi/cdef/imgui.lua&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Window System ã¯ &lt;code&gt;GLFW&lt;/code&gt;ã€3D API ã¯ &lt;code&gt;OpenGL3&lt;/code&gt; ã‚’é¸æŠã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;SDL2 ã¯ã€ &lt;code&gt;HWND&lt;/code&gt; ã‚’å–å¾—å‘¨ã‚ŠãŒ FFI ã§ã¯é¢å€’ãªã“ã¨ãŒåˆ†ã‹ã£ã¦ã„ãŸã®ã¨ã€&lt;code&gt;SDL-Image&lt;/code&gt; ãªã©ã®é–¢é€£ãƒ©ã‚¤ãƒ–ãƒ©ãƒªç„¡ã—ã§è¡Œãã¤ã‚‚ã‚Šã ã£ãŸ&lt;/li&gt;
&lt;li&gt;D3D11 ã®ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã‚’ä½œã£ã¦ã„ã‚‹ã¨ã¾ãŸæ™‚é–“ãŒã‹ã‹ã‚‹ã€‚&lt;code&gt;COM&lt;/code&gt; ã¯ C ã®ç¯„å›²ã§å®Ÿè£…ã§ãã‚‹ã®ã§å¾Œã§ã‚„ã‚ŠãŸã„&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ã¨ã„ã†ã“ã¨ã‹ã‚‰ã€æ¥½ãã†ãªã‚‚ã®ã‚’é¸æŠã—ãŸã‚‰ãã†ãªã£ãŸã€‚&lt;/p&gt;
&lt;h2&gt;ãƒ¡ãƒ³ãƒãƒ¼é–¢æ•°å‘¼ã³å‡ºã—&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;ImFont&lt;/code&gt;, &lt;code&gt;ImFontAtlas&lt;/code&gt; ã®ã¿ä½•æ•…ã‹ &lt;code&gt;c++&lt;/code&gt; è‰²ãŒå¼·ãã€ãƒ¡ãƒ³ãƒé–¢æ•°å‘¼ã³å‡ºã—ãŒã‚ã£ãŸã‚Šã™ã‚‹ã®ã§ãªã‚“ã¨ã‹ã—ãŸã„ã€‚
cdecl ã§ FFI è¨˜è¿°ã§ãã‚‹ã‚“ã ã£ã‘ï¼Ÿ&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre class="code literal-block"&gt;&lt;span class="c1"&gt;//io.Fonts-&amp;gt;AddFontDefault();&lt;/span&gt;
&lt;span class="c1"&gt;//io.Fonts-&amp;gt;AddFontFromFileTTF("../../misc/fonts/Roboto-Medium.ttf", 16.0f);&lt;/span&gt;
&lt;span class="c1"&gt;//io.Fonts-&amp;gt;AddFontFromFileTTF("../../misc/fonts/Cousine-Regular.ttf", 15.0f);&lt;/span&gt;
&lt;span class="c1"&gt;//io.Fonts-&amp;gt;AddFontFromFileTTF("../../misc/fonts/DroidSans.ttf", 16.0f);&lt;/span&gt;
&lt;span class="c1"&gt;//io.Fonts-&amp;gt;AddFontFromFileTTF("../../misc/fonts/ProggyTiny.ttf", 10.0f);&lt;/span&gt;
&lt;span class="c1"&gt;//ImFont* font = io.Fonts-&amp;gt;AddFontFromFileTTF("c:\\Windows\\Fonts\\ArialUni.ttf", 18.0f, NULL, io.Fonts-&amp;gt;GetGlyphRangesJapanese());&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;ç¬¬1å¼•æ•°ã« this ã«ç›¸å½“ã™ã‚‹å¼•æ•°ã‚’è¿½åŠ ã—ã¦ã‚„ã‚Œã°ã„ã‘ãŸã€‚&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre class="code literal-block"&gt;&lt;span class="n"&gt;ffi&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cdef&lt;/span&gt;&lt;span class="s"&gt;[[&lt;/span&gt;
&lt;span class="s"&gt;// é©å½“ã«åå‰ã‚’ä»˜ã‘æ›¿ãˆã‚‹&lt;/span&gt;
&lt;span class="s"&gt;struct ImFont* ImFontAtlas_AddFontFromFileTTF(&lt;/span&gt;
&lt;span class="s"&gt;    struct ImFontAtlas* this,&lt;/span&gt;
&lt;span class="s"&gt;    const char* filename,&lt;/span&gt;
&lt;span class="s"&gt;    float size_pixels,&lt;/span&gt;
&lt;span class="s"&gt;    const struct ImFontConfig* font_cfg,&lt;/span&gt;
&lt;span class="s"&gt;    ImWchar* glyph_ranges&lt;/span&gt;
&lt;span class="s"&gt;) asm("?AddFontFromFileTTF@ImFontAtlas@@QEAAPEAUImFont@@PEBDMPEBUImFontConfig@@PEBG@Z");&lt;/span&gt;
&lt;span class="s"&gt;]]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;h2&gt;C++ ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå¼•æ•°&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;ImGui&lt;/code&gt; ã® &lt;code&gt;API&lt;/code&gt; ã¯åŸºæœ¬çš„ã«ã»ã¼ C ã«ãªã‚‹ã‚ˆã†ã«é…æ…®ã•ã‚Œã¦ã„ã¦ã€C++ ã®æ©Ÿèƒ½ã¯é™å®šçš„ã«ã—ã‹ä½¿ã£ã¦ã„ãªã„ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é–¢æ•°ã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰&lt;/li&gt;
&lt;li&gt;ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå¼•æ•°&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ã§ã‚ã‚‹ã€‚
ã§ã€ã“ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå¼•æ•°ãŒãªã„ã¨ &lt;code&gt;imgui&lt;/code&gt; ã®ä½¿ã„å‹æ‰‹ãŒè‘—ã—ãä¸‹ãŒã‚‹ã€‚
ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã‚’ç¢ºèªã—ã¦ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’å½“ã¦ã¦ã‚„ã‚‹å¿…è¦ãŒå‡ºã‚‹ã®ã§ã€‚&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre class="code literal-block"&gt;&lt;span class="c1"&gt;// ä¾‹&lt;/span&gt;
&lt;span class="n"&gt;IMGUI_API&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;bool&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Begin&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;const&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;char&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;bool&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;p_open&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;ImGuiWindowFlags&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;flags&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;code&gt;NULL&lt;/code&gt; ã¯ &lt;code&gt;nil&lt;/code&gt; ã ã—ã€ &lt;code&gt;0&lt;/code&gt; ã¯ãã®ã¾ã¾ &lt;code&gt;0&lt;/code&gt; ãªã®ã§ã€ç°¡å˜ãªã¨ã“ã‚ã ã‘ã§ã‚‚å¯¾å¿œã™ã‚‹ã€‚
æœ€æ‚ªã€ã‚¤ãƒ³ãƒ†ãƒªã‚»ãƒ³ã‚¹ã«å‡ºã‚‹ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã§èª¿ã¹ã‚‹æ‰‹é–“ã¯å›é¿ã§ãã‚‹ã®ã ã‘ã©
&lt;code&gt;const &amp;amp;ImVec2 v = ImVec2(0, 0)&lt;/code&gt; ã¨ã‹ã¯ã‚ã‚“ã©ãã•ã„ã§ã™ã€‚
FFI å¢ƒç•Œã® &lt;code&gt;struct ã® value æ¸¡ã—&lt;/code&gt;, &lt;code&gt;ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå¼•æ•°&lt;/code&gt; ã¯è§£æ±ºã§ããªã„å ´åˆãŒå¤šã„ãŒã€ã‚³ãƒ¼ãƒ‰ç”Ÿæˆå´ã§åŠªåŠ›ã™ã‚‹ä¾¡å€¤ã¯ã‚ã‚‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;rust&lt;/code&gt; ã¯ã“ã“ãŒã§ããªãã¦ã€æ•…ã«ãƒ©ãƒƒãƒ‘ãƒ¼å´ã§ API ã‚’ builder ãƒ‘ã‚¿ãƒ¼ãƒ³ã«å¤‰æ›´ã—ã¦ã„ãŸã‚Šã™ã‚‹ã®ã ã‘ã©ã€
&lt;code&gt;rust&lt;/code&gt; ã® &lt;code&gt;imgui&lt;/code&gt; ãƒ©ãƒƒãƒ‘ãƒ¼ã® API ã‚’ä½¿ã„ãŸã„ã®ã§ã¯ãªãã¦ã€ç”Ÿã® &lt;code&gt;imgui&lt;/code&gt; ãŒä½¿ã„ãŸã„ã®ã ã€‚
&lt;code&gt;luajit&lt;/code&gt; ã® FFI ã¯ã¡ã‚‡ã£ã¨ãƒ©ãƒƒãƒ—ã™ã‚‹ã“ã¨ã§ç°¡å˜ã«è§£æ±ºã§ãã‚‹(é…ããªã‚‹ã‹ã‚‚ã—ã‚Œãªã„ãŒ)ã€‚&lt;/p&gt;
&lt;p&gt;ãƒ©ãƒƒãƒ‘ãƒ¼ã‚’è‡ªå‹•ã§ç”Ÿæˆã™ã‚‹ã‚ˆã†ã«ã§ããŸã€‚&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre class="code literal-block"&gt;    &lt;span class="c1"&gt;-- lua ã§ã¯ nil ã¨ false ã®ã¿ãŒ å½ ã§ã‚ã‚‹&lt;/span&gt;

    &lt;span class="c1"&gt;-- wrapper&lt;/span&gt;
    &lt;span class="n"&gt;Begin&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kr"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;p_open&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;flags&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="c1"&gt;-- p_open ãŒä¾›çµ¦ã•ã‚Œãªã„å ´åˆã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ nil ã«ãªã‚Šã€NULL ã¨ã—ã¦è§£é‡ˆã•ã‚Œã‚‹&lt;/span&gt;
        &lt;span class="n"&gt;flags&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;flags&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
        &lt;span class="c1"&gt;-- ffi å‘¼ã³å‡ºã—&lt;/span&gt;
        &lt;span class="kr"&gt;return&lt;/span&gt; &lt;span class="n"&gt;imgui&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Begin&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;p_open&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;flags&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="kr"&gt;end&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;

    &lt;span class="c1"&gt;-- wrapper&lt;/span&gt;
    &lt;span class="n"&gt;Button&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kr"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;label&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;size&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="c1"&gt;-- å¼•æ•°ãªã—ã® `ffi.new` ã¯ zero è©°ã‚ã™ã‚‹ã€‚ `ImVec2(0, 0)` ã«ãªã‚‹ã€‚&lt;/span&gt;
        &lt;span class="n"&gt;size&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;size&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="n"&gt;ffi&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;new&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'struct ImVec2'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="c1"&gt;-- ffi å‘¼ã³å‡ºã—&lt;/span&gt;
        &lt;span class="kr"&gt;return&lt;/span&gt; &lt;span class="n"&gt;imgui&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Button&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;label&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;size&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="kr"&gt;end&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;h2&gt;å¯å¤‰é•·å¼•æ•°&lt;/h2&gt;
&lt;div class="code"&gt;&lt;pre class="code literal-block"&gt;&lt;span class="n"&gt;IMGUI_API&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Text&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;const&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;char&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;fmt&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;...)&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;luajit ffi ã§ã¯ãã®ã¾ã¾ &lt;code&gt;...&lt;/code&gt; ã‚’æ‰±ã†ã“ã¨ãŒã§ããŸã€‚&lt;/p&gt;
&lt;p&gt;ãŸã ã—ã€&lt;code&gt;%d&lt;/code&gt; ã®ã¨ãã¯ã€
&lt;code&gt;LL&lt;/code&gt; ã‚’ã¤ã‘ã¦ &lt;code&gt;integer&lt;/code&gt; ã‚’æ¸¡ã™ã€‚
&lt;code&gt;number&lt;/code&gt; ã ã¨ã†ã¾ãã„ã‹ãªã„ã€‚&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre class="code literal-block"&gt;&lt;span class="kd"&gt;local&lt;/span&gt; &lt;span class="n"&gt;count&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="n"&gt;LL&lt;/span&gt; &lt;span class="c1"&gt;-- 64bit int. UL ã‚‚ã‚ã‚‹&lt;/span&gt;
&lt;span class="n"&gt;imgui&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Text&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"counter = %d"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;counter&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;code&gt;LL&lt;/code&gt; ã¨ &lt;code&gt;UL&lt;/code&gt; ã¯ luajit ã®æ‹¡å¼µã‚‰ã—ã„ã€‚
&lt;a href="https://luajit.org/ext_ffi_api.html"&gt;https://luajit.org/ext_ffi_api.html&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Extensions to the Lua Parser&lt;/p&gt;
&lt;p&gt;numeric literals with the suffixes LL or ULL as signed or unsigned 64 bit integers&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ã ãŒã—ã‹ã—ã€ã“ã®è¨˜æ³•ä½¿ã†ã¨ &lt;code&gt;stylua&lt;/code&gt; ãŒã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã€‚ãã‚Šã‚ƒã€ãã†ã ã€‚&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre class="code literal-block"&gt;&lt;span class="kd"&gt;local&lt;/span&gt; &lt;span class="n"&gt;count&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ffi&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;new&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'long long[1]'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;-- 32bit ã ã¨ã†ã¾ãã„ã‹ãªã„&lt;/span&gt;
&lt;span class="n"&gt;imgui&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Text&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"counter = %d"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;counter&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;ã‚’ä½¿ã†ã®ãŒã‚ˆã•ãã†ã€‚&lt;/p&gt;
&lt;h2&gt;template class ã®ã”ã¾ã‹ã—&lt;/h2&gt;
&lt;p&gt;T ã‚’ pointer ã¨ã—ã¦ã—ã‹ä½¿ã‚ãªã„å ´åˆã¯ã€
&lt;code&gt;T*&lt;/code&gt; ã‚’é™¤å»ã—ã¦ &lt;code&gt;void*&lt;/code&gt; ã«ã™ã‚Œã°å‹•ãã€‚&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre class="code literal-block"&gt;&lt;span class="k"&gt;template&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="k"&gt;typename&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nc"&gt;T&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="k"&gt;struct&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nc"&gt;ImVector&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Size&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Capacity&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Data&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="p"&gt;};&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;div class="code"&gt;&lt;pre class="code literal-block"&gt;&lt;span class="n"&gt;ffi&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cdef&lt;/span&gt;&lt;span class="s"&gt;[[&lt;/span&gt;
&lt;span class="s"&gt;struct ImVector{&lt;/span&gt;
&lt;span class="s"&gt;    int Size;&lt;/span&gt;
&lt;span class="s"&gt;    int Capacity;&lt;/span&gt;
&lt;span class="s"&gt;    void* Data;&lt;/span&gt;
&lt;span class="s"&gt;};    &lt;/span&gt;
&lt;span class="s"&gt;]]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</description><category>ffi</category><category>imgui</category><category>libclang</category><category>luajit</category><guid>https://ousttrue.github.io/posts/2021/example_glfw_openg/</guid><pubDate>Sat, 24 Jul 2021 15:00:00 GMT</pubDate></item><item><title>libclang ã§ luajit å‘ã‘ã® FFI ã‚’ç”Ÿæˆã™ã‚‹</title><link>https://ousttrue.github.io/posts/2021/luajitffi/</link><dc:creator>ousttrue</dc:creator><description>&lt;p&gt;lua ã«ã‚ˆã‚‹ imgui è¨ˆç”»ã®æº–å‚™ã¨ã—ã¦ã€ &lt;code&gt;libclang&lt;/code&gt; ã«ã‚ˆã‚‹ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ç”Ÿæˆå™¨ã‚’ &lt;code&gt;luajit&lt;/code&gt; ã«ç§»æ¤ã—ã¦ã¿ãŸã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/ousttrue/luajitffi"&gt;https://github.com/ousttrue/luajitffi&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;libclang&lt;/code&gt; ã«å¯¾ã—ã¦ã¯ã ã„ã ã„å‹•ãã‚ˆã†ã«ãªã£ã¦ã€è‡ªèº«ã§ç”Ÿæˆã—ãŸ &lt;code&gt;FFI&lt;/code&gt; ã§å‹•ä½œã™ã‚‹ã¨ã“ã‚ã¾ã§ã§ããŸã€‚
ã¾ãŸã€ &lt;code&gt;EmmyLua Annotation&lt;/code&gt; ã‚‚ã‚ã‚‹ç¨‹åº¦ä»˜ä¸ã§ããŸã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/ousttrue/luajitffi/blob/master/clang/mod.lua"&gt;https://github.com/ousttrue/luajitffi/blob/master/clang/mod.lua&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ã“ã„ã¤ã§ã€ &lt;code&gt;imgui.h&lt;/code&gt; ã‹ã‚‰ luajit FFI ã‚’ç”Ÿæˆã™ã‚‹ã€‚&lt;/p&gt;
&lt;h3&gt;libclang&lt;/h3&gt;
&lt;p&gt;c(c++)ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’ &lt;code&gt;clang_visitChildren&lt;/code&gt; ã«ã‚ˆã‚Šã€ã‚«ãƒ¼ã‚½ãƒ«ã®Tree ã¨ã—ã¦ãƒ‘ãƒ¼ã‚¹ã™ã‚‹ã€‚
ä»Šå›ã¯ã€ &lt;code&gt;CXChildVisit_Recurse&lt;/code&gt; ã§å…¨éƒ¨ã®ã‚«ãƒ¼ã‚½ãƒ«ã‚’ãƒ‘ãƒ¼ã‚¹ã™ã‚‹ã“ã¨ã«ã—ãŸã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åŒã˜ã‚«ãƒ¼ã‚½ãƒ«ãŒè¤‡æ•°å€‹æ‰€ã«ç¾ã‚Œã†ã‚‹&lt;/li&gt;
&lt;li&gt;å¾ªç’°ã—ã†ã‚‹(Link List ï¼Ÿ)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ãŒã‚ã‚Šã†ã‚‹ã“ã¨ã‚’è€ƒæ…®ã—ã¦ãŠãã€‚
&lt;code&gt;clang-c/Index.h&lt;/code&gt; ã¯ 6000 ã‚«ãƒ¼ã‚½ãƒ«ãã‚‰ã„ãªã®ã§å•é¡Œãªã„ãŒã€ &lt;code&gt;Windows.h&lt;/code&gt; ã¨ã‹ã¯ 150000 ã‚«ãƒ¼ã‚½ãƒ«ã¨ã‹çˆ†ç™ºã™ã‚‹ã€‚&lt;/p&gt;
&lt;h3&gt;ã‚ã‚Šã¨è‰²ã‚“ãªã¨ã“ã‚ã§å‹ãŒãƒã‚¹ãƒˆã—ã¦ã„ã¦ã¤ã‚‰ã„&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;struct ã®ä¸­ã¯ namespace ãªã®ã§ä½•ã§ã‚‚ã‚ã‚Š&lt;/li&gt;
&lt;li&gt;anonymous ãª union ã‚„ struct ã®ãã®å ´å®šç¾©&lt;/li&gt;
&lt;li&gt;typedef struct ãªã©ã®ãã®å ´å®šç¾©&lt;/li&gt;
&lt;li&gt;é–¢æ•°ãƒã‚¤ãƒ³ã‚¿ã®ãã®å ´å®šç¾©&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¦ã™ã‚‹ã«ã€Cã®ã‚³ãƒ¼ãƒ‰ã®æ›¸ãæ–¹ã«ã‚ˆã£ã¦ã©ã®ã‚ˆã†ãªã‚«ãƒ¼ã‚½ãƒ«æ§‹é€ ã«ãªã‚‹ã‹ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’çŸ¥ã£ã¦ã„ã‚‹å¿…è¦ãŒã‚ã£ã¦ã€
ãƒ‘ã‚¿ãƒ¼ãƒ³æ¯ã«åˆ†å²ã—ã¦æƒ…å ±ã‚’åé›†ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚
ã‚ã‚‹å‹ã®ãƒ¡ãƒ³ãƒãƒ¼ã®æƒ…å ±ã‚’é›†ã‚ã¦ã„ã‚‹ã¨ã€ãƒã‚¹ãƒˆã—ãŸåˆ¥ã®å‹æƒ…å ±ãŒç¾ã‚Œã‚‹å ´åˆãŒã‚ã‚‹ã®ã§åˆ‡ã‚Šåˆ†ã‘ã‚‹ã€‚&lt;/p&gt;
&lt;h3&gt;åŸºæœ¬çš„ãªãƒ‘ã‚¿ãƒ¼ãƒ³&lt;/h3&gt;
&lt;p&gt;FFI ã§ã¯ã€å¯¾è±¡ã¨ãªã‚‹é–¢æ•°ã‚’èµ·ç‚¹ã«ãã®é–¢æ•°ãŒä½¿ç”¨ã™ã‚‹ã™ã¹ã¦ã®å‹ã®å®šç¾©ã‚’å–ã‚Šè¾¼ã‚€ã€‚
ã‚«ãƒ¼ã‚½ãƒ«ã¯Cã®TranslationUnitã®æœ¨æ§‹é€ ã‚’ã‚ã‚‰ã‚ã—ã¦ã„ã¦ã€å‹ã‚’ã‚ã‚‰ã‚ã—ã¦ã„ãªã„ã€‚
ã‚«ãƒ¼ã‚½ãƒ«ã‹ã‚‰é ‘å¼µã£ã¦å‹ã‚’å¾—ã‚‹ã€‚
å‹ã‚’å¾—ã‚‰ã‚Œã‚‹ã‚«ãƒ¼ã‚½ãƒ«ã¯æ±ºã¾ã£ã¦ã„ã¦ã€&lt;code&gt;CXCursorType&lt;/code&gt; ãŒå®£è¨€Declã®ç³»åˆ—ã¨ãªã‚‹ã€‚&lt;/p&gt;
&lt;p&gt;TODO&lt;/p&gt;
&lt;h4&gt;ã‚«ãƒ¼ã‚½ãƒ« FunctionDecl&lt;/h4&gt;
&lt;h4&gt;ã‚«ãƒ¼ã‚½ãƒ« EnumDecl&lt;/h4&gt;
&lt;h4&gt;ã‚«ãƒ¼ã‚½ãƒ« TypedefDecl&lt;/h4&gt;
&lt;h4&gt;ã‚«ãƒ¼ã‚½ãƒ« StructDecl&lt;/h4&gt;
&lt;h4&gt;Type Pointer&lt;/h4&gt;
&lt;h4&gt;Type Array&lt;/h4&gt;
&lt;h4&gt;Type Elaborated&lt;/h4&gt;
&lt;h4&gt;Type Record&lt;/h4&gt;
&lt;h4&gt;Type FunctionProto é–¢æ•°ãƒã‚¤ãƒ³ã‚¿ pointer =&amp;gt; functionproto&lt;/h4&gt;
&lt;h4&gt;union&lt;/h4&gt;
&lt;h4&gt;typedef struct&lt;/h4&gt;
&lt;h4&gt;c++ name mangling&lt;/h4&gt;
&lt;h4&gt;ãƒã‚¯ãƒ­ã¨ã®æˆ¦ã„&lt;/h4&gt;
&lt;h3&gt;luajit ffi&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;ffi.cdef&lt;/code&gt; ã«ç´ ç›´ã«å®šç¾©ã™ã‚Œã°ã„ã„ã®ã§ã€ä»–ã®è¨€èªã® FFI ã«æ¯”ã¹ã¦ç°¡å˜ã€‚&lt;/p&gt;
&lt;p&gt;ã¯ã¾ã‚Šã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;ffi.load&lt;/code&gt; ã®è¿”ã‚Šå€¤ãŒ GC ã•ã‚Œã‚‹ã¨é–¢æ•°ãƒã‚¤ãƒ³ã‚¿ãŒæ­»ã¬&lt;/li&gt;
&lt;li&gt;pointer ã¯ &lt;code&gt;ffi.new('TYPE[1]')&lt;/code&gt; ã®ã‚ˆã†ã«ã‚µã‚¤ã‚ºï¼‘ã® array ã§é‹ç”¨ã™ã‚‹&lt;/li&gt;
&lt;li&gt;tostring ã¨ ffi.string ã¯é•ã†&lt;/li&gt;
&lt;li&gt;nullptr ã¯ nil ?&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ã ã„ãŸã„ã‚ˆãã«è¨ˆã‚‰ã£ã¦ãã‚Œã‚‹ã®ã§ã€ &lt;code&gt;rust&lt;/code&gt; ã® FFI ã«æ¯”ã¹ã¦ç°¡å˜ãªã®ã§ã‚ã£ãŸã€‚&lt;/p&gt;
&lt;p&gt;ã²ã¨ã¤ã ã‘ã¯ã¾ã‚ŠãŒã‚ã£ã¦ã€ &lt;code&gt;struct&lt;/code&gt; ã®å€¤æ¸¡ã—ãŒã§ããªã„å ´åˆãŒã‚ã‚‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href="http://wiki.luajit.org/FFI-Callbacks-with-pass-by-value-structs"&gt;http://wiki.luajit.org/FFI-Callbacks-with-pass-by-value-structs&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ãã†ã„ãˆã°ã€ &lt;code&gt;rust&lt;/code&gt; ã§ã‚‚ &lt;code&gt;struct&lt;/code&gt; ã®å€¤æ¸¡ã—ã§ã¯ã¾ã£ãŸè¨˜æ†¶ãŒã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href="https://forum.dlang.org/thread/dkamxcamwttszxwwxttv@forum.dlang.org"&gt;https://forum.dlang.org/thread/dkamxcamwttszxwwxttv@forum.dlang.org&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;rust ã®å ´åˆã¯ã€ &lt;code&gt;struct&lt;/code&gt; ã®å€¤è¿”ã—ãŒå‹•ã‹ãªã‹ã£ãŸã€‚
ã“ã‚Œã€C ã®æ–¹ã§ pointer çµŒç”±ã§å€¤ã‚’è¿”ã™ãƒ©ãƒƒãƒ‘ãƒ¼ã‚’å®šç¾©ã™ã‚‹å¿…è¦ãŒã‚ã£ã¦å›é¿æ–¹æ³•ã¯ãªã‹ã£ãŸã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ImVec2 ImGui::GetContentRegionAvail()&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;luajit ffi ã§ã‚‚ã§ãã‚‹ã‹æ³¨æ„ãŒå¿…è¦ã ãªã€‚&lt;/p&gt;
&lt;h3&gt;lfs ã¸ã®ä¾å­˜ã‚’ FFI ã—ãŸ Windows API ã§ç½®ãæ›ãˆã‚‹&lt;/h3&gt;
&lt;p&gt;ç¾çŠ¶ã€ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œ &lt;code&gt;isExists&lt;/code&gt;, &lt;code&gt;mkDir&lt;/code&gt; ã®ãŸã‚ã« lfs ã‚’ä½¿ã£ã¦ã„ã‚‹ã®ã ã‘ã©ã€
FFI ã§ Windows API ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ã—ãŸã‚‰ lfs ç„¡ã—ã«ã§ããã†ã€‚
ã¨ãªã‚Œã° luarocks ã‚‚ç„¡ã—ã«ã§ãã‚‹ã®ã§ã€ å¿…è¦ãªã®ã¯ luajit.exe ã ã‘ã«ãªã‚‹ã€‚&lt;/p&gt;</description><category>libclang</category><category>lua</category><guid>https://ousttrue.github.io/posts/2021/luajitffi/</guid><pubDate>Thu, 22 Jul 2021 15:00:00 GMT</pubDate></item><item><title>rust ã® ffi</title><link>https://ousttrue.github.io/posts/2021/rust_ffi/</link><dc:creator>ousttrue</dc:creator><description>&lt;p&gt;rust ã® FFI ã«å–ã‚Šçµ„ã‚“ã§ã„ãŸã€‚
çµå±€ã€ sdl binding ã¨ imgui binding ã‚’è‡ªä½œã—ãŸã€‚&lt;/p&gt;
&lt;p&gt;ä¸¡æ–¹ã¨ã‚‚ã€æ—¢å­˜ã® crate ãŒã‚ã‚‹ã®ã«ä½•æ•…ã‚ã–ã‚ã–è‡ªä½œã™ã‚‹ã®ã‹ã¨è¨€ãˆã°ã€
ãƒ©ãƒƒãƒ—ã•ã‚Œã¦ä½¿ã„æ–¹ãŒå¤‰ã‚ã£ãŸã¨ã“ã‚ã‚’å­¦ã¶ã®ãŒé¢å€’ãã•ã‹ã£ãŸã‹ã‚‰ã˜ã‚ƒã€‚
&lt;a href="https://crates.io/crates/sdl2"&gt;SDL&lt;/a&gt; ã¯ã€€&lt;code&gt;HWND&lt;/code&gt; ã‚’å–å¾—ã™ã‚‹æ–¹æ³•ãŒã‚ã‹ã‚Šã«ããã¦ &lt;code&gt;SDL_Event&lt;/code&gt; ã‚’ &lt;code&gt;imgui&lt;/code&gt; ã«æ¸¡ã™æ–¹æ³•ã¯ã‚ã‹ã‚‰ãªã‹ã£ãŸã€‚
&lt;a href="https://crates.io/crates/imgui"&gt;imgui&lt;/a&gt; ã¯æœ€æ–°ç‰ˆã® &lt;code&gt;docking&lt;/code&gt; ãƒ–ãƒ©ãƒ³ãƒãŒä½¿ã„ãŸã‹ã£ãŸã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href="https://crates.io/crates/clang-sys"&gt;clang-sys&lt;/a&gt; ã‚’ä½¿ã£ã¦ rust ã® FFI ã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã—ã€
&lt;a href="https://crates.io/crates/cc"&gt;cc&lt;/a&gt; ã‚’ä½¿ã£ã¦ &lt;code&gt;build.rs&lt;/code&gt; ã§ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ãƒ“ãƒ«ãƒ‰ã—ãŸã€‚
ã“ã‚Œã§ã€ &lt;code&gt;c&lt;/code&gt; &lt;code&gt;c++&lt;/code&gt; ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚½ãƒ¼ã‚¹ãƒ“ãƒ«ãƒ‰ã—ã¦ã‚¹ã‚¿ãƒ†ã‚£ãƒƒã‚¯ãƒªãƒ³ã‚¯ã—ã€ &lt;code&gt;FFI&lt;/code&gt; ã§é–¢æ•°ã‚’å‘¼ã³å‡ºã—æ”¾é¡Œã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;imgui&lt;/code&gt; ã® FFI ç”Ÿæˆã®æ–¹ãŒç°¡å˜ã§ã€ &lt;code&gt;SDL&lt;/code&gt; ã®æ–¹ã¯ C ã®ãƒã‚¯ãƒ­ã«è‹¦ã—ã‚“ã (é›‘ã«å¯¾å¿œ)ã€‚
ã¨ã¯ã„ãˆã€ã‚ã‚Šã¨ç´ ç›´ã«è¨˜è¿°ã§ãã‚‹ã®ã§å¿«é©ã§ã‚ã£ãŸã€‚&lt;/p&gt;
&lt;p&gt;ãŠã‹ã’ã§ã€ rust ã® FFI å‘¨ã‚Šã«å¯¾ã™ã‚‹ç¿’ç†Ÿåº¦ãŒã ã„ã¶ä¸ŠãŒã£ãŸã€‚&lt;/p&gt;
&lt;h3&gt;ã§ããªã„ã“ã¨&lt;/h3&gt;
&lt;p&gt;POD ã® struct ã‚’ return ã™ã‚‹é–¢æ•°ã‚’å‘¼ã³å‡ºã™ã¨ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã—ãŸã€‚&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre class="code literal-block"&gt;&lt;span class="n"&gt;ImVec2&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;ImGui::GetContentRegionAvail&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Dè¨€èªã ã‘ã©&lt;/p&gt;
&lt;p&gt;https://forum.dlang.org/thread/dkamxcamwttszxwwxttv@forum.dlang.org&lt;/p&gt;
&lt;p&gt;ã®ä»¶ã‚‰ã—ãã€C++ å´ã§ãƒ©ãƒƒãƒ—ã—ãŸã€‚&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre class="code literal-block"&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;pGetContentRegionAvail&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ImVec2&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;pOut&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pOut&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;pOut&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;GetContentRegionAvail&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;h3&gt;è‡ªç”±ã« static link ã§ãã‚‹&lt;/h3&gt;
&lt;p&gt;build.rs ã‚’é§†ä½¿ã—ã¦è‡ªç”±ã«ãƒªãƒ³ã‚¯ã§ãã‚‹ã®ã§ã€ã‚¹ã‚¿ãƒ†ã‚£ãƒƒã‚¯ãƒªãƒ³ã‚¯ã¨ãƒ€ã‚¤ãƒŠãƒŸãƒƒã‚¯ãƒªãƒ³ã‚¯ã‚’åˆ¶å¾¡ã§ãã‚‹ã®ã§ä¾¿åˆ©ã€‚
ç‰¹ã« Windows ã®å ´åˆã€ã‚·ã‚¹ãƒ†ãƒ ã«å…±é€šã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒæœŸå¾…ã§ããªã„ã®ã§ã€
DLLã‚’ä½œã£ã¦ã‚³ãƒ”ãƒ¼ã—ãŸå…¥ã‚Šãƒ‘ã‚¹ã‚’é€šã™ã‚ˆã‚Šã¯ã€ã‚¹ã‚¿ãƒ†ã‚£ãƒƒã‚¯ãƒªãƒ³ã‚¯ã™ã‚‹æ–¹ãŒæ°—æ¥½ã€‚
ä»Šå›ã¯ &lt;code&gt;cc&lt;/code&gt; ã§ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ãŸã‘ã©ã€&lt;code&gt;c++/c&lt;/code&gt; ã¯ CMake ã§ãƒ“ãƒ«ãƒ‰ã™ã‚‹æ–¹ãŒç®¡ç†ã—ã‚„ã™ã„ã‹ã‚‚ã—ã‚Œãªã„ã€‚&lt;/p&gt;</description><category>ffi</category><category>libclang</category><category>rust</category><guid>https://ousttrue.github.io/posts/2021/rust_ffi/</guid><pubDate>Sat, 19 Jun 2021 15:00:00 GMT</pubDate></item><item><title>libclangã§WindowsKitsã‚’DllImportã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½œã£ãŸ(ã¦ã„ã‚‹)</title><link>https://ousttrue.github.io/qiita/libclangdewindowskitswodllimportsururaiburariwozuo-tsutateiru/</link><dc:creator>ousttrue</dc:creator><description>&lt;p&gt;&lt;a href="https://qiita.com/ousttrue/items/d878ec97483cb8834793"&gt;https://qiita.com/ousttrue/items/d878ec97483cb8834793&lt;/a&gt;&lt;/p&gt;</description><category>.netcore</category><category>libclang</category><category>qiita</category><guid>https://ousttrue.github.io/qiita/libclangdewindowskitswodllimportsururaiburariwozuo-tsutateiru/</guid><pubDate>Sat, 27 Jun 2020 14:30:28 GMT</pubDate></item></channel></rss>