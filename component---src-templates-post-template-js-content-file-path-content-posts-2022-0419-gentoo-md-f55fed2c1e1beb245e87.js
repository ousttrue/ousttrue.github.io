"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5485],{58:function(e,n,t){t.r(n),t.d(n,{default:function(){return d}});var l=t(1151),a=t(7294);function c(e){const n=Object.assign({h1:"h1",p:"p",code:"code",h2:"h2",a:"a",ul:"ul",li:"li",span:"span"},(0,l.ah)(),e.components);return a.createElement(a.Fragment,null,a.createElement(n.h1,null,"Gentoo 構築"),"\n",a.createElement(n.p,null,"久しぶりに gentoo の機運が高まったので入れてみた。\n先に ",a.createElement(n.code,null,"Ubuntu-20.04")," を入れておいて、後ろのパーティションに gentoo をインストールする作戦。\nUbuntu と同じ ",a.createElement(n.code,null,"/home")," をマウントしてみたら ",a.createElement(n.code,null,"dotfiles")," に互換性が無かったのでやめた。\nわりと順調にインストールできた。\nゆくゆくは wsl も gentoo に換装したいところじゃ。"),"\n",a.createElement(n.h2,null,"2022-05-05"),"\n",a.createElement(n.p,null,"システムを壊してしもた。\n作りなおし。ついでに ",a.createElement(n.a,{href:"https://wiki.gentoo.org/wiki/Btrfs"},"btffs")," やってみる。"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"https://wiki.gentoo.org/wiki/Handbook:AMD64/Installation/Stage#Downloading_the_stage_tarball"),"\n"),"\n",a.createElement(n.p,null,"Stage3: ",a.createElement(n.code,null,"openrc | desktop profile")),"\n",a.createElement(n.h2,null,"btrfs"),"\n",a.createElement(n.p,null,a.createElement(n.code,null,"/etc/fstab")),"\n",a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">/dev/sdb                /srv            btrfs           compress=zstd:9,relatime,rw     0 0</code></pre></div>'}}),"\n",a.createElement(n.h2,null,"python-3.10"),"\n",a.createElement(n.p,null,a.createElement(n.code,null,"PYTHON_SINGLE_TARGET")),"\n",a.createElement(n.p,null,"6月くらいにデフォルトになる予定みたいだ。先にやってみた。"),"\n",a.createElement(n.p,null,"間違い。去年の6月に、 ",a.createElement(n.code,null,"Python-3.9")," がデフォルトになった。\n",a.createElement(n.code,null,"Python-3.10")," は今のところ予定に無い。\nいろいろインストールできなくなったので、元に戻した。"),"\n",a.createElement(n.h2,null,"make.conf"),"\n",a.createElement(n.p,null,"ここに貼っておこう。\nこいつを育てているようなものだし。"),"\n",a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text"># These settings were set by the catalyst build script that automatically\n# built this stage.\n# Please consult /usr/share/portage/config/make.conf.example for a more\n# detailed example.\nCOMMON_FLAGS="-march=native -O2 -pipe"\nCFLAGS="${COMMON_FLAGS}"\nCXXFLAGS="${COMMON_FLAGS}"\nFCFLAGS="${COMMON_FLAGS}"\nFFLAGS="${COMMON_FLAGS}"\n\n# NOTE: This stage was built with the bindist Use flag enabled\nPORTDIR="/var/db/repos/gentoo"\nDISTDIR="/var/cache/distfiles"\nPKGDIR="/var/cache/binpkgs"\n\nUSE="X sixel truetype vim-syntax jpeg png python fontforge cjk alsa \\\n     pulseaudio mp3 dbus opengl ffmpeg mad mpd elogind gtk"\nINPUT_DEVICES="evdev libinput synaptics"\n#VIDEO_CARDS="nouveau"\nVIDEO_CARDS="nvidia"\nABI_X86="64"\n\n# This sets the language of build output to English.\n# Please keep this setting intact when reporting bugs.\nLC_MESSAGES="C"\n\nMAKEOPTS="-j6"</code></pre></div>'}}),"\n",a.createElement(n.h2,null,"passwd"),"\n",a.createElement(n.p,null,a.createElement(n.code,null,"/etc/security/passwdqc.conf")),"\n",a.createElement(n.h2,null,"boot"),"\n",a.createElement(n.p,null,a.createElement(n.code,null,"refind")," を試してみた。\n先に、Ubuntu の方でインストールして ",a.createElement(n.code,null,"gentoo")," でエントリーだけ増やした。\n",a.createElement(n.code,null,"grub2")," より設定が簡単だと思った。\n情報は少なめ。"),"\n",a.createElement(n.p,null,a.createElement(n.code,null,"/boot/efi/EFI/refind/refind.conf")),"\n",a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text"># rootの指定が必要 \nmenuentry Gentoo {\n    icon EFI/refind/icons/os_gentoo.png\n    loader /EFI/gentoo/vmlinuz-5.15.32-gentoo-r1-x86_64\n    initrd /EFI/gentoo/initramfs-5.15.32-gentoo-r1-x86_64.img\n    options "root=/dev/sda4"\n}</code></pre></div>'}}),"\n",a.createElement(n.p,null,"起動時に自動検索と設定に記述したエントリが出てくるので、",a.createElement(n.code,null,"-")," キーで隠すと見ためがすっきりする。"),"\n",a.createElement(n.h2,null,"xorg"),"\n",a.createElement(n.p,null,"なんとなくできた。"),"\n",a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">$ startx -- vt1</code></pre></div>'}}),"\n",a.createElement(n.p,null,"としないとエラーになる。\n",a.createElement(n.code,null,"/etc/X11")," は作らなくても動いた。"),"\n",a.createElement(n.p,null,"いつもどおりに ",a.createElement(n.code,null,"openbox"),", ",a.createElement(n.code,null,"tint2"),", ",a.createElement(n.code,null,"PCManFM"),", ",a.createElement(n.code,null,"conky")," という感じだが、今回は新型の ",a.createElement(n.code,null,"wezterm")," がある。"),"\n",a.createElement(n.h2,null,"yaft"),"\n",a.createElement(n.p,null,"nerdfonts 入りの bdffont を作りたいのだが未だ。\nmlterm-fb や kmscon も試してみたのだがうまく動かなかった。"),"\n",a.createElement(n.h2,null,"wayland"),"\n",a.createElement(n.p,null,"TODO:"))}var r=function(e){void 0===e&&(e={});const{wrapper:n}=Object.assign({},(0,l.ah)(),e.components);return n?a.createElement(n,e,a.createElement(c,e)):c(e)},o=t(8678),s=t(4160),u=t(8736);const m={code:e=>{let{children:n,className:t}=e;return t?a.createElement(u.Z,{className:t},n):a.createElement("code",null,n)}};function i(e){let{data:n,children:t}=e;const c=n.mdx.frontmatter;return a.createElement(o.Z,null,a.createElement("h1",null,c.title),a.createElement("div",{className:"tags-index"},c.tags&&c.tags.length>0&&c.tags.map((e=>a.createElement(s.rU,{to:"/tags/"+e+"/",itemProp:"url"},a.createElement("button",null,e))))),a.createElement(l.Zo,{components:m},t))}function d(e){return a.createElement(i,e,a.createElement(r,e))}}}]);
//# sourceMappingURL=component---src-templates-post-template-js-content-file-path-content-posts-2022-0419-gentoo-md-f55fed2c1e1beb245e87.js.map