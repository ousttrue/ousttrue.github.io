"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2026],{4688:function(e,t,n){n.r(t);var a=n(1151),l=n(7294);function s(e){const t=Object.assign({p:"p",pre:"pre",code:"code"},(0,a.ah)(),e.components);return l.createElement(l.Fragment,null,l.createElement(t.p,null,"ディレクトリ表示をする専用のウィジェットがあったような気がするが、練習のため実装。"),"\n",l.createElement(t.pre,null,l.createElement(t.code,{className:"language-python"},"# !/usr/bin/env python\n# coding: utf-8\n\n\nimport re import operator import os import sys import stat from\nPyQt4.QtCore import * from PyQt4.QtGui import *\n\nclass File(object):\nheader=[\n\n‘type’, ‘name’, ‘size’, ‘mtime’ ]\ndef __init__(self, path):\nself.path=os.path.abspath(path) self.data=[None, None, None,\nNone] s=os.stat(path) mode=s[stat.ST_MODE] if\nstat.S_ISDIR(mode): self.data[0]=‘dir’ elif\nstat.S_ISLNK(mode): self.data[0]=‘link’ elif\nstat.S_ISREG(mode): self.data[0]=‘file’ else:\nself.data[0]=‘unknown’ self.data[1]=os.path.basename(path)\nself.data[2]=s[stat.ST_SIZE]\nself.data[3]=s[stat.ST_MTIME]\ndef __str__(self):\nreturn “<%s %s>” % (self.data[0], self.data[1])\ndef __getitem__(self, key):\nreturn self.data[key]\ndef is_dir(self):\nreturn self.data[0]==‘dir’\n\nclass MyTableModel(QAbstractTableModel):\ndef __init__(self, parent, path):\n\nsuper(MyTableModel, self).__init__(parent) def\nget_stat(name): f=File(os.path.join(path, name)) return f\nself.data=[get_stat(os.path.join(path, “..”))]+[get_stat(e)\nfor e in os.listdir(path)]\ndef rowCount(self, parent):\nreturn len(self.data)\ndef columnCount(self, parent):\nreturn len(File.header)\ndef data(self, index, role):\nif not index.isValid():\n\nreturn None\nelif role != Qt.DisplayRole:\nreturn None\n\nreturn self.data[index.row()][index.column()]\ndef headerData(self, col, orientation, role):\nif orientation == Qt.Horizontal and role == Qt.DisplayRole:\n\nreturn File.header[col]\n\nreturn None\ndef sort(self, Ncol, order):\n”““Sort table by given column number.\n“”” self.emit(SIGNAL(“layoutAboutToBeChanged()”)) self.data =\nsorted(self.data,\nkey=operator.itemgetter(Ncol), reverse=(order!=Qt.DescendingOrder))\nself.emit(SIGNAL(“layoutChanged()”))\ndef getRow(self, index):\nreturn self.data[index]\n\nclass MyWindow(QWidget):\ndef __init__(self, *args): QWidget.__init__(self,*args)\n\n# create the view self.tv = QTableView() # hide\ngrid self.tv.setShowGrid(False) # hide vertical header vh\n= self.tv.verticalHeader() vh.setVisible(False) # set\nhorizontal header properties hh = self.tv.horizontalHeader()\nhh.setStretchLastSection(True) # set column width to fit\ncontents self.tv.resizeColumnsToContents() # enable\nsorting self.tv.setSortingEnabled(True) # layout layout\n= QVBoxLayout() layout.addWidget(self.tv) self.setLayout(layout)\n# double\nclick self.tv.doubleClicked.connect(self.onDoubleClick)\n\ndef chdir(self, path):\n\nself.tm = MyTableModel(self, path) # set the table\nmodel self.tv.setModel(self.tm)\ndef onDoubleClick(self, event):\nitem=self.tm.getRow(event.row()) if not item.is_dir():\nreturn self.chdir(item.path)\n\ndef main():\napp = QApplication(sys.argv) w = MyWindow() w.chdir(“.”) w.show()\nsys.exit(app.exec_())\nif __name__ == “__main__“:\nmain()\n")),"\n",l.createElement(t.p,null,"ToDo"),"\n",l.createElement(t.p,null,"種類毎のアイコン表示\n日付の表示\n数字カラムの右寄せ\n行選択\nFilterProxyModel"))}t.default=function(e){void 0===e&&(e={});const{wrapper:t}=Object.assign({},(0,a.ah)(),e.components);return t?l.createElement(t,e,l.createElement(s,e)):s(e)}},1151:function(e,t,n){n.d(t,{ah:function(){return s}});var a=n(7294);const l=a.createContext({});function s(e){const t=a.useContext(l);return a.useMemo((()=>"function"==typeof e?e(t):{...t,...e}),[t,e])}}}]);
//# sourceMappingURL=component---content-posts-2013-01-04-qabstracttablemodel-md-4988914727e8ca508729.js.map