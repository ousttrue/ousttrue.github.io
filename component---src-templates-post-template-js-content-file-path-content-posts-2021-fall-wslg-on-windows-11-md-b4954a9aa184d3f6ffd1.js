"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8917],{2318:function(e,l,t){t.r(l),t.d(l,{default:function(){return E}});var n=t(1151),a=t(7294);function c(e){const l=Object.assign({p:"p",code:"code",h1:"h1",ul:"ul",li:"li",a:"a",h2:"h2",span:"span",h3:"h3"},(0,n.ah)(),e.components);return a.createElement(a.Fragment,null,a.createElement(l.p,null,"PCを新調したので ",a.createElement(l.code,null,"Windows11")," にアップグレードして wslg を試してみた。"),"\n",a.createElement(l.h1,null,"その前に"),"\n",a.createElement(l.ul,null,"\n",a.createElement(l.li,null,a.createElement(l.a,{href:"https://news.mynavi.jp/article/win11tips-6/"},"Windows 10と同じコンテキストメニューを使う")),"\n"),"\n",a.createElement(l.h1,null,"WSLg"),"\n",a.createElement(l.h2,null,"WSLg とは"),"\n",a.createElement(l.ul,null,"\n",a.createElement(l.li,null,"https://github.com/microsoft/wslg"),"\n",a.createElement(l.li,null,"https://docs.microsoft.com/en-us/windows/wsl/tutorials/gui-apps"),"\n",a.createElement(l.li,null,"(2021.10) https://devblogs.microsoft.com/commandline/a-preview-of-wsl-in-the-microsoft-store-is-now-available/"),"\n",a.createElement(l.li,null,"(2021.04) https://devblogs.microsoft.com/commandline/the-initial-preview-of-gui-app-support-is-now-available-for-the-windows-subsystem-for-linux-2/"),"\n",a.createElement(l.li,null,"(2020) ",a.createElement(l.a,{href:"https://www.phoronix.com/scan.php?page=news_item&px=Microsoft-Writing-Wayland-Comp"},"Microsoft Is Writing Its Own Wayland Compositor As Part Of WSL2 GUI Efforts")),"\n"),"\n",a.createElement(l.p,null,"ビジュアルは ",a.createElement(l.code,null,"Wayland")," 、音声は ",a.createElement(l.code,null,"PulseAudio")," で WSLg 仮想マシンに転送することで、\nLinux の GUI アプリを使えるようにする仕組み。"),"\n",a.createElement(l.h2,null,"Windows11 で試す"),"\n",a.createElement(l.p,null,"Windows11 では、 ",a.createElement(l.code,null,"Windows Insider Program")," にせずとも使える。"),"\n",a.createElement(l.p,null,"~~",a.createElement(l.code,null,"Ubuntu-CommPrev")," をインストールすると ",a.createElement(l.code,null,"wslg")," できる。~~\nWSLで ",a.createElement(l.code,null,"/mnt/wslg")," が存在していれば動作する状態になっている。\nDistribution による特別な設定は不要？"),"\n",a.createElement(l.p,null,a.createElement(l.code,null,"Ubuntu-CommPrev")," の方が ",a.createElement(l.code,null,"GPU driver")," が新しいなど違いあり。"),"\n",a.createElement(l.ul,null,"\n",a.createElement(l.li,null,"\n",a.createElement(l.p,null,"(2021)",a.createElement(l.a,{href:"https://kledgeb.blogspot.com/2021/04/wsl-222-linux-guiwslg.html"},"WSL その222 - Linux GUIアプリを動かすWSLgのアーキテクチャーと仕組み")),"\n"),"\n",a.createElement(l.li,null,"\n",a.createElement(l.p,null,"https://github.com/microsoft/wslg/discussions/78"),"\n"),"\n"),"\n",a.createElement(l.p,null,a.createElement(l.code,null,"glxinfo -B")),"\n",a.createElement(l.h1,null,"X"),"\n",a.createElement(l.p,null,"特に何も設定しなくても ",a.createElement(l.code,null,"xterm")," とか ",a.createElement(l.code,null,"gvim")," などの X11 のアプリは動作する。"),"\n",a.createElement(l.h2,null,"101キーボード"),"\n",a.createElement(l.ul,null,"\n",a.createElement(l.li,null,a.createElement(l.a,{href:"https://www.eisbahn.jp/yoichiro/2021/06/wslg.html"},"Windows 10 HomeでWSLgをさっそく試してみた")),"\n"),"\n",a.createElement(l.p,null,a.createElement(l.code,null,"setxkbmap -layout us")," でなおった。\nなおらないアプリもある。"),"\n",a.createElement(l.h1,null,"PluseAudio"),"\n",a.createElement(l.h2,null,"mpd から pluse audio に出力してみる"),"\n",a.createElement(l.ul,null,"\n",a.createElement(l.li,null,"https://mpcbridge.fourthgate.jp/other/mpd_on_ubuntu"),"\n",a.createElement(l.li,null,"https://github.com/microsoft/wslg/issues/306"),"\n"),"\n",a.createElement(l.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">echo $PULSE_SERVER\n/mnt/wslg/PulseServer</code></pre></div>'}}),"\n",a.createElement(l.p,null,"環境変数 ",a.createElement(l.code,null,"$PULSE_SERVER")," にファイルパスが入っているときは ",a.createElement(l.code,null,"unix socket")," を使うという意味。"),"\n",a.createElement(l.p,null,a.createElement(l.code,null,"/etc/mpd.conf")),"\n",a.createElement(l.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">audio_output {\n       type     "pulse"\n       name     "My PULSE Device"\n       server   "/mnt/wslg/PulseServer" # $PULSE_SERVER\n}</code></pre></div>'}}),"\n",a.createElement(l.p,null,"という設定になる。",a.createElement(l.code,null,"TCP")," 経由ではなく ",a.createElement(l.code,null,"UNIX SOCKET")," 経由なのに注意。"),"\n",a.createElement(l.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">load-module module-native-protocol-tcp auth-ip-acl=127.0.0.1</code></pre></div>'}}),"\n",a.createElement(l.p,null,"は使われない。"),"\n",a.createElement(l.h3,null,"mpd client"),"\n",a.createElement(l.ul,null,"\n",a.createElement(l.li,null,"https://www.microsoft.com/ja-jp/p/mpdctrl/9nv2bbj82brx"),"\n"))}var r=function(e){void 0===e&&(e={});const{wrapper:l}=Object.assign({},(0,n.ah)(),e.components);return l?a.createElement(l,e,a.createElement(c,e)):c(e)},u=t(8678),m=t(4160),s=t(8736);const o={code:e=>{let{children:l,className:t}=e;return t?a.createElement(s.Z,{className:t},l):a.createElement("code",null,l)}};function i(e){let{data:l,children:t}=e;const c=l.mdx.frontmatter;return a.createElement(u.Z,null,a.createElement("h1",null,c.title),a.createElement("div",{className:"tags-index"},c.tags&&c.tags.length>0&&c.tags.map((e=>a.createElement(m.rU,{to:"/tags/"+e+"/",itemProp:"url"},a.createElement("button",null,e))))),a.createElement(n.Zo,{components:o},t))}function E(e){return a.createElement(i,e,a.createElement(r,e))}}}]);
//# sourceMappingURL=component---src-templates-post-template-js-content-file-path-content-posts-2021-fall-wslg-on-windows-11-md-b4954a9aa184d3f6ffd1.js.map