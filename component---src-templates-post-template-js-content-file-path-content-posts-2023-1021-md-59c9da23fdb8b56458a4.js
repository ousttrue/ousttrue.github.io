"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4949],{4366:function(e,n,t){t.r(n),t.d(n,{default:function(){return i}});var a=t(1151),s=t(7294);function l(e){const n=Object.assign({p:"p",code:"code",h1:"h1",span:"span",blockquote:"blockquote"},(0,a.ah)(),e.components);return s.createElement(s.Fragment,null,s.createElement(n.p,null,"久しぶりに更新しようと思ったら gatsby が動かなくて他の ssg を物色していたのだけど、\n最近手に入れた ",s.createElement(n.code,null,"quest3")," で遊ぶべく ",s.createElement(n.code,null,"A-Frame")," を初めており javascript が活性化されたので、\nやはり ",s.createElement(n.code,null,"gatsby")," を続けることにした。\n以下、修復メモ。"),"\n",s.createElement(n.h1,null,"CommonJS Error"),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">$ gatsby develop</code></pre></div>'}}),"\n",s.createElement(n.p,null,"すると何かエラーになる。"),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text"> ERROR #10123  API.CONFIG.LOADING\n\nWe encountered an error while trying to load your site\'s gatsby-config. Please fix the error and try again.\n\n  Error: [ERR_REQUIRE_ESM]: require() of ES Module node_modules/remark-gfm/index.js from gatsby-config.js not supported.\n  Instead change the require of index.js in gatsby-config.js to a dynamic import() which is available in all CommonJS modules.</code></pre></div>'}}),"\n",s.createElement(n.p,null,"https://zenn.dev/yodaka/articles/596f441acf1cf3#commonjs%E3%81%AE%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E3%81%8B%E3%82%89esm%E3%82%92%E5%91%BC%E3%81%B6"),"\n",s.createElement(n.blockquote,null,"\n",s.createElement(n.p,null,"CommonJSのモジュールからESMを呼ぶ"),"\n"),"\n",s.createElement(n.p,null,"があかんらしい。"),"\n",s.createElement(n.p,null,s.createElement(n.code,null,"gatsby-config.js")," が以下のようになっていて ",s.createElement(n.code,null,"CommonJs")," なのがよくないらしい。"),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token literal-property property">siteMetadata</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span></code></pre></div>'}}),"\n",s.createElement(n.p,null,"この辺 ",s.createElement(n.code,null,"A-Frame")," やりながら通ったのでだいたいわかる。"),"\n",s.createElement(n.h1,null,"ESModule に書き換え。"),"\n",s.createElement(n.p,null,"https://www.gatsbyjs.com/docs/how-to/custom-configuration/es-modules/"),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token literal-property property">siteMetadata</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">export</span> <span class="token keyword">default</span> config</code></pre></div>'}}),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">(node:16343) Warning: To load an ES module, set "type": "module" in the package.json or use the .mjs extension.\n(Use `node --trace-warnings ...` to show where the warning was created)\n\n\n ERROR #10123  API.CONFIG.LOADING</code></pre></div>'}}),"\n",s.createElement(n.p,null,s.createElement(n.code,null,"conifg-gatsby.js")," => ",s.createElement(n.code,null,"conifg-gatsby.mjs")),"\n",s.createElement(n.p,null,"なおった。"))}var o=function(e){void 0===e&&(e={});const{wrapper:n}=Object.assign({},(0,a.ah)(),e.components);return n?s.createElement(n,e,s.createElement(l,e)):l(e)},c=t(8678),r=t(4160),p=t(8736);const u={code:e=>{let{children:n,className:t}=e;return t?s.createElement(p.Z,{className:t},n):s.createElement("code",null,n)}};function g(e){let{data:n,children:t}=e;const l=n.mdx.frontmatter;return s.createElement(c.Z,null,s.createElement("h1",null,l.title),s.createElement("div",{className:"tags-index"},l.tags&&l.tags.length>0&&l.tags.map((e=>s.createElement(r.rU,{to:"/tags/"+e+"/",itemProp:"url"},s.createElement("button",null,e))))),s.createElement(a.Zo,{components:u},t))}function i(e){return s.createElement(g,e,s.createElement(o,e))}}}]);
//# sourceMappingURL=component---src-templates-post-template-js-content-file-path-content-posts-2023-1021-md-59c9da23fdb8b56458a4.js.map