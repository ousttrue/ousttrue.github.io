{"version":3,"file":"component---src-templates-post-template-js-content-file-path-home-runner-work-ousttrue-github-io-ousttrue-github-io-content-posts-2017-07-vcpkg-alembic-md-6a6fafa8f10aa26a2e7b.js","mappings":"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","sources":["webpack:///./content/posts/2017/07/vcpkg_alembic.md","webpack:///./src/templates/post-template.js"],"sourcesContent":["/*@jsxRuntime classic @jsx React.createElement @jsxFrag React.Fragment*/\nimport {useMDXComponents as _provideComponents} from \"@mdx-js/react\";\nimport React from \"react\";\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    ul: \"ul\",\n    li: \"li\",\n    span: \"span\"\n  }, _provideComponents(), props.components);\n  return React.createElement(React.Fragment, null, React.createElement(_components.p, null, \"mmdbridgeのvcpkgを使ったビルド手順を作ったついでにAlembicのvcpkg向けパッケージを作ってみる。\"), \"\\n\", React.createElement(_components.p, null, \"情報収集\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"https://github.com/Microsoft/vcpkg/blob/master/docs/examples/packaging-zlib.md\"), \"\\n\"), \"\\n\", React.createElement(_components.p, null, \"読んだ。\"), \"\\n\", React.createElement(_components.p, null, React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">vcpkg create url</code>\"\n    }\n  }), \" で雛形が作れる。\"), \"\\n\", React.createElement(_components.p, null, \"実験\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"shell\\\"><pre class=\\\"language-shell\\\"><code class=\\\"language-shell\\\">.<span class=\\\"token punctuation\\\">\\\\</span>vcpkg.exe create alembic https://github.com/alembic/alembic/archive/1.7.1.tar.gz\\nCMake Error at scripts/ports.cmake:101 <span class=\\\"token punctuation\\\">(</span>message<span class=\\\"token punctuation\\\">)</span>:\\n  Portfile already exists: <span class=\\\"token string\\\">'D:\\\\vcpkg\\\\ports\\\\alembic\\\\portfile.cmake'</span></code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"すでにあるだと！？\\n最近できたらしい。\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"https://github.com/Microsoft/vcpkg/tree/master/ports/alembic\"), \"\\n\"), \"\\n\", React.createElement(_components.p, null, \"しかし、hdf非対応みたいなので作ってみる。\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"shell\\\"><pre class=\\\"language-shell\\\"><code class=\\\"language-shell\\\">.<span class=\\\"token punctuation\\\">\\\\</span>vcpkg.exe create alembic-hdf https://github.com/alembic/alembic/archive/1.7.1.tar.gz\\n\\nVCPKG_DIR\\n    ports\\n        alembic-hdf\\n            CONTROL\\n            portfile.cmake</code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"ができた。\\n簡単なCONTROLから。\\nこっちはパッケージ情報を決めるだけなのでさくっと。\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"shell\\\"><pre class=\\\"language-shell\\\"><code class=\\\"language-shell\\\">Source: alembic-hdf\\nVersion: <span class=\\\"token number\\\">1.7</span>.1\\nDescription: alembic with hdf5\\nBuild-Depends: hdf5</code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"本題のportfile.cmake。\\nそのままだとエラーになるの。最低限以下が必要なようだ。\\nアーカイブを展開パスの指定。\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"cmake\\\"><pre class=\\\"language-cmake\\\"><code class=\\\"language-cmake\\\"><span class=\\\"token keyword\\\">set</span><span class=\\\"token punctuation\\\">(</span>SOURCE_PATH <span class=\\\"token punctuation\\\">${</span>CURRENT_BUILDTREES_DIR<span class=\\\"token punctuation\\\">}</span>/src/<span class=\\\"token number\\\">1.7.1</span><span class=\\\"token punctuation\\\">)</span>\\n\\n<span class=\\\"token comment\\\"># ↓ 修正する</span>\\n\\n<span class=\\\"token keyword\\\">set</span><span class=\\\"token punctuation\\\">(</span>SOURCE_PATH <span class=\\\"token punctuation\\\">${</span>CURRENT_BUILDTREES_DIR<span class=\\\"token punctuation\\\">}</span>/src/alembic-<span class=\\\"token number\\\">1.7.1</span><span class=\\\"token punctuation\\\">)</span></code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"実行してみる。\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"shell\\\"><pre class=\\\"language-shell\\\"><code class=\\\"language-shell\\\"><span class=\\\"token operator\\\">></span> ./vcpkg <span class=\\\"token function\\\">install</span> alembic-hdf:x64-windows\\nThe following packages will be built and installed:\\n    alembic-hdf:x64-windows\\nBuilding package alembic-hdf:x64-windows<span class=\\\"token punctuation\\\">..</span>.\\n-- <span class=\\\"token assign-left variable\\\">CURRENT_INSTALLED_DIR</span><span class=\\\"token operator\\\">=</span>D:/vcpkg/installed/x64-windows\\n-- <span class=\\\"token assign-left variable\\\">DOWNLOADS</span><span class=\\\"token operator\\\">=</span>D:/vcpkg/downloads\\n-- <span class=\\\"token assign-left variable\\\">CURRENT_PACKAGES_DIR</span><span class=\\\"token operator\\\">=</span>D:/vcpkg/packages/alembic-hdf_x64-windows\\n-- <span class=\\\"token assign-left variable\\\">CURRENT_BUILDTREES_DIR</span><span class=\\\"token operator\\\">=</span>D:/vcpkg/buildtrees/alembic-hdf\\n-- <span class=\\\"token assign-left variable\\\">CURRENT_PORT_DIR</span><span class=\\\"token operator\\\">=</span>D:/vcpkg/ports/alembic-hdf/.\\n-- Using cached D:/vcpkg/downloads/1.7.1.tar.gz\\n-- Testing integrity of cached file<span class=\\\"token punctuation\\\">..</span>.\\n-- Testing integrity of cached file<span class=\\\"token punctuation\\\">..</span>. OK\\n-- Extracting <span class=\\\"token keyword\\\">done</span>\\n-- Configuring x64-windows-rel\\n-- Configuring x64-windows-rel <span class=\\\"token keyword\\\">done</span>\\n-- Configuring x64-windows-dbg\\nPS D:<span class=\\\"token punctuation\\\">\\\\</span>vcpkg<span class=\\\"token operator\\\">></span> .<span class=\\\"token punctuation\\\">\\\\</span>vcpkg.exe <span class=\\\"token function\\\">install</span> alembic-hdf:x64-windows\\nThe following packages will be built and installed:\\n    alembic-hdf:x64-windows\\nBuilding package alembic-hdf:x64-windows<span class=\\\"token punctuation\\\">..</span>.\\n-- <span class=\\\"token assign-left variable\\\">CURRENT_INSTALLED_DIR</span><span class=\\\"token operator\\\">=</span>D:/vcpkg/installed/x64-windows\\n-- <span class=\\\"token assign-left variable\\\">DOWNLOADS</span><span class=\\\"token operator\\\">=</span>D:/vcpkg/downloads\\n-- <span class=\\\"token assign-left variable\\\">CURRENT_PACKAGES_DIR</span><span class=\\\"token operator\\\">=</span>D:/vcpkg/packages/alembic-hdf_x64-windows\\n-- <span class=\\\"token assign-left variable\\\">CURRENT_BUILDTREES_DIR</span><span class=\\\"token operator\\\">=</span>D:/vcpkg/buildtrees/alembic-hdf\\n-- <span class=\\\"token assign-left variable\\\">CURRENT_PORT_DIR</span><span class=\\\"token operator\\\">=</span>D:/vcpkg/ports/alembic-hdf/.\\n-- Using cached D:/vcpkg/downloads/1.7.1.tar.gz\\n-- Testing integrity of cached file<span class=\\\"token punctuation\\\">..</span>.\\n-- Testing integrity of cached file<span class=\\\"token punctuation\\\">..</span>. OK\\n-- Extracting <span class=\\\"token keyword\\\">done</span>\\n-- Configuring x64-windows-rel\\n-- Configuring x64-windows-rel <span class=\\\"token keyword\\\">done</span>\\n-- Configuring x64-windows-dbg\\n-- Configuring x64-windows-dbg <span class=\\\"token keyword\\\">done</span>\\n-- Package x64-windows-rel\\n-- Package x64-windows-rel <span class=\\\"token keyword\\\">done</span>\\n-- Package x64-windows-dbg\\n-- Package x64-windows-dbg <span class=\\\"token keyword\\\">done</span>\\n-- Performing post-build validation\\nInclude files should not be duplicated into the /debug/include directory. If this cannot be disabled <span class=\\\"token keyword\\\">in</span> the project cmake, use\\n    file<span class=\\\"token punctuation\\\">(</span>REMOVE_RECURSE <span class=\\\"token variable\\\">${CURRENT_PACKAGES_DIR}</span>/debug/include<span class=\\\"token punctuation\\\">)</span>\\nThe /lib/cmake folder should be merged with /debug/lib/cmake and moved to /share/alembic-hdf/cmake.\\nThe following cmake files were found outside /share/alembic-hdf. Please place cmake files <span class=\\\"token keyword\\\">in</span> /share/alembic-hdf.\\n\\n    D:/vcpkg/packages/alembic-hdf_x64-windows/lib/cmake/Alembic/AlembicConfig.cmake\\n    D:/vcpkg/packages/alembic-hdf_x64-windows/lib/cmake/Alembic/AlembicConfigVersion.cmake\\n    D:/vcpkg/packages/alembic-hdf_x64-windows/lib/cmake/Alembic/AlembicTargets-release.cmake\\n    D:/vcpkg/packages/alembic-hdf_x64-windows/lib/cmake/Alembic/AlembicTargets.cmake\\n    D:/vcpkg/packages/alembic-hdf_x64-windows/debug/lib/cmake/Alembic/AlembicConfig.cmake\\n    D:/vcpkg/packages/alembic-hdf_x64-windows/debug/lib/cmake/Alembic/AlembicConfigVersion.cmake\\n    D:/vcpkg/packages/alembic-hdf_x64-windows/debug/lib/cmake/Alembic/AlembicTargets-debug.cmake\\n    D:/vcpkg/packages/alembic-hdf_x64-windows/debug/lib/cmake/Alembic/AlembicTargets.cmake\\n\\nThe /debug/lib/cmake folder should be merged with /lib/cmake into /share/alembic-hdf\\n\\nThe following dlls were found <span class=\\\"token keyword\\\">in</span> /lib or /debug/lib. Please move them to /bin or /debug/bin, respectively.\\n\\n    D:/vcpkg/packages/alembic-hdf_x64-windows/lib/Alembic.dll\\n\\n\\nThe following dlls were found <span class=\\\"token keyword\\\">in</span> /lib or /debug/lib. Please move them to /bin or /debug/bin, respectively.\\n\\n    D:/vcpkg/packages/alembic-hdf_x64-windows/debug/lib/Alembic.dll\\n\\nThe software license must be available at <span class=\\\"token variable\\\">${CURRENT_PACKAGES_DIR}</span>/share/alembic-hdf/copyright\\n\\n    file<span class=\\\"token punctuation\\\">(</span>COPY <span class=\\\"token variable\\\">${CURRENT_BUILDTREES_DIR}</span>/src/alembic-1.7.1/LICENSE.txt DESTINATION <span class=\\\"token variable\\\">${CURRENT_PACKAGES_DIR}</span>/share/alembic-hdf<span class=\\\"token punctuation\\\">)</span>\\n    file<span class=\\\"token punctuation\\\">(</span>RENAME <span class=\\\"token variable\\\">${CURRENT_PACKAGES_DIR}</span>/share/alembic-hdf/LICENSE.txt <span class=\\\"token variable\\\">${CURRENT_PACKAGES_DIR}</span>/share/alembic-hdf/copyright<span class=\\\"token punctuation\\\">)</span>\\nThe following EXEs were found <span class=\\\"token keyword\\\">in</span> /bin or /debug/bin. EXEs are not valid distribution targets.\\n\\n    D:/vcpkg/packages/alembic-hdf_x64-windows/bin/abcdiff.exe\\n    D:/vcpkg/packages/alembic-hdf_x64-windows/bin/abcecho.exe\\n    D:/vcpkg/packages/alembic-hdf_x64-windows/bin/abcechobounds.exe\\n    D:/vcpkg/packages/alembic-hdf_x64-windows/bin/abcls.exe\\n    D:/vcpkg/packages/alembic-hdf_x64-windows/bin/abcstitcher.exe\\n    D:/vcpkg/packages/alembic-hdf_x64-windows/bin/abctree.exe\\n\\nThe following EXEs were found <span class=\\\"token keyword\\\">in</span> /bin or /debug/bin. EXEs are not valid distribution targets.\\n\\n    D:/vcpkg/packages/alembic-hdf_x64-windows/debug/bin/abcdiff.exe\\n    D:/vcpkg/packages/alembic-hdf_x64-windows/debug/bin/abcecho.exe\\n    D:/vcpkg/packages/alembic-hdf_x64-windows/debug/bin/abcechobounds.exe\\n    D:/vcpkg/packages/alembic-hdf_x64-windows/debug/bin/abcls.exe\\n    D:/vcpkg/packages/alembic-hdf_x64-windows/debug/bin/abcstitcher.exe\\n    D:/vcpkg/packages/alembic-hdf_x64-windows/debug/bin/abctree.exe\\n\\nFound <span class=\\\"token number\\\">9</span> error<span class=\\\"token punctuation\\\">(</span>s<span class=\\\"token punctuation\\\">)</span>. Please correct the portfile:\\n    D:<span class=\\\"token punctuation\\\">\\\\</span>vcpkg<span class=\\\"token punctuation\\\">\\\\</span>ports<span class=\\\"token punctuation\\\">\\\\</span>alembic-hdf<span class=\\\"token punctuation\\\">\\\\</span>portfile.cmake\\n-- Performing post-build validation <span class=\\\"token keyword\\\">done</span>\\nError: Building package alembic-hdf:x64-windows failed with: POST_BUILD_CHECKS_FAILED\\nPlease ensure you're using the latest portfiles with <span class=\\\"token variable\\\"><span class=\\\"token variable\\\">`</span>.<span class=\\\"token punctuation\\\">\\\\</span>vcpkg update<span class=\\\"token variable\\\">`</span></span>, <span class=\\\"token keyword\\\">then</span>\\nsubmit an issue at https://github.com/Microsoft/vcpkg/issues including:\\n  Package: alembic-hdf:x64-windows\\n  Vcpkg version: <span class=\\\"token number\\\">0.0</span>.81-144d3718c4197b101c7d61ee6a258200371fb1ab\\n\\nAdditionally, attach any relevant sections from the log files above.</code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"という感じになった。\\nエラーメッセージがすごく親切。\\nあと、NINJAビルド速い。\\nエラーにはなるがビルド結果は以下のように出力された。\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"shell\\\"><pre class=\\\"language-shell\\\"><code class=\\\"language-shell\\\">VCPKG_DIR/packages/alembic-hdf_x64-windows\\n│  BUILD_INFO\\n│\\n├─bin\\n│      abcdiff.exe\\n│      abcecho.exe\\n│      abcechobounds.exe\\n│      abcls.exe\\n│      abcstitcher.exe\\n│      abctree.exe\\n│\\n├─debug\\n│  ├─bin\\n│  │      abcdiff.exe\\n│  │      abcecho.exe\\n│  │      abcechobounds.exe\\n│  │      abcls.exe\\n│  │      abcstitcher.exe\\n│  │      abctree.exe\\n│  │\\n│  ├─include\\n│  │  └─Alembic\\n│  │      ├─Abc\\n│  │      │      *.h\\n│  │      │\\n│  │      ├─AbcCollection\\n│  │      │      *.h\\n│  │      │\\n│  │      ├─AbcCoreAbstract\\n│  │      │      *.h\\n│  │      │\\n│  │      ├─AbcCoreFactory\\n│  │      │      *.h\\n│  │      │\\n│  │      ├─AbcCoreLayer\\n│  │      │      *.h\\n│  │      │\\n│  │      ├─AbcCoreOgawa\\n│  │      │      *.h\\n│  │      │\\n│  │      ├─AbcGeom\\n│  │      │      *.h\\n│  │      │\\n│  │      ├─AbcMaterial\\n│  │      │      *.h\\n│  │      │\\n│  │      └─Util\\n│  │              *.h\\n│  │\\n│  └─lib\\n│      │  Alembic.dll\\n│      │  Alembic.lib\\n│      │\\n│      └─cmake\\n│          └─Alembic\\n│                  AlembicConfig.cmake\\n│                  AlembicConfigVersion.cmake\\n│                  AlembicTargets-debug.cmake\\n│                  AlembicTargets.cmake\\n│\\n├─include\\n│  └─Alembic\\n│      ├─Abc\\n│      │      *.h\\n│      │\\n│      ├─AbcCollection\\n│      │      *.h\\n│      │\\n│      ├─AbcCoreAbstract\\n│      │      *.h\\n│      │\\n│      ├─AbcCoreFactory\\n│      │      *.h\\n│      │\\n│      ├─AbcCoreLayer\\n│      │      *.h\\n│      │\\n│      ├─AbcCoreOgawa\\n│      │      *.h\\n│      │\\n│      ├─AbcGeom\\n│      │      *.h\\n│      │\\n│      ├─AbcMaterial\\n│      │      *.h\\n│      │\\n│      └─Util\\n│              *.h\\n│\\n└─lib\\n    │  Alembic.dll\\n    │  Alembic.lib\\n    │\\n    └─cmake\\n        └─Alembic\\n                AlembicConfig.cmake\\n                AlembicConfigVersion.cmake\\n                AlembicTargets-release.cmake\\n                AlembicTargets.cmake</code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"ここから不要なものを削除したり、場所の違うものを移動したりすることで完成できそう。\\nエラーメッセージに沿って修正してみる\"), \"\\n\", React.createElement(_components.p, null, React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">debug/include</code>\"\n    }\n  }), \" 不要\"), \"\\n\", React.createElement(_components.p, null, \"エラーメッセージに含まれるとおりに。\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"cmake\\\"><pre class=\\\"language-cmake\\\"><code class=\\\"language-cmake\\\"><span class=\\\"token keyword\\\">file</span><span class=\\\"token punctuation\\\">(</span>REMOVE_RECURSE <span class=\\\"token punctuation\\\">${</span>CURRENT_PACKAGES_DIR<span class=\\\"token punctuation\\\">}</span>/debug/include<span class=\\\"token punctuation\\\">)</span>\\n\\nlib/cmake/Alembic/*.cmakeをshare/alembic-hdfに移動するべし\\ndebug/lib/cmake/Alembicを統合するべし。\\n<span class=\\\"token function\\\">vcpkg_fixup_cmake_targets</span><span class=\\\"token punctuation\\\">(</span>CONFIG_PATH <span class=\\\"token string\\\">\\\"lib/cmake/Alembic\\\"</span><span class=\\\"token punctuation\\\">)</span></code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"ぽい。 \", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">alembic/portfile.cmake</code>\"\n    }\n  }), \" を参考にした\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"cmake\\\"><pre class=\\\"language-cmake\\\"><code class=\\\"language-cmake\\\">lib/Alembic.dllをbin/Alembic.dllに移動せよ\\ndebug/lib/Alembic.dllも。\\n<span class=\\\"token keyword\\\">file</span><span class=\\\"token punctuation\\\">(</span>RENAME <span class=\\\"token punctuation\\\">${</span>CURRENT_PACKAGES_DIR<span class=\\\"token punctuation\\\">}</span>/lib/Alembic.dll <span class=\\\"token punctuation\\\">${</span>CURRENT_PACKAGES_DIR<span class=\\\"token punctuation\\\">}</span>/bin/Alembic.dll<span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token keyword\\\">file</span><span class=\\\"token punctuation\\\">(</span>RENAME <span class=\\\"token punctuation\\\">${</span>CURRENT_PACKAGES_DIR<span class=\\\"token punctuation\\\">}</span>/debug/lib/Alembic.dll <span class=\\\"token punctuation\\\">${</span>CURRENT_PACKAGES_DIR<span class=\\\"token punctuation\\\">}</span>/debug/bin/Alembic.dll<span class=\\\"token punctuation\\\">)</span></code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">alembic/portfile.cmake</code>\"\n    }\n  }), \" を参考にした\"), \"\\n\", React.createElement(_components.p, null, \"ライセンスファイルをコピーせよ\\nエラーメッセージに含まれるとおりに。\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"cmake\\\"><pre class=\\\"language-cmake\\\"><code class=\\\"language-cmake\\\"><span class=\\\"token keyword\\\">file</span><span class=\\\"token punctuation\\\">(</span>COPY <span class=\\\"token punctuation\\\">${</span>CURRENT_BUILDTREES_DIR<span class=\\\"token punctuation\\\">}</span>/src/alembic-<span class=\\\"token number\\\">1.7.1</span>/LICENSE.txt DESTINATION <span class=\\\"token punctuation\\\">${</span>CURRENT_PACKAGES_DIR<span class=\\\"token punctuation\\\">}</span>/share/alembic-hdf<span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token keyword\\\">file</span><span class=\\\"token punctuation\\\">(</span>RENAME <span class=\\\"token punctuation\\\">${</span>CURRENT_PACKAGES_DIR<span class=\\\"token punctuation\\\">}</span>/share/alembic-hdf/LICENSE.txt <span class=\\\"token punctuation\\\">${</span>CURRENT_PACKAGES_DIR<span class=\\\"token punctuation\\\">}</span>/share/alembic-hdf/copyright<span class=\\\"token punctuation\\\">)</span></code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"exeを削除せよ\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"cmake\\\"><pre class=\\\"language-cmake\\\"><code class=\\\"language-cmake\\\"><span class=\\\"token keyword\\\">file</span><span class=\\\"token punctuation\\\">(</span>GLOB EXE <span class=\\\"token punctuation\\\">${</span>CURRENT_PACKAGES_DIR<span class=\\\"token punctuation\\\">}</span>/bin/*.exe<span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token keyword\\\">file</span><span class=\\\"token punctuation\\\">(</span>GLOB DEBUG_EXE <span class=\\\"token punctuation\\\">${</span>CURRENT_PACKAGES_DIR<span class=\\\"token punctuation\\\">}</span>/debug/bin/*.exe<span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token keyword\\\">file</span><span class=\\\"token punctuation\\\">(</span>REMOVE <span class=\\\"token punctuation\\\">${</span>EXE<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token keyword\\\">file</span><span class=\\\"token punctuation\\\">(</span>REMOVE <span class=\\\"token punctuation\\\">${</span>DEBUG_EXE<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span></code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"alembic/portfile.cmakeを参考にした\\nおまけ: debug用にpdbをコピー\\nalembic/portfile.cmakeを参考にした\\nvcpkg_copy_pdbs()\"), \"\\n\", React.createElement(_components.p, null, \"vcpkg_install_cmakeより下を抜粋。\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"cmake\\\"><pre class=\\\"language-cmake\\\"><code class=\\\"language-cmake\\\"><span class=\\\"token function\\\">vcpkg_install_cmake</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span>\\n\\n<span class=\\\"token comment\\\"># Remove debug/include</span>\\n<span class=\\\"token keyword\\\">file</span><span class=\\\"token punctuation\\\">(</span>REMOVE_RECURSE <span class=\\\"token punctuation\\\">${</span>CURRENT_PACKAGES_DIR<span class=\\\"token punctuation\\\">}</span>/debug/include<span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token comment\\\"># fix *.cmake</span>\\n<span class=\\\"token function\\\">vcpkg_fixup_cmake_targets</span><span class=\\\"token punctuation\\\">(</span>CONFIG_PATH <span class=\\\"token string\\\">\\\"lib/cmake/Alembic\\\"</span><span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token comment\\\"># Rename dll</span>\\n<span class=\\\"token keyword\\\">file</span><span class=\\\"token punctuation\\\">(</span>RENAME <span class=\\\"token punctuation\\\">${</span>CURRENT_PACKAGES_DIR<span class=\\\"token punctuation\\\">}</span>/lib/Alembic.dll <span class=\\\"token punctuation\\\">${</span>CURRENT_PACKAGES_DIR<span class=\\\"token punctuation\\\">}</span>/bin/Alembic.dll<span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token keyword\\\">file</span><span class=\\\"token punctuation\\\">(</span>RENAME <span class=\\\"token punctuation\\\">${</span>CURRENT_PACKAGES_DIR<span class=\\\"token punctuation\\\">}</span>/debug/lib/Alembic.dll <span class=\\\"token punctuation\\\">${</span>CURRENT_PACKAGES_DIR<span class=\\\"token punctuation\\\">}</span>/debug/bin/Alembic.dll<span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token comment\\\"># Handle copyright</span>\\n<span class=\\\"token keyword\\\">file</span><span class=\\\"token punctuation\\\">(</span>COPY <span class=\\\"token punctuation\\\">${</span>CURRENT_BUILDTREES_DIR<span class=\\\"token punctuation\\\">}</span>/src/alembic-<span class=\\\"token number\\\">1.7.1</span>/LICENSE.txt DESTINATION <span class=\\\"token punctuation\\\">${</span>CURRENT_PACKAGES_DIR<span class=\\\"token punctuation\\\">}</span>/share/alembic-hdf<span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token keyword\\\">file</span><span class=\\\"token punctuation\\\">(</span>RENAME <span class=\\\"token punctuation\\\">${</span>CURRENT_PACKAGES_DIR<span class=\\\"token punctuation\\\">}</span>/share/alembic-hdf/LICENSE.txt <span class=\\\"token punctuation\\\">${</span>CURRENT_PACKAGES_DIR<span class=\\\"token punctuation\\\">}</span>/share/alembic-hdf/copyright<span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token comment\\\"># Remove exe files</span>\\n<span class=\\\"token keyword\\\">file</span><span class=\\\"token punctuation\\\">(</span>GLOB EXE <span class=\\\"token punctuation\\\">${</span>CURRENT_PACKAGES_DIR<span class=\\\"token punctuation\\\">}</span>/bin/*.exe<span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token keyword\\\">file</span><span class=\\\"token punctuation\\\">(</span>GLOB DEBUG_EXE <span class=\\\"token punctuation\\\">${</span>CURRENT_PACKAGES_DIR<span class=\\\"token punctuation\\\">}</span>/debug/bin/*.exe<span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token keyword\\\">file</span><span class=\\\"token punctuation\\\">(</span>REMOVE <span class=\\\"token punctuation\\\">${</span>EXE<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token keyword\\\">file</span><span class=\\\"token punctuation\\\">(</span>REMOVE <span class=\\\"token punctuation\\\">${</span>DEBUG_EXE<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token comment\\\"># Copy pdb</span>\\n<span class=\\\"token function\\\">vcpkg_copy_pdbs</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span></code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"再度ビルド。\"), \"\\n\", React.createElement(_components.p, null, React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">> vcpkg install alembic-hdf:x64-windows</code>\"\n    }\n  })), \"\\n\", React.createElement(_components.p, null, \"うまくいった。\\nUSE_HDF5を有効にする\\nportfileの修正\\nCONTROLに依存追加。\\nBuild-Depends: ilmbase, hdf5\"), \"\\n\", React.createElement(_components.p, null, \"USE_HDF5を有効に。\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"cmake\\\"><pre class=\\\"language-cmake\\\"><code class=\\\"language-cmake\\\"><span class=\\\"token function\\\">vcpkg_configure_cmake</span><span class=\\\"token punctuation\\\">(</span>\\n    SOURCE_PATH <span class=\\\"token punctuation\\\">${</span>SOURCE_PATH<span class=\\\"token punctuation\\\">}</span>\\n    PREFER_NINJA <span class=\\\"token comment\\\"># Disable this option if project cannot be built with Ninja</span>\\n    OPTIONS -DUSE_HDF5=<span class=\\\"token boolean\\\">ON</span>\\n    <span class=\\\"token comment\\\"># OPTIONS_RELEASE -DOPTIMIZE=1</span>\\n    <span class=\\\"token comment\\\"># OPTIONS_DEBUG -DDEBUGGABLE=1</span>\\n<span class=\\\"token punctuation\\\">)</span></code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"ビルドあんどエラー\\nビルドしてみるがエラーになる。\"), \"\\n\", React.createElement(_components.p, null, React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">VCPKG_DIR\\\\buildtrees\\\\alembic-hdf\\\\package-x64-windows-rel-out.log</code>\"\n    }\n  }), \" を見て原因を探る。\"), \"\\n\", React.createElement(_components.p, null, \"hdf5に対するlinkが無くて、hdf5関連のシンボルが見つからん。\\nパッチ\\nalembic-1.7.1/lib/Alembic/CMakeLists.txtを修正したいのでやり方を調べる。\\nパッチの当て方\"), \"\\n\", React.createElement(_components.p, null, \"portfile.cmakeに記述する。\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"cmake\\\"><pre class=\\\"language-cmake\\\"><code class=\\\"language-cmake\\\">vcpkg_extract_source_archiveよりあと、vcpkg_install_cmakeより前。\\n<span class=\\\"token function\\\">vcpkg_apply_patches</span><span class=\\\"token punctuation\\\">(</span>\\n    SOURCE_PATH <span class=\\\"token punctuation\\\">${</span>SOURCE_PATH<span class=\\\"token punctuation\\\">}</span>\\n    PATCHES <span class=\\\"token punctuation\\\">${</span><span class=\\\"token variable\\\">CMAKE_CURRENT_LIST_DIR</span><span class=\\\"token punctuation\\\">}</span>/fix-hdf5link.patch\\n<span class=\\\"token punctuation\\\">)</span></code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"パッチの作り方\"), \"\\n\", React.createElement(_components.p, null, \"https://github.com/Microsoft/vcpkg/blob/master/docs/examples/patching-libpng.md#patching-the-code-to-improve-compatibility\"), \"\\n\", React.createElement(_components.p, null, \"なるほど。\\ngitを準備して・・・\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"shell\\\"><pre class=\\\"language-shell\\\"><code class=\\\"language-shell\\\">vcpkg<span class=\\\"token operator\\\">></span> <span class=\\\"token builtin class-name\\\">cd</span> ./buildtrees/alembic-hdf/src/alembic-1.7.1/\\nvcpkg/buildtrees/alembic-hdf/src/alembic-1.7.<span class=\\\"token operator\\\"><span class=\\\"token file-descriptor important\\\">1</span>></span> <span class=\\\"token function\\\">git</span> init\\nvcpkg/buildtrees/alembic-hdf/src/alembic-1.7.<span class=\\\"token operator\\\"><span class=\\\"token file-descriptor important\\\">1</span>></span> <span class=\\\"token function\\\">git</span> <span class=\\\"token function\\\">add</span> <span class=\\\"token builtin class-name\\\">.</span>\\nvcpkg/buildtrees/alembic-hdf/src/alembic-1.7.<span class=\\\"token operator\\\"><span class=\\\"token file-descriptor important\\\">1</span>></span> <span class=\\\"token function\\\">git</span> commit <span class=\\\"token parameter variable\\\">-m</span> <span class=\\\"token string\\\">\\\"temp\\\"</span></code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"修正\\nalembic-1.7.1/lib/Alembic/CMakeLists.txtを修正。\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"diff\\\"><pre class=\\\"language-diff\\\"><code class=\\\"language-diff\\\"><span class=\\\"token inserted-arrow inserted\\\"><span class=\\\"token prefix inserted\\\">></span> git diff\\n</span><span class=\\\"token deleted-sign deleted\\\"><span class=\\\"token prefix deleted\\\">-</span>-git a/lib/Alembic/CMakeLists.txt b/lib/Alembic/CMakeLists.txt\\n</span>index 5028c91..1f81d50 100644\\n<span class=\\\"token coord\\\">--- a/lib/Alembic/CMakeLists.txt</span>\\n<span class=\\\"token coord\\\">+++ b/lib/Alembic/CMakeLists.txt</span>\\n@@ -49,6 +49,12 @@ ADD_SUBDIRECTORY(AbcMaterial)\\n<span class=\\\"token unchanged\\\"><span class=\\\"token prefix unchanged\\\"> </span>ADD_SUBDIRECTORY(Ogawa)\\n</span>\\n<span class=\\\"token unchanged\\\"><span class=\\\"token prefix unchanged\\\"> </span>ADD_LIBRARY(Alembic ${LIB_TYPE} ${CXX_FILES})\\n</span><span class=\\\"token inserted-sign inserted\\\"><span class=\\\"token prefix inserted\\\">+</span>IF (USE_HDF5)\\n<span class=\\\"token prefix inserted\\\">+</span>    TARGET_LINK_LIBRARIES(Alembic\\n<span class=\\\"token prefix inserted\\\">+</span>        ${HDF5_LIBRARIES}\\n<span class=\\\"token prefix inserted\\\">+</span>        )\\n<span class=\\\"token prefix inserted\\\">+</span>    ADD_DEFINITIONS(-DH5_BUILT_AS_DYNAMIC_LIB)\\n<span class=\\\"token prefix inserted\\\">+</span>ENDIF()\\n</span>\\n<span class=\\\"token unchanged\\\"><span class=\\\"token prefix unchanged\\\"> </span>TARGET_INCLUDE_DIRECTORIES(Alembic\\n<span class=\\\"token prefix unchanged\\\"> </span>    PUBLIC</span></code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"gitでpatchを作成\"), \"\\n\", React.createElement(_components.p, null, React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<code class=\\\"language-text\\\">> git diff | out-file -enc ascii ..\\\\..\\\\..\\\\..\\\\ports\\\\alembic-hdf\\\\fix-hdf5link.patch</code>\"\n    }\n  })), \"\\n\", React.createElement(_components.p, null, \"ビルド\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"shell\\\"><pre class=\\\"language-shell\\\"><code class=\\\"language-shell\\\"><span class=\\\"token operator\\\">></span> .<span class=\\\"token punctuation\\\">\\\\</span>vcpkg.exe <span class=\\\"token function\\\">install</span> alembic-hdf:x64-windows\\nInstalling package alembic-hdf:x64-windows<span class=\\\"token punctuation\\\">..</span>. <span class=\\\"token keyword\\\">done</span></code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"VCPKG_DIR/installed/x64-windows/bin/Alembic.dllをdependencywalkerで見てみるとばっちりhdf5.dllへのリンクが含まれている。作業完了。\\nはじめてで調べながらでもわりとさくさく作業が進んだ。エラーメッセージの出し方とか、フォルダの構成とかvcpkgなかなかレベルが高いな。\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"shell\\\"><pre class=\\\"language-shell\\\"><code class=\\\"language-shell\\\">ports\\nports/alembic-hdf/CONTROL\\nSource: alembic-hdf\\nVersion: <span class=\\\"token number\\\">1.7</span>.1\\nDescription: alembic with hdf5\\nBuild-Depends: ilmbase, hdf5</code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"ports/alembic-hdf/portfile.cmake\\\"><pre class=\\\"language-ports/alembic-hdf/portfile.cmake\\\"><code class=\\\"language-ports/alembic-hdf/portfile.cmake\\\"># Common Ambient Variables:\\n#   CURRENT_BUILDTREES_DIR    = ${VCPKG_ROOT_DIR}\\\\buildtrees\\\\${PORT}\\n#   CURRENT_PACKAGES_DIR      = ${VCPKG_ROOT_DIR}\\\\packages\\\\${PORT}_${TARGET_TRIPLET}\\n#   CURRENT_PORT_DIR          = ${VCPKG_ROOT_DIR}\\\\ports\\\\${PORT}\\n#   PORT                      = current port name (zlib, etc)\\n#   TARGET_TRIPLET            = current triplet (x86-windows, x64-windows-static, etc)\\n#   VCPKG_CRT_LINKAGE         = C runtime linkage type (static, dynamic)\\n#   VCPKG_LIBRARY_LINKAGE     = target library linkage type (static, dynamic)\\n#   VCPKG_ROOT_DIR            = &lt;C:\\\\path\\\\to\\\\current\\\\vcpkg&gt;\\n#   VCPKG_TARGET_ARCHITECTURE = target architecture (x64, x86, arm)\\n#\\n\\ninclude(vcpkg_common_functions)\\nset(SOURCE_PATH ${CURRENT_BUILDTREES_DIR}/src/alembic-1.7.1)\\nvcpkg_download_distfile(ARCHIVE\\n    URLS &quot;https://github.com/alembic/alembic/archive/1.7.1.tar.gz&quot;\\n    FILENAME &quot;1.7.1.tar.gz&quot;\\n    SHA512 89e30b681a76eaf79b20ebeff62c495971b0eb64b28f249a14bbcf3bdb40df7eda93b0ede299dd5511bd4587a2cc2d4ebd851fb89bf999fdccc31fee3cffbba2\\n)\\nvcpkg_extract_source_archive(${ARCHIVE})\\n\\nvcpkg_apply_patches(\\n    SOURCE_PATH ${SOURCE_PATH}\\n    PATCHES ${CMAKE_CURRENT_LIST_DIR}/fix-hdf5link.patch\\n)\\n\\nvcpkg_configure_cmake(\\n    SOURCE_PATH ${SOURCE_PATH}\\n    PREFER_NINJA # Disable this option if project cannot be built with Ninja\\n    OPTIONS -DUSE_HDF5=ON\\n    # OPTIONS_RELEASE -DOPTIMIZE=1\\n    # OPTIONS_DEBUG -DDEBUGGABLE=1\\n)\\n\\nvcpkg_install_cmake()\\n\\n# Remove debug/include\\nfile(REMOVE_RECURSE ${CURRENT_PACKAGES_DIR}/debug/include)\\n# fix *.cmake\\nvcpkg_fixup_cmake_targets(CONFIG_PATH &quot;lib/cmake/Alembic&quot;)\\n# Rename dll\\nfile(RENAME ${CURRENT_PACKAGES_DIR}/lib/Alembic.dll ${CURRENT_PACKAGES_DIR}/bin/Alembic.dll)\\nfile(RENAME ${CURRENT_PACKAGES_DIR}/debug/lib/Alembic.dll ${CURRENT_PACKAGES_DIR}/debug/bin/Alembic.dll)\\n# Handle copyright\\nfile(COPY ${CURRENT_BUILDTREES_DIR}/src/alembic-1.7.1/LICENSE.txt DESTINATION ${CURRENT_PACKAGES_DIR}/share/alembic-hdf)\\nfile(RENAME ${CURRENT_PACKAGES_DIR}/share/alembic-hdf/LICENSE.txt ${CURRENT_PACKAGES_DIR}/share/alembic-hdf/copyright)\\n# Remove exe files\\nfile(GLOB EXE ${CURRENT_PACKAGES_DIR}/bin/*.exe)\\nfile(GLOB DEBUG_EXE ${CURRENT_PACKAGES_DIR}/debug/bin/*.exe)\\nfile(REMOVE ${EXE})\\nfile(REMOVE ${DEBUG_EXE})\\n# Copy pdb\\nvcpkg_copy_pdbs()</code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<div class=\\\"gatsby-highlight\\\" data-language=\\\"ports/alembic-hdf/fix-hdf5link.patch\\\"><pre class=\\\"language-ports/alembic-hdf/fix-hdf5link.patch\\\"><code class=\\\"language-ports/alembic-hdf/fix-hdf5link.patch\\\">diff --git a/lib/Alembic/CMakeLists.txt b/lib/Alembic/CMakeLists.txt\\nindex 5028c91..1f81d50 100644\\n--- a/lib/Alembic/CMakeLists.txt\\n+++ b/lib/Alembic/CMakeLists.txt\\n@@ -49,6 +49,12 @@ ADD_SUBDIRECTORY(AbcMaterial)\\n ADD_SUBDIRECTORY(Ogawa)\\n \\n ADD_LIBRARY(Alembic ${LIB_TYPE} ${CXX_FILES})\\n+IF (USE_HDF5)\\n+    TARGET_LINK_LIBRARIES(Alembic \\n+        ${HDF5_LIBRARIES}\\n+        )\\n+    ADD_DEFINITIONS(-DH5_BUILT_AS_DYNAMIC_LIB)\\n+ENDIF()\\n \\n TARGET_INCLUDE_DIRECTORIES(Alembic\\n     PUBLIC</code></pre></div>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"vcpkgにPR送った\\n採用されたので上記の作業は必要なくなったのが、cmake-3.9.0の更新でFindHDF5が壊れるという事態が発生したので対応中…。\"));\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? React.createElement(MDXLayout, props, React.createElement(_createMdxContent, props)) : _createMdxContent(props);\n}\nexport default MDXContent;\n","import GATSBY_COMPILED_MDX from \"/home/runner/work/ousttrue.github.io/ousttrue.github.io/content/posts/2017/07/vcpkg_alembic.md\";\nimport React from \"react\";\nimport {graphql} from \"gatsby\";\nimport Layout from \"../components/layout.js\";\nimport {MDXProvider} from \"@mdx-js/react\";\nimport PrismSyntaxHighlight from \"../components/prism-syntax-highlight\";\nconst components = {\n  code: ({children, className}) => {\n    return className ? React.createElement(PrismSyntaxHighlight, {\n      className: className\n    }, children) : React.createElement(\"code\", null, children);\n  }\n};\nfunction PostTempalte({data, children}) {\n  return React.createElement(React.Fragment, null, React.createElement(\"h1\", null, data.mdx.frontmatter.title), React.createElement(MDXProvider, {\n    components: components\n  }, children));\n}\nexport default function GatsbyMDXWrapper(props) {\n  return React.createElement(PostTempalte, props, React.createElement(GATSBY_COMPILED_MDX, props));\n}\nexport const query = graphql`\n  query ($id: String!) {\n    mdx(id: { eq: $id }) {\n      frontmatter {\n        title\n      }\n    }\n  }\n`;\n"],"names":["_createMdxContent","props","_components","Object","assign","p","ul","li","span","_provideComponents","components","React","dangerouslySetInnerHTML","__html","wrapper","MDXLayout","code","_ref","children","className","PrismSyntaxHighlight","PostTempalte","_ref2","data","mdx","frontmatter","title","MDXProvider","GatsbyMDXWrapper","GATSBY_COMPILED_MDX"],"sourceRoot":""}